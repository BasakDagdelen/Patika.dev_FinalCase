2025-05-06 02:19:40.663 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 02:19:41.310 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 02:19:41.311 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 02:19:41.323 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 02:19:41.324 +03:00 [INF] Hosting environment: Development
2025-05-06 02:19:41.324 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 02:19:42.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 02:19:42.768 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 466.6761ms
2025-05-06 02:19:42.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 02:19:42.796 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 02:19:42.995 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 199.349ms
2025-05-06 02:19:43.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 319.1442ms
2025-05-06 02:19:44.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 02:19:44.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.344ms
2025-05-06 02:20:11.612 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 02:20:11.717 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:20:11.750 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 02:20:11.758 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 4.6294ms
2025-05-06 02:20:11.760 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:20:11.763 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 145.0463 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 02:20:11.788 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 02:20:11.794 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 182.1021ms
2025-05-06 02:21:03.120 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 02:21:03.138 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:21:03.138 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 02:21:03.139 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 0.6086ms
2025-05-06 02:21:03.139 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:21:03.140 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 5.9136 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 02:21:03.141 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 02:21:03.143 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 22.3241ms
2025-05-06 02:21:21.779 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 02:21:21.799 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 02:21:21.804 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 02:21:21.804 +03:00 [INF] HTTP GET /api/User responded 401 in 23.9261 ms
2025-05-06 02:21:21.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 25.6597ms
2025-05-06 02:24:04.955 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 02:24:04.979 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 02:24:04.980 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 02:24:04.980 +03:00 [INF] HTTP GET /api/ExpenseDocument responded 401 in 9.8644 ms
2025-05-06 02:24:04.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 401 0 null 25.6301ms
2025-05-06 02:25:44.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 02:25:44.993 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 02:25:44.994 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 02:25:44.994 +03:00 [INF] HTTP GET /api/User responded 401 in 3.8536 ms
2025-05-06 02:25:44.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 21.1147ms
2025-05-06 02:25:56.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 02:25:56.578 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 02:25:56.579 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 02:25:56.579 +03:00 [INF] HTTP GET /api/Payment responded 401 in 1.4283 ms
2025-05-06 02:25:56.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 401 0 null 2.0737ms
2025-05-06 02:27:25.239 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 02:27:25.239 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:27:25.244 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 02:27:25.250 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 5.146ms
2025-05-06 02:27:25.251 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:27:25.252 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 12.5199 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 02:27:25.258 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 02:27:25.261 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 22.5012ms
2025-05-06 02:28:34.574 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 02:28:35.163 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 02:28:35.163 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 02:28:35.165 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 02:28:35.166 +03:00 [INF] Hosting environment: Development
2025-05-06 02:28:35.166 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 02:28:36.027 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 02:28:36.545 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 561.0869ms
2025-05-06 02:28:36.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 02:28:36.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 02:28:36.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 26.687ms
2025-05-06 02:28:36.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.7593ms
2025-05-06 02:28:38.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 02:28:38.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.1349ms
2025-05-06 02:31:43.317 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 02:31:43.438 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:31:43.473 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 02:31:43.481 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 5.5224ms
2025-05-06 02:31:43.483 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:31:43.485 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 158.2897 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 02:31:43.510 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 02:31:43.515 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 198.5643ms
2025-05-06 02:56:35.229 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 02:56:35.586 +03:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-05-06 02:56:35.592 +03:00 [ERR] Hosting failed to start
System.InvalidOperationException: Unable to resolve service for type 'Serilog.Extensions.Hosting.DiagnosticContext' while attempting to activate 'Serilog.AspNetCore.RequestLoggingMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-05-06 02:58:19.592 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 02:58:20.099 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 02:58:20.100 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 02:58:20.102 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 02:58:20.102 +03:00 [INF] Hosting environment: Development
2025-05-06 02:58:20.102 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 02:58:21.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 02:58:21.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 534.6521ms
2025-05-06 02:58:21.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 02:58:21.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 02:58:21.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 25.2707ms
2025-05-06 02:58:21.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 138.1327ms
2025-05-06 02:58:23.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 02:58:23.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.1073ms
2025-05-06 02:58:42.833 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 47
2025-05-06 02:58:42.970 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:58:43.002 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 02:58:43.011 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 4.1174ms
2025-05-06 02:58:43.013 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 02:58:43.016 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 174.6856 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 02:58:43.043 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 02:58:43.048 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 215.1328ms
2025-05-06 02:58:52.906 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 02:58:52.917 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 02:58:52.921 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 02:58:52.921 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 401 in 13.3550 ms
2025-05-06 02:58:52.921 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 401 0 null 16.3926ms
2025-05-06 03:00:55.685 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:00:56.102 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:00:56.103 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:00:56.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:00:56.105 +03:00 [INF] Hosting environment: Development
2025-05-06 03:00:56.105 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:00:57.109 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:00:58.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1168.5149ms
2025-05-06 03:00:58.313 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:00:58.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:00:58.322 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.9324ms
2025-05-06 03:00:58.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.2874ms
2025-05-06 03:00:59.975 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:01:00.186 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.9013ms
2025-05-06 03:01:42.672 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:01:43.149 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:01:43.149 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:01:43.151 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:01:43.152 +03:00 [INF] Hosting environment: Development
2025-05-06 03:01:43.152 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:01:43.903 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:01:44.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 567.0006ms
2025-05-06 03:01:44.471 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:01:44.474 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:01:44.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 58.9333ms
2025-05-06 03:01:44.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.4905ms
2025-05-06 03:01:46.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:01:46.432 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.4116ms
2025-05-06 03:02:02.329 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:02:02.465 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:02.500 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:02:02.509 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 4.2332ms
2025-05-06 03:02:02.510 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:02.513 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 174.1662 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:02:02.557 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:02:02.564 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 235.073ms
2025-05-06 03:02:22.277 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 118
2025-05-06 03:02:22.280 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:22.280 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:02:22.281 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 0.7394ms
2025-05-06 03:02:22.281 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:22.282 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 3.1809 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:02:22.283 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:02:22.284 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 7.2978ms
2025-05-06 03:02:32.285 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 118
2025-05-06 03:02:32.288 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:32.289 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:02:32.289 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 0.5597ms
2025-05-06 03:02:32.289 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:02:32.290 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 3.6285 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:02:32.291 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Domain.Interfaces.Repositories.IUserRepository' while attempting to activate 'Expense_Management_System.WebApi.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:02:32.292 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 7.2431ms
2025-05-06 03:07:04.525 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:07:05.111 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:07:05.112 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:07:05.114 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:07:05.115 +03:00 [INF] Hosting environment: Development
2025-05-06 03:07:05.115 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:07:06.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:07:06.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 586.9238ms
2025-05-06 03:07:06.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:07:06.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:07:06.981 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.651ms
2025-05-06 03:07:07.047 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.5636ms
2025-05-06 03:07:08.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:07:08.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 256.6216ms
2025-05-06 03:07:42.113 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:07:42.228 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:07:42.256 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:07:43.478 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:07:50.675 +03:00 [INF] Executed DbCommand (238ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:07:59.373 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 17113.5724ms
2025-05-06 03:07:59.375 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:07:59.378 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 17253.7456 ms
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Expense_Management_System.Infrastructure.Token.JwtTokenService.GenerateToken(User user) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Token\JwtTokenService.cs:line 32
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:07:59.420 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Expense_Management_System.Infrastructure.Token.JwtTokenService.GenerateToken(User user) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Token\JwtTokenService.cs:line 32
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:07:59.432 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 17319.2568ms
2025-05-06 03:09:35.102 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:09:35.309 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:09:35.310 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:09:35.312 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:09:35.312 +03:00 [INF] Hosting environment: Development
2025-05-06 03:09:35.312 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:09:53.076 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:09:53.493 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:09:53.493 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:09:53.496 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:09:53.496 +03:00 [INF] Hosting environment: Development
2025-05-06 03:09:53.496 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:09:54.276 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:09:55.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 991.3565ms
2025-05-06 03:09:55.296 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:09:55.296 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:09:55.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.8236ms
2025-05-06 03:09:55.348 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.2363ms
2025-05-06 03:09:56.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:09:56.937 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.2825ms
2025-05-06 03:10:19.350 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:10:19.461 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:10:19.487 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:10:20.509 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:10:32.583 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:10:34.364 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 14873.022ms
2025-05-06 03:10:34.366 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:10:34.370 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 15010.7994 ms
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '208' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at Expense_Management_System.Infrastructure.Token.JwtTokenService.GenerateToken(User user) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Token\JwtTokenService.cs:line 43
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:10:34.409 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '208' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at Expense_Management_System.Infrastructure.Token.JwtTokenService.GenerateToken(User user) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Token\JwtTokenService.cs:line 43
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:10:34.471 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 15121.0723ms
2025-05-06 03:12:58.673 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:12:59.216 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:12:59.216 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:12:59.218 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:12:59.219 +03:00 [INF] Hosting environment: Development
2025-05-06 03:12:59.219 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:13:00.074 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:13:00.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 571.6129ms
2025-05-06 03:13:00.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:13:00.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:13:00.662 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.2849ms
2025-05-06 03:13:00.712 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.3092ms
2025-05-06 03:13:02.206 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:13:02.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 260.4129ms
2025-05-06 03:13:43.467 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:13:43.592 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:13:43.621 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:13:44.801 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:13:45.592 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:13:45.800 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2176.1332ms
2025-05-06 03:13:45.802 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:13:45.805 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 2317.6290 ms
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToDouble(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:13:45.845 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToDouble(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:13:45.857 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 2396.6553ms
2025-05-06 03:15:14.481 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:15:14.944 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:15:14.945 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:15:14.947 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:15:14.948 +03:00 [INF] Hosting environment: Development
2025-05-06 03:15:14.948 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:15:15.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:15:16.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 528.8585ms
2025-05-06 03:15:16.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:15:16.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:15:16.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.3472ms
2025-05-06 03:15:16.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 636.3041ms
2025-05-06 03:15:18.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:15:18.320 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 296.9277ms
2025-05-06 03:15:32.534 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:15:32.653 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:15:32.689 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:15:33.843 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:15:34.571 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:15:34.771 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2078.8322ms
2025-05-06 03:15:34.773 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:15:34.778 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 2233.8661 ms
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToInt32(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:15:34.811 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToInt32(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:15:34.824 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 2290.0585ms
2025-05-06 03:20:50.187 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:20:50.771 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:20:50.772 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:20:50.774 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:20:50.774 +03:00 [INF] Hosting environment: Development
2025-05-06 03:20:50.774 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:20:51.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:20:52.061 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 445.8212ms
2025-05-06 03:20:52.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:20:52.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:20:52.119 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 23.0294ms
2025-05-06 03:20:52.173 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.0159ms
2025-05-06 03:20:53.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:20:53.975 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.6585ms
2025-05-06 03:21:39.391 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:21:39.521 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:21:39.559 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:21:40.620 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:21:41.358 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:21:41.590 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2027.0229ms
2025-05-06 03:21:41.591 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:21:41.595 +03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 2196.0778 ms
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToInt32(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 03:21:41.627 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: The input string 'JwtSettings:ExpireMinutes' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at System.Convert.ToInt32(String value)
   at Expense_Management_System.WebApi.Controllers.AuthController.Login(LoginRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\AuthController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 03:21:41.641 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 500 null text/plain; charset=utf-8 2250.1409ms
2025-05-06 03:22:24.018 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:22:25.234 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:22:25.235 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:22:25.238 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:22:25.238 +03:00 [INF] Hosting environment: Development
2025-05-06 03:22:25.238 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:22:26.079 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:22:26.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 437.7419ms
2025-05-06 03:22:26.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:22:26.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:22:26.560 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 23.8819ms
2025-05-06 03:22:26.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.6086ms
2025-05-06 03:22:28.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:22:28.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 279.7512ms
2025-05-06 03:22:40.608 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:22:40.741 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:22:40.773 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:22:41.787 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:22:42.455 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:22:42.567 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 777.1149ms.
2025-05-06 03:22:42.573 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 03:22:42.587 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 1809.9127ms
2025-05-06 03:22:42.587 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:22:42.590 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1973.8247 ms
2025-05-06 03:22:42.598 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 1989.9319ms
2025-05-06 03:23:12.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 03:23:12.631 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 03:23:12.636 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:23:12.636 +03:00 [INF] HTTP GET /api/User responded 401 in 15.7163 ms
2025-05-06 03:23:12.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 29.6074ms
2025-05-06 03:23:40.214 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 254
2025-05-06 03:23:40.240 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 03:23:40.241 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:23:40.241 +03:00 [INF] HTTP POST /api/User responded 401 in 24.1446 ms
2025-05-06 03:23:40.242 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 401 0 null 28.1819ms
2025-05-06 03:23:53.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 03:23:53.493 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 03:23:53.493 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:23:53.493 +03:00 [INF] HTTP GET /api/ExpenseDocument responded 401 in 2.2062 ms
2025-05-06 03:23:53.493 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 401 0 null 3.6557ms
2025-05-06 03:24:02.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 03:24:02.600 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 03:24:02.600 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:24:02.600 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 0.3459 ms
2025-05-06 03:24:02.600 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 1.6736ms
2025-05-06 03:34:54.951 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:34:55.575 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:34:55.576 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:34:55.579 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:34:55.580 +03:00 [INF] Hosting environment: Development
2025-05-06 03:34:55.580 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:34:56.295 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:34:56.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 501.4803ms
2025-05-06 03:34:56.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:34:56.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:34:56.816 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.0259ms
2025-05-06 03:34:56.851 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.3893ms
2025-05-06 03:34:58.162 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:34:58.376 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 214.0348ms
2025-05-06 03:35:26.082 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:35:26.199 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:35:26.240 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:35:27.386 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:35:28.186 +03:00 [INF] Executed DbCommand (171ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:35:28.310 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 917.9183ms.
2025-05-06 03:35:28.318 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 03:35:28.336 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2092.3572ms
2025-05-06 03:35:28.337 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:35:28.340 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2239.4984 ms
2025-05-06 03:35:28.354 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2274.243ms
2025-05-06 03:39:24.368 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - null 0
2025-05-06 03:39:24.641 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:39:24.654 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:39:24.838 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 03:39:24.899 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 244.3552ms
2025-05-06 03:39:24.900 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:39:24.900 +03:00 [INF] HTTP POST /api/Auth/login responded 415 in 486.6655 ms
2025-05-06 03:39:24.903 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 415 null application/problem+json; charset=utf-8 549.9434ms
2025-05-06 03:39:41.401 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - null 0
2025-05-06 03:39:41.410 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:39:41.411 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:39:41.436 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 03:39:41.437 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 26.5698ms
2025-05-06 03:39:41.438 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:39:41.438 +03:00 [INF] HTTP POST /api/Auth/login responded 415 in 35.7614 ms
2025-05-06 03:39:41.438 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 415 null application/problem+json; charset=utf-8 37.1992ms
2025-05-06 03:40:14.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 03:40:14.129 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 03:40:14.137 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:40:14.137 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 34.3088 ms
2025-05-06 03:40:14.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 45.6523ms
2025-05-06 03:40:29.231 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 03:40:29.236 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 03:40:29.238 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 03:40:29.239 +03:00 [INF] HTTP GET /api/Expense/active responded 403 in 5.6283 ms
2025-05-06 03:40:29.239 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7092/api/Expense/active - 403 0 null 8.1592ms
2025-05-06 03:40:37.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 03:40:37.426 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 03:40:37.428 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:40:37.428 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 35.9152 ms
2025-05-06 03:40:37.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 38.9259ms
2025-05-06 03:41:19.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 03:41:19.034 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 03:41:19.034 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:41:19.034 +03:00 [INF] HTTP GET /api/User responded 401 in 6.4484 ms
2025-05-06 03:41:19.034 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 17.5527ms
2025-05-06 03:46:37.291 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 03:46:37.908 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 03:46:37.909 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 03:46:37.912 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 03:46:37.913 +03:00 [INF] Hosting environment: Development
2025-05-06 03:46:37.913 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 03:46:38.500 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 03:46:39.004 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 515.1536ms
2025-05-06 03:46:39.068 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 03:46:39.068 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 03:46:39.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.1886ms
2025-05-06 03:46:39.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.256ms
2025-05-06 03:46:41.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 03:46:41.645 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.4542ms
2025-05-06 03:47:37.094 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 03:47:37.229 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:47:37.267 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 03:47:38.478 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 03:47:39.328 +03:00 [INF] Executed DbCommand (142ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 03:47:39.467 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 985.0441ms.
2025-05-06 03:47:39.475 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 03:47:39.490 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2210.2055ms
2025-05-06 03:47:39.491 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 03:47:39.494 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2380.6072 ms
2025-05-06 03:47:39.503 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2409.2921ms
2025-05-06 03:48:09.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 03:48:09.639 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 03:48:09.644 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:48:09.644 +03:00 [INF] HTTP GET /api/User responded 401 in 13.5674 ms
2025-05-06 03:48:09.644 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 32.9382ms
2025-05-06 03:49:01.626 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 254
2025-05-06 03:49:01.637 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 03:49:01.638 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 03:49:01.638 +03:00 [INF] HTTP POST /api/User responded 401 in 3.9342 ms
2025-05-06 03:49:01.638 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 401 0 null 14.276ms
2025-05-06 11:29:18.484 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 11:29:19.374 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 11:29:19.374 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 11:29:19.377 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 11:29:19.377 +03:00 [INF] Hosting environment: Development
2025-05-06 11:29:19.377 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 11:29:21.982 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 11:29:22.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 803.4492ms
2025-05-06 11:29:22.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 11:29:22.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 11:29:22.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 17.3695ms
2025-05-06 11:29:22.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 148.7136ms
2025-05-06 11:29:24.420 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 11:29:24.626 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.165ms
2025-05-06 11:29:35.134 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 11:29:37.055 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 11:29:37.090 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 11:29:37.100 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 6.3649ms
2025-05-06 11:29:37.102 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 11:29:37.105 +03:00 [ERR] HTTP GET /api/ExpenseCategory responded 500 in 1960.1213 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 11:29:37.134 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:29:37.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 2004.6756ms
2025-05-06 11:30:12.102 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 52
2025-05-06 11:30:12.152 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 11:30:12.201 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 11:30:12.202 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 0.8925ms
2025-05-06 11:30:12.202 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 11:30:12.203 +03:00 [ERR] HTTP POST /api/ExpenseCategory responded 500 in 84.6913 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 11:30:12.204 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:30:12.205 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 103.9509ms
2025-05-06 11:30:20.576 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 11:30:20.586 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 11:30:20.592 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 11:30:20.592 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 15.2307 ms
2025-05-06 11:30:20.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 16.5631ms
2025-05-06 11:30:54.747 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 11:30:54.748 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:30:54.752 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 11:30:56.451 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 11:30:58.130 +03:00 [INF] Executed DbCommand (162ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 11:30:58.318 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1861.6593ms.
2025-05-06 11:30:58.325 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 11:30:58.339 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3586.2465ms
2025-05-06 11:30:58.339 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:30:58.341 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3592.9601 ms
2025-05-06 11:30:58.350 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3603.7668ms
2025-05-06 11:31:56.709 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 11:31:56.723 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 11:31:56.723 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 11:31:56.724 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 2.2297 ms
2025-05-06 11:31:56.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 16.0562ms
2025-05-06 11:52:33.530 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 11:52:34.293 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 11:52:34.294 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 11:52:34.296 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 11:52:34.297 +03:00 [INF] Hosting environment: Development
2025-05-06 11:52:34.297 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 11:52:35.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 11:52:36.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 956.235ms
2025-05-06 11:52:36.067 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 11:52:36.067 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 11:52:36.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.8082ms
2025-05-06 11:52:36.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.1502ms
2025-05-06 11:52:38.432 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 11:52:38.727 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 294.9998ms
2025-05-06 11:53:03.232 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 11:53:03.395 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:53:03.441 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 11:53:04.894 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 11:53:05.859 +03:00 [INF] Executed DbCommand (169ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 11:53:06.010 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1112.2772ms.
2025-05-06 11:53:06.019 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 11:53:06.038 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2589.2058ms
2025-05-06 11:53:06.038 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:53:06.042 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2799.2211 ms
2025-05-06 11:53:06.051 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2819.5384ms
2025-05-06 11:55:04.255 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7092/api/Auth/login - null null
2025-05-06 11:55:04.279 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '58', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 11:55:04.289 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 11:55:04.289 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-05-06 11:55:04.289 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-05-06 11:55:04.289 +03:00 [INF] HTTP GET /api/Auth/login responded 405 in 32.9272 ms
2025-05-06 11:55:04.292 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7092/api/Auth/login - 405 0 null 37.5253ms
2025-05-06 11:55:08.648 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - null 0
2025-05-06 11:55:08.651 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '58', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 11:55:08.652 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 11:55:08.652 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:55:08.652 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 11:55:08.725 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 11:55:08.746 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 93.6691ms
2025-05-06 11:55:08.746 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:55:08.746 +03:00 [INF] HTTP POST /api/Auth/login responded 415 in 97.5501 ms
2025-05-06 11:55:08.747 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 415 null application/problem+json; charset=utf-8 98.5506ms
2025-05-06 11:57:41.654 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - application/json 80
2025-05-06 11:57:41.656 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '58', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 11:57:41.656 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 11:57:41.657 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:57:41.657 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 11:57:41.772 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 11:57:41.792 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 11:57:41.794 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.904ms.
2025-05-06 11:57:41.794 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 11:57:41.795 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 138.2238ms
2025-05-06 11:57:41.795 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 11:57:41.795 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 140.2672 ms
2025-05-06 11:57:41.796 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 142.0167ms
2025-05-06 12:05:14.618 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:05:15.266 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:05:15.266 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:05:15.269 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:05:15.270 +03:00 [INF] Hosting environment: Development
2025-05-06 12:05:15.270 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:05:16.374 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:05:16.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 602.9195ms
2025-05-06 12:05:16.987 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:05:17.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:05:17.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 65.8747ms
2025-05-06 12:05:17.109 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 122.3558ms
2025-05-06 12:05:18.726 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:05:19.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 279.5493ms
2025-05-06 12:05:43.870 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - application/json 77
2025-05-06 12:05:44.037 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '58', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 12:05:44.069 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 12:05:44.074 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 12:05:44.115 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 12:05:45.936 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:05:47.053 +03:00 [INF] Executed DbCommand (162ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 12:05:47.218 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1278.0737ms.
2025-05-06 12:05:47.226 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 12:05:47.249 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3129.5552ms
2025-05-06 12:05:47.249 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 12:05:47.254 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3375.8703 ms
2025-05-06 12:05:47.267 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3397.0944ms
2025-05-06 12:06:16.610 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7092/api/Auth/login - application/json 77
2025-05-06 12:06:16.694 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 12:06:16.694 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 12:06:16.810 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:06:16.825 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 12:06:16.827 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.019ms.
2025-05-06 12:06:16.827 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 12:06:16.828 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 133.3661ms
2025-05-06 12:06:16.828 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 12:06:16.828 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 200.6956 ms
2025-05-06 12:06:16.830 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 219.9138ms
2025-05-06 12:06:47.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 12:06:47.031 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 12:06:47.045 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 12:06:47.045 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 32.0080 ms
2025-05-06 12:06:47.045 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 34.3555ms
2025-05-06 12:08:08.606 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:08:09.040 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:08:09.040 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:08:09.042 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:08:09.043 +03:00 [INF] Hosting environment: Development
2025-05-06 12:08:09.043 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:08:10.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:08:10.533 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 426.9624ms
2025-05-06 12:08:10.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:08:10.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:08:10.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.2333ms
2025-05-06 12:08:10.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.3128ms
2025-05-06 12:08:12.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:08:12.438 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 237.437ms
2025-05-06 12:08:20.956 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 12:08:21.071 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 12:08:21.075 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 12:08:21.077 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 112.9814 ms
2025-05-06 12:08:21.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 122.9522ms
2025-05-06 12:08:36.249 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 12:08:36.283 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:08:36.327 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 12:08:36.335 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 4.174ms
2025-05-06 12:08:36.337 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:08:36.338 +03:00 [ERR] HTTP GET /api/ExpenseCategory responded 500 in 78.9566 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:08:36.360 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:08:36.365 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 115.7019ms
2025-05-06 12:08:46.313 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:08:46.317 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 12:08:46.318 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 12:08:46.318 +03:00 [INF] HTTP GET /api/User responded 401 in 3.5936 ms
2025-05-06 12:08:46.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 5.9699ms
2025-05-06 12:09:20.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:09:20.744 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 12:09:20.745 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 12:09:20.745 +03:00 [INF] HTTP GET /api/User responded 401 in 35.4185 ms
2025-05-06 12:09:20.745 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 41.4469ms
2025-05-06 12:09:33.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 12:09:33.688 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:09:33.689 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 12:09:33.691 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2.0759ms
2025-05-06 12:09:33.692 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:09:33.694 +03:00 [ERR] HTTP GET /api/ExpenseCategory responded 500 in 6.4349 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:09:33.697 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:09:33.700 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 14.7667ms
2025-05-06 12:13:27.883 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:13:28.388 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:13:28.389 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:13:28.393 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:13:28.394 +03:00 [INF] Hosting environment: Development
2025-05-06 12:13:28.394 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:13:38.769 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:13:39.197 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:13:39.197 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:13:39.200 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:13:39.200 +03:00 [INF] Hosting environment: Development
2025-05-06 12:13:39.200 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:13:40.003 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:13:40.427 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 434.9207ms
2025-05-06 12:13:40.452 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:13:40.452 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:13:40.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.7636ms
2025-05-06 12:13:40.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.0207ms
2025-05-06 12:13:42.159 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:13:42.417 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.2628ms
2025-05-06 12:13:50.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 12:13:50.193 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 12:13:50.217 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 12:13:50.224 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 3.5414ms
2025-05-06 12:13:50.225 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 12:13:50.227 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 156.5393 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:13:50.255 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:13:50.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 198.1799ms
2025-05-06 12:13:59.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 12:13:59.189 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:13:59.194 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 12:13:59.195 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 1.0638ms
2025-05-06 12:13:59.196 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:13:59.196 +03:00 [ERR] HTTP GET /api/ExpenseCategory responded 500 in 8.6002 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:13:59.198 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:13:59.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 14.482ms
2025-05-06 12:14:06.538 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 12:14:06.542 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:06.545 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 12:14:06.660 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:14:06.806 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 260.9634ms
2025-05-06 12:14:06.807 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:06.808 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 268.9003 ms
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:14:06.835 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:14:06.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 300.1024ms
2025-05-06 12:14:13.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 12:14:13.364 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:13.371 +03:00 [INF] Route matched with {action = "GetAll", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.PaymentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.PaymentController (Expense_Management_System.WebApi).
2025-05-06 12:14:13.373 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi) in 1.2061ms
2025-05-06 12:14:13.374 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:13.375 +03:00 [ERR] HTTP GET /api/Payment responded 500 in 10.8812 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IPaymentService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.PaymentController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method33(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:14:13.376 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IPaymentService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.PaymentController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method33(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:14:13.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 500 null text/plain; charset=utf-8 17.4832ms
2025-05-06 12:14:19.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:14:19.575 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:19.589 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:14:19.591 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 1.4691ms
2025-05-06 12:14:19.592 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:19.593 +03:00 [ERR] HTTP GET /api/User responded 500 in 19.2335 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method41(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:14:19.596 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method41(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:14:19.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 27.3349ms
2025-05-06 12:14:32.697 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:14:32.698 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:32.698 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:14:32.730 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 32.0202ms
2025-05-06 12:14:32.733 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:14:32.733 +03:00 [ERR] HTTP GET /api/User responded 500 in 35.7289 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method41(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:14:32.735 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method41(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:14:32.736 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 39.1558ms
2025-05-06 12:22:26.873 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:22:27.518 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:22:27.518 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:22:27.521 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:22:27.522 +03:00 [INF] Hosting environment: Development
2025-05-06 12:22:27.522 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:22:28.561 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:22:29.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 657.0896ms
2025-05-06 12:22:29.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:22:29.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:22:29.302 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.4823ms
2025-05-06 12:22:29.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.2194ms
2025-05-06 12:22:30.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:22:31.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 228.6846ms
2025-05-06 12:22:36.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:22:36.683 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:22:36.738 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:22:36.747 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 4.8708ms
2025-05-06 12:22:36.748 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:22:36.752 +03:00 [ERR] HTTP GET /api/User responded 500 in 395.3426 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:22:36.778 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:22:36.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 445.8984ms
2025-05-06 12:23:14.447 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:23:14.960 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:23:14.961 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:23:14.963 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:23:14.963 +03:00 [INF] Hosting environment: Development
2025-05-06 12:23:14.963 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:23:15.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:23:16.464 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 559.2356ms
2025-05-06 12:23:16.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:23:16.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:23:16.521 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.0361ms
2025-05-06 12:23:16.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.9467ms
2025-05-06 12:23:18.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:23:18.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.6458ms
2025-05-06 12:23:26.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:23:26.154 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:23:26.182 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:23:26.189 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 3.8855ms
2025-05-06 12:23:26.190 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:23:26.193 +03:00 [ERR] HTTP GET /api/User responded 500 in 148.1865 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:23:26.214 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IUserService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:23:26.218 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 181.0292ms
2025-05-06 12:25:04.598 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:25:05.084 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:25:05.085 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:25:05.090 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:25:05.091 +03:00 [INF] Hosting environment: Development
2025-05-06 12:25:05.091 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:25:05.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:25:06.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 576.6894ms
2025-05-06 12:25:06.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:25:06.547 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:25:06.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.6331ms
2025-05-06 12:25:06.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.5733ms
2025-05-06 12:25:08.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:25:08.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.8899ms
2025-05-06 12:25:13.990 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:25:14.124 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:25:14.149 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:25:15.419 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:25:21.201 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 12:25:46.424 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 30999.9497ms.
2025-05-06 12:25:46.436 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 12:25:50.915 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 36746.7903ms
2025-05-06 12:25:50.916 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:25:50.920 +03:00 [INF] HTTP GET /api/User responded 200 in 36918.1352 ms
2025-05-06 12:25:50.938 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 36948.6791ms
2025-05-06 12:27:08.559 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 258
2025-05-06 12:27:08.571 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:08.588 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:27:08.785 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:27:08.809 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 220.3934ms
2025-05-06 12:27:08.809 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:08.809 +03:00 [INF] HTTP POST /api/User responded 400 in 239.8284 ms
2025-05-06 12:27:08.810 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 260.2992ms
2025-05-06 12:27:44.209 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 280
2025-05-06 12:27:44.231 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:44.231 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:27:44.252 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:27:44.252 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 20.9068ms
2025-05-06 12:27:44.253 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:44.253 +03:00 [INF] HTTP POST /api/User responded 400 in 37.9732 ms
2025-05-06 12:27:44.253 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 43.5577ms
2025-05-06 12:27:57.632 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 280
2025-05-06 12:27:57.633 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:57.633 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:27:57.636 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:27:57.636 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 2.8852ms
2025-05-06 12:27:57.636 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:27:57.636 +03:00 [INF] HTTP POST /api/User responded 400 in 3.2889 ms
2025-05-06 12:27:57.636 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 4.9979ms
2025-05-06 12:29:17.385 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 277
2025-05-06 12:29:17.398 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:17.399 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:29:17.490 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:29:17.491 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 28.5848ms
2025-05-06 12:29:17.491 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:17.491 +03:00 [INF] HTTP POST /api/User responded 400 in 104.1917 ms
2025-05-06 12:29:17.491 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 107.5086ms
2025-05-06 12:29:30.816 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 282
2025-05-06 12:29:30.817 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:30.817 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:29:30.824 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:29:30.824 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 7.4249ms
2025-05-06 12:29:30.824 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:30.825 +03:00 [INF] HTTP POST /api/User responded 400 in 7.8722 ms
2025-05-06 12:29:30.825 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 8.3532ms
2025-05-06 12:29:40.243 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 285
2025-05-06 12:29:40.244 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:40.244 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:29:40.245 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:29:40.245 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 1.4138ms
2025-05-06 12:29:40.245 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:40.245 +03:00 [INF] HTTP POST /api/User responded 400 in 1.8881 ms
2025-05-06 12:29:40.246 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 2.3805ms
2025-05-06 12:29:55.357 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 283
2025-05-06 12:29:55.357 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:55.357 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:29:55.360 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:29:55.360 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 2.8482ms
2025-05-06 12:29:55.360 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:29:55.361 +03:00 [INF] HTTP POST /api/User responded 400 in 3.3306 ms
2025-05-06 12:29:55.361 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 4.0775ms
2025-05-06 12:30:39.390 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 288
2025-05-06 12:30:39.402 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:30:39.402 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:30:39.412 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:30:39.412 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 9.9388ms
2025-05-06 12:30:39.412 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:30:39.412 +03:00 [INF] HTTP POST /api/User responded 400 in 21.5446 ms
2025-05-06 12:30:39.412 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 24.3133ms
2025-05-06 12:31:26.105 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 291
2025-05-06 12:31:26.108 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:31:26.108 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:31:26.129 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 12:31:26.130 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 21.3082ms
2025-05-06 12:31:26.130 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:31:26.130 +03:00 [INF] HTTP POST /api/User responded 400 in 23.8254 ms
2025-05-06 12:31:26.130 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 26.0533ms
2025-05-06 12:31:49.625 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 277
2025-05-06 12:31:49.627 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:31:49.627 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:31:49.679 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:31:50.079 +03:00 [INF] Executed DbCommand (225ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 12:31:50.260 +03:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (Size = 255), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 250), @p13='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [IsActive], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-06 12:31:50.294 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e194da92-b069-410b-aade-c410e5433715
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e194da92-b069-410b-aade-c410e5433715
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 12:31:50.555 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 928.578ms
2025-05-06 12:31:50.557 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:31:50.558 +03:00 [ERR] HTTP POST /api/User responded 500 in 931.5546 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e194da92-b069-410b-aade-c410e5433715
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.UserController.Create(UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 79
   at lambda_method150(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:31:50.603 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e194da92-b069-410b-aade-c410e5433715
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.UserController.Create(UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 79
   at lambda_method150(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:31:50.618 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 993.7666ms
2025-05-06 12:48:39.629 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 12:48:40.366 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 12:48:40.366 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 12:48:40.369 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 12:48:40.370 +03:00 [INF] Hosting environment: Development
2025-05-06 12:48:40.370 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 12:48:41.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 12:48:42.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1257.1579ms
2025-05-06 12:48:42.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 12:48:42.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 12:48:42.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.8822ms
2025-05-06 12:48:42.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.4303ms
2025-05-06 12:48:44.359 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 12:48:44.610 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 251.8054ms
2025-05-06 12:48:54.843 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 12:48:56.431 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:48:56.472 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:48:58.001 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:48:59.357 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 12:48:59.514 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1507.8559ms.
2025-05-06 12:48:59.524 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 12:48:59.556 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 3080.1291ms
2025-05-06 12:48:59.557 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 12:48:59.560 +03:00 [INF] HTTP GET /api/User responded 200 in 4707.0290 ms
2025-05-06 12:48:59.568 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 4725.4365ms
2025-05-06 12:49:17.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - null null
2025-05-06 12:49:17.615 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 12:49:17.631 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:49:17.796 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:49:18.043 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 12:49:18.047 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 250.8345ms.
2025-05-06 12:49:18.048 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 12:49:18.051 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 419.3197ms
2025-05-06 12:49:18.051 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 12:49:18.051 +03:00 [INF] HTTP GET /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 200 in 437.6735 ms
2025-05-06 12:49:18.053 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 200 null application/json; charset=utf-8 443.5173ms
2025-05-06 12:50:27.765 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 276
2025-05-06 12:50:27.769 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:50:27.774 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 12:50:27.924 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 12:50:27.980 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 12:50:28.223 +03:00 [ERR] Failed executing DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (Size = 255), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 250), @p13='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [IsActive], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-06 12:50:28.264 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9647ae98-2b9f-4d31-988c-e4638bf0aff3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9647ae98-2b9f-4d31-988c-e4638bf0aff3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 12:50:28.614 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 840.2423ms
2025-05-06 12:50:28.615 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 12:50:28.616 +03:00 [ERR] HTTP POST /api/User responded 500 in 848.8455 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9647ae98-2b9f-4d31-988c-e4638bf0aff3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.UserController.Create(UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 79
   at lambda_method161(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 12:50:28.661 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9647ae98-2b9f-4d31-988c-e4638bf0aff3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.UserController.Create(UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 79
   at lambda_method161(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 12:50:28.685 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 500 null text/plain; charset=utf-8 919.5176ms
2025-05-06 13:04:37.700 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:04:38.225 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:04:38.226 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:04:38.230 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:04:38.232 +03:00 [INF] Hosting environment: Development
2025-05-06 13:04:38.232 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:04:39.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:04:39.730 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 437.4607ms
2025-05-06 13:04:39.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:04:39.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:04:39.778 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 13.9984ms
2025-05-06 13:04:39.851 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.042ms
2025-05-06 13:04:41.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:04:41.473 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 227.8078ms
2025-05-06 13:05:46.233 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 286
2025-05-06 13:05:48.139 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:05:48.196 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:05:49.973 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:05:50.011 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 1811.0617ms
2025-05-06 13:05:50.011 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:05:50.016 +03:00 [INF] HTTP POST /api/User responded 400 in 3769.7265 ms
2025-05-06 13:05:50.022 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 3790.9019ms
2025-05-06 13:06:08.346 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 285
2025-05-06 13:06:08.358 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:06:08.359 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:06:08.604 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:06:10.470 +03:00 [INF] Executed DbCommand (231ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:06:10.691 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:06:11.542 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15), @p13='?' (DbType = Guid), @p14='?' (Size = 20), @p15='?' (Size = 34), @p16='?' (DbType = DateTime2), @p17='?' (Size = 250), @p18='?' (DbType = DateTime2), @p19='?' (Size = 250), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [BankAccounts] ([Id], [AccountNumber], [IBAN], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-06 13:06:11.596 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2985.3535ms.
2025-05-06 13:06:11.598 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:06:11.624 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 3264.6949ms
2025-05-06 13:06:11.625 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:06:11.627 +03:00 [INF] HTTP POST /api/User responded 200 in 3271.6099 ms
2025-05-06 13:06:11.631 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 3285.5959ms
2025-05-06 13:07:22.679 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 255
2025-05-06 13:07:22.704 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:07:22.712 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:07:22.738 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:07:22.738 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 26.0392ms
2025-05-06 13:07:22.738 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:07:22.738 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 40.3762 ms
2025-05-06 13:07:22.738 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 58.9932ms
2025-05-06 13:08:04.244 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 287
2025-05-06 13:08:04.277 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:08:04.277 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:08:04.330 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:08:04.402 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:08:04.416 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:08:04.454 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:08:04.482 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:08:04.793 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 516.4667ms
2025-05-06 13:08:04.795 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:08:04.796 +03:00 [ERR] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 500 in 519.7706 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method345(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:08:04.856 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method345(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:08:04.869 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 500 null text/plain; charset=utf-8 625.6302ms
2025-05-06 13:16:26.896 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:16:27.483 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:16:27.483 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:16:27.486 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:16:27.486 +03:00 [INF] Hosting environment: Development
2025-05-06 13:16:27.486 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:16:28.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:16:29.304 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 721.9465ms
2025-05-06 13:16:29.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:16:29.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:16:29.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 22.8702ms
2025-05-06 13:16:29.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.9088ms
2025-05-06 13:16:31.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:16:31.766 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.9674ms
2025-05-06 13:16:40.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 13:16:42.530 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:16:42.562 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:16:44.066 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:16:45.295 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 13:16:45.418 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1346.0669ms.
2025-05-06 13:16:45.426 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:16:45.457 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 2891.9917ms
2025-05-06 13:16:45.458 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:16:45.461 +03:00 [INF] HTTP GET /api/User responded 200 in 4811.1132 ms
2025-05-06 13:16:45.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 4828.4348ms
2025-05-06 13:19:06.224 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 290
2025-05-06 13:19:06.231 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:06.243 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:19:06.391 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:19:06.414 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 170.7201ms
2025-05-06 13:19:06.414 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:06.414 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 184.8725 ms
2025-05-06 13:19:06.415 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 191.0345ms
2025-05-06 13:19:23.849 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 292
2025-05-06 13:19:23.853 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:23.853 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:19:23.880 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:19:23.881 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 27.4005ms
2025-05-06 13:19:23.881 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:23.881 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 30.5657 ms
2025-05-06 13:19:23.881 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 33.096ms
2025-05-06 13:19:55.838 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 293
2025-05-06 13:19:55.865 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:55.865 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:19:55.969 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:19:55.970 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 104.9158ms
2025-05-06 13:19:55.970 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:55.970 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 105.8147 ms
2025-05-06 13:19:55.971 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 133.422ms
2025-05-06 13:19:58.939 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 293
2025-05-06 13:19:58.939 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:58.939 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:19:58.943 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:19:58.943 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 4.0132ms
2025-05-06 13:19:58.944 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:19:58.944 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 4.4318 ms
2025-05-06 13:19:58.944 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 5.0423ms
2025-05-06 13:20:10.879 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 294
2025-05-06 13:20:10.880 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:10.880 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:20:10.884 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:20:10.884 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 4.2275ms
2025-05-06 13:20:10.884 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:10.884 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 4.6888 ms
2025-05-06 13:20:10.885 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 6.0179ms
2025-05-06 13:20:25.411 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 296
2025-05-06 13:20:25.412 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:25.412 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:20:25.414 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:20:25.415 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 2.5474ms
2025-05-06 13:20:25.415 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:25.415 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 3.1040 ms
2025-05-06 13:20:25.415 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 4.1616ms
2025-05-06 13:20:48.790 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 319
2025-05-06 13:20:48.791 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:48.792 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:20:48.848 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:20:48.848 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 55.5576ms
2025-05-06 13:20:48.848 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:20:48.848 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 58.1044 ms
2025-05-06 13:20:48.848 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 59.7759ms
2025-05-06 13:21:10.612 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 321
2025-05-06 13:21:10.612 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:10.612 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:21:10.615 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:21:10.615 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 2.9942ms
2025-05-06 13:21:10.616 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:10.616 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 3.3518 ms
2025-05-06 13:21:10.616 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 4.766ms
2025-05-06 13:21:18.114 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 321
2025-05-06 13:21:18.114 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:18.114 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:21:18.118 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:21:18.119 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 4.4147ms
2025-05-06 13:21:18.119 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:18.119 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 4.9200 ms
2025-05-06 13:21:18.119 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 6.092ms
2025-05-06 13:21:20.169 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 320
2025-05-06 13:21:20.169 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:20.169 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:21:20.171 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:21:20.171 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 1.8501ms
2025-05-06 13:21:20.171 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:21:20.171 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 400 in 2.1720 ms
2025-05-06 13:21:20.171 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 400 null application/problem+json; charset=utf-8 2.4826ms
2025-05-06 13:22:54.680 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 288
2025-05-06 13:22:54.684 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:22:54.710 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:22:54.714 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:22:54.715 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 4.8004ms
2025-05-06 13:22:54.715 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:22:54.715 +03:00 [INF] HTTP POST /api/User responded 400 in 31.0763 ms
2025-05-06 13:22:54.715 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 400 null application/problem+json; charset=utf-8 35.3196ms
2025-05-06 13:23:12.008 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 288
2025-05-06 13:23:12.009 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:23:12.009 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:23:12.042 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:23:12.336 +03:00 [INF] Executed DbCommand (125ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:23:12.477 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:23:13.181 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15), @p13='?' (DbType = Guid), @p14='?' (Size = 20), @p15='?' (Size = 34), @p16='?' (DbType = DateTime2), @p17='?' (Size = 250), @p18='?' (DbType = DateTime2), @p19='?' (Size = 250), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [BankAccounts] ([Id], [AccountNumber], [IBAN], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-06 13:23:13.241 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1198.8369ms.
2025-05-06 13:23:13.242 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:23:13.244 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 1234.9653ms
2025-05-06 13:23:13.244 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:23:13.244 +03:00 [INF] HTTP POST /api/User responded 200 in 1235.3339 ms
2025-05-06 13:23:13.244 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 1236.5028ms
2025-05-06 13:23:37.857 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - application/json 287
2025-05-06 13:23:37.858 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:23:37.858 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:23:37.941 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:23:38.037 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:23:38.056 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:23:38.077 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FirstName] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 13:23:38.098 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:23:38.410 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 552.1855ms
2025-05-06 13:23:38.411 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:23:38.413 +03:00 [ERR] HTTP PUT /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 500 in 555.9880 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method150(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:23:38.468 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method150(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:23:38.481 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 500 null text/plain; charset=utf-8 627.2166ms
2025-05-06 13:24:14.247 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - application/json 286
2025-05-06 13:24:14.248 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:24:14.248 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:24:14.309 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:24:14.319 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:24:14.323 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:24:14.335 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastName] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 13:24:14.344 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 34.5948ms.
2025-05-06 13:24:14.344 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:24:14.345 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 96.3536ms
2025-05-06 13:24:14.345 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:24:14.346 +03:00 [INF] HTTP PUT /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 200 in 98.0530 ms
2025-05-06 13:24:14.347 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 200 null application/json; charset=utf-8 100.5716ms
2025-05-06 13:24:47.909 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - null null
2025-05-06 13:24:47.916 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:24:47.980 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:24:48.051 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:24:48.056 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:24:48.063 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:24:48.064 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [IsActive] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 13:24:48.358 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 378.3472ms
2025-05-06 13:24:48.359 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:24:48.359 +03:00 [ERR] HTTP DELETE /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 500 in 450.1061 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method367(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:24:48.362 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method367(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:24:48.366 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 500 null text/plain; charset=utf-8 459.0889ms
2025-05-06 13:27:04.731 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:27:05.302 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:27:05.303 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:27:05.306 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:27:05.306 +03:00 [INF] Hosting environment: Development
2025-05-06 13:27:05.306 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:27:06.707 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:27:07.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 556.0919ms
2025-05-06 13:27:07.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:27:07.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:27:07.280 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.8691ms
2025-05-06 13:27:07.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.1794ms
2025-05-06 13:27:09.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:27:09.369 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.6089ms
2025-05-06 13:27:54.790 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - null null
2025-05-06 13:27:54.946 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:27:54.986 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:27:56.354 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:27:57.275 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:27:57.526 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:27:57.559 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1200.4728ms.
2025-05-06 13:27:57.568 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:27:57.579 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 2589.9506ms
2025-05-06 13:27:57.580 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:27:57.583 +03:00 [INF] HTTP DELETE /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 200 in 2761.1034 ms
2025-05-06 13:27:57.591 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 200 null application/json; charset=utf-8 2802.0682ms
2025-05-06 13:28:24.462 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - null null
2025-05-06 13:28:24.467 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:28:24.467 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:28:24.576 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:28:24.591 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:28:24.600 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:28:24.882 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 413.9355ms
2025-05-06 13:28:24.883 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:28:24.884 +03:00 [ERR] HTTP DELETE /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 500 in 418.3932 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:28:24.925 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:28:24.945 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 500 null text/plain; charset=utf-8 483.0351ms
2025-05-06 13:28:39.451 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:28:39.455 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:28:39.455 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:28:39.533 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:28:39.539 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:28:39.550 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:28:39.564 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 30.8848ms.
2025-05-06 13:28:39.565 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:28:39.565 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 109.7725ms
2025-05-06 13:28:39.565 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:28:39.565 +03:00 [INF] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 113.0874 ms
2025-05-06 13:28:39.566 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 114.8914ms
2025-05-06 13:29:06.319 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - null null
2025-05-06 13:29:06.332 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:29:06.345 +03:00 [INF] Route matched with {action = "GetByEmail", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetByEmail(System.String) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:29:06.374 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:29:06.396 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:29:06.408 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 33.4723ms.
2025-05-06 13:29:06.408 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:29:06.428 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) in 82.9463ms
2025-05-06 13:29:06.428 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:29:06.428 +03:00 [INF] HTTP GET /api/User/email/basak@gmail.com responded 200 in 96.2083 ms
2025-05-06 13:29:06.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - 200 null application/json; charset=utf-8 109.8124ms
2025-05-06 13:32:00.943 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/1 - null null
2025-05-06 13:32:00.947 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:00.972 +03:00 [INF] Route matched with {action = "GetByRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetByRole(Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:32:01.009 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:32:01.041 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__role_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Role] = @__role_0
2025-05-06 13:32:01.068 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 58.501ms.
2025-05-06 13:32:01.069 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:32:01.072 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) in 99.6755ms
2025-05-06 13:32:01.072 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:01.072 +03:00 [INF] HTTP GET /api/User/role/1 responded 200 in 128.2741 ms
2025-05-06 13:32:01.073 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/1 - 200 null application/json; charset=utf-8 130.5006ms
2025-05-06 13:32:22.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/2 - null null
2025-05-06 13:32:22.883 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:22.883 +03:00 [INF] Route matched with {action = "GetByRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetByRole(Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:32:22.933 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:32:22.939 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Role] = @__role_0
2025-05-06 13:32:22.940 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.6277ms.
2025-05-06 13:32:22.940 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:32:22.940 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) in 56.8178ms
2025-05-06 13:32:22.940 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:22.940 +03:00 [INF] HTTP GET /api/User/role/2 responded 200 in 57.2412 ms
2025-05-06 13:32:22.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/2 - 200 null application/json; charset=utf-8 61.3326ms
2025-05-06 13:32:43.778 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - application/json 1
2025-05-06 13:32:43.780 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:43.787 +03:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] ChangeRole(System.Guid, Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:32:43.843 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:32:43.852 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:32:43.895 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:32:43.897 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 53.372ms.
2025-05-06 13:32:43.897 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:32:43.897 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) in 110.0457ms
2025-05-06 13:32:43.897 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:32:43.897 +03:00 [INF] HTTP PUT /api/User/role/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 117.7808 ms
2025-05-06 13:32:43.897 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 119.1133ms
2025-05-06 13:33:39.996 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 13:33:40.000 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:33:40.019 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:33:40.055 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:33:40.144 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 13:33:40.155 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 100.3885ms.
2025-05-06 13:33:40.156 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:33:40.169 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 150.0995ms
2025-05-06 13:33:40.169 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:33:40.169 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 169.6327 ms
2025-05-06 13:33:40.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 174.654ms
2025-05-06 13:35:44.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 13:35:44.508 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:35:44.577 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:35:44.584 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 6.54ms
2025-05-06 13:35:44.584 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:35:44.585 +03:00 [ERR] HTTP GET /api/ExpenseCategory responded 500 in 82.1183 ms
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method287(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:35:44.587 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Expense_Management_System.Application.Interfaces.Services.IExpenseCategoryService' while attempting to activate 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method287(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:35:44.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 89.5567ms
2025-05-06 13:37:59.340 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:37:59.822 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:37:59.822 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:37:59.824 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:37:59.825 +03:00 [INF] Hosting environment: Development
2025-05-06 13:37:59.825 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:38:00.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:38:01.277 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 645.6044ms
2025-05-06 13:38:01.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:38:01.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:38:01.457 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.873ms
2025-05-06 13:38:01.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.3531ms
2025-05-06 13:38:03.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:38:03.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 252.9654ms
2025-05-06 13:38:17.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 13:38:17.723 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:38:17.757 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:38:18.999 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:38:19.893 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 13:38:20.031 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1027.8171ms.
2025-05-06 13:38:20.039 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:38:20.071 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 2310.2251ms
2025-05-06 13:38:20.072 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:38:20.077 +03:00 [INF] HTTP GET /api/User responded 200 in 2461.5466 ms
2025-05-06 13:38:20.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 2479.8129ms
2025-05-06 13:39:28.417 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 283
2025-05-06 13:39:28.424 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:39:28.434 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:39:28.657 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:39:28.879 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:39:28.884 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 226.8624ms.
2025-05-06 13:39:28.886 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:39:28.890 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 455.2444ms
2025-05-06 13:39:28.890 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:39:28.890 +03:00 [INF] HTTP POST /api/User responded 200 in 469.0472 ms
2025-05-06 13:39:28.891 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 473.6563ms
2025-05-06 13:39:56.444 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 283
2025-05-06 13:39:56.448 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:39:56.448 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:39:56.494 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:39:56.506 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:39:56.506 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.3816ms.
2025-05-06 13:39:56.506 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:39:56.506 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 58.1324ms
2025-05-06 13:39:56.506 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:39:56.507 +03:00 [INF] HTTP POST /api/User responded 200 in 61.5981 ms
2025-05-06 13:39:56.507 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 63.2096ms
2025-05-06 13:40:13.300 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 283
2025-05-06 13:40:13.301 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:40:13.301 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:40:13.335 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:40:13.340 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:40:13.375 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:40:14.092 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15), @p13='?' (DbType = Guid), @p14='?' (Size = 20), @p15='?' (Size = 34), @p16='?' (DbType = DateTime2), @p17='?' (Size = 250), @p18='?' (DbType = DateTime2), @p19='?' (Size = 250), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [BankAccounts] ([Id], [AccountNumber], [IBAN], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-06 13:40:14.133 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 798.3017ms.
2025-05-06 13:40:14.133 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:40:14.134 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 832.6939ms
2025-05-06 13:40:14.134 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:40:14.134 +03:00 [INF] HTTP POST /api/User responded 200 in 833.4035 ms
2025-05-06 13:40:14.134 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 835.0089ms
2025-05-06 13:41:43.542 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - application/json 283
2025-05-06 13:41:43.559 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:41:43.573 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:41:43.610 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:41:43.721 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:41:43.725 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:41:43.749 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-06 13:41:44.077 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 503.9495ms
2025-05-06 13:41:44.078 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:41:44.080 +03:00 [ERR] HTTP PUT /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 responded 500 in 521.1319 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method356(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:41:44.147 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method356(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:41:44.158 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - 500 null text/plain; charset=utf-8 616.786ms
2025-05-06 13:41:52.859 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - application/json 283
2025-05-06 13:41:52.882 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:41:52.883 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:41:52.924 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:41:52.935 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:41:52.939 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:41:52.947 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0, [WorkPhoneNumber] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 13:41:52.956 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.1397ms.
2025-05-06 13:41:52.956 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:41:52.956 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 73.6562ms
2025-05-06 13:41:52.957 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 13:41:52.957 +03:00 [INF] HTTP PUT /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 responded 200 in 76.8915 ms
2025-05-06 13:41:52.957 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - 200 null application/json; charset=utf-8 98.651ms
2025-05-06 13:43:31.559 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - null null
2025-05-06 13:43:31.564 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 13:43:31.583 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:43:31.611 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:43:31.618 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:43:31.619 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7.953ms.
2025-05-06 13:43:31.619 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:43:31.620 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 36.2504ms
2025-05-06 13:43:31.620 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 13:43:31.620 +03:00 [INF] HTTP GET /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 responded 200 in 56.2304 ms
2025-05-06 13:43:31.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - 200 null application/json; charset=utf-8 61.9603ms
2025-05-06 13:43:35.366 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec71 - null null
2025-05-06 13:43:35.367 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 13:43:35.367 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:43:35.437 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:43:35.442 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:43:35.593 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 226.5921ms
2025-05-06 13:43:35.594 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 13:43:35.595 +03:00 [ERR] HTTP GET /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec71 responded 500 in 228.1652 ms
System.Exception: Entity with id 48c0bfd5-d43a-4603-bdc3-4b28f3d2ec71 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 41
   at lambda_method367(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:43:35.597 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 48c0bfd5-d43a-4603-bdc3-4b28f3d2ec71 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 41
   at lambda_method367(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:43:35.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec71 - 500 null text/plain; charset=utf-8 233.7622ms
2025-05-06 13:46:36.132 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - null null
2025-05-06 13:46:36.147 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:46:36.156 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:46:36.182 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:46:36.195 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:46:36.215 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:46:36.230 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:46:36.485 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 328.9093ms
2025-05-06 13:46:36.486 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:46:36.487 +03:00 [ERR] HTTP DELETE /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 500 in 352.3593 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:46:36.490 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:46:36.498 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 500 null text/plain; charset=utf-8 364.7969ms
2025-05-06 13:47:16.145 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:47:16.147 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:16.155 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:47:16.202 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:47:16.209 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:47:16.216 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:47:16.224 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:47:16.523 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 367.8516ms
2025-05-06 13:47:16.524 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:16.525 +03:00 [ERR] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 500 in 378.3770 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:47:16.529 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:47:16.535 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 500 null text/plain; charset=utf-8 399.9295ms
2025-05-06 13:47:21.008 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:47:21.008 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:21.009 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:47:21.031 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:47:21.036 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:47:21.040 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:47:21.070 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:47:21.260 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 251.5206ms
2025-05-06 13:47:21.261 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:21.262 +03:00 [ERR] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 500 in 253.2824 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:47:21.264 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:47:21.268 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 500 null text/plain; charset=utf-8 260.671ms
2025-05-06 13:47:29.283 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:47:29.284 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:29.285 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:47:29.343 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:47:29.355 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:47:29.360 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:47:29.394 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:47:29.579 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 287.064ms
2025-05-06 13:47:29.579 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:47:29.580 +03:00 [ERR] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 500 in 295.9886 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:47:29.582 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method375(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:47:29.587 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 500 null text/plain; charset=utf-8 304.5993ms
2025-05-06 13:48:12.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - null null
2025-05-06 13:48:12.130 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:48:12.143 +03:00 [INF] Route matched with {action = "GetByEmail", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetByEmail(System.String) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:48:12.176 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:48:12.188 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:48:12.190 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.9356ms.
2025-05-06 13:48:12.190 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:48:12.191 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) in 47.2883ms
2025-05-06 13:48:12.191 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:48:12.191 +03:00 [INF] HTTP GET /api/User/email/basak@gmail.com responded 200 in 71.2142 ms
2025-05-06 13:48:12.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - 200 null application/json; charset=utf-8 78.9702ms
2025-05-06 13:48:15.710 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/email/basakk@gmail.com - null null
2025-05-06 13:48:15.710 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:48:15.710 +03:00 [INF] Route matched with {action = "GetByEmail", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetByEmail(System.String) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:48:15.739 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:48:15.742 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 13:48:15.745 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.9013ms.
2025-05-06 13:48:15.745 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:48:15.746 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) in 35.559ms
2025-05-06 13:48:15.746 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 13:48:15.746 +03:00 [INF] HTTP GET /api/User/email/basakk@gmail.com responded 200 in 36.0871 ms
2025-05-06 13:48:15.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/email/basakk@gmail.com - 200 null application/json; charset=utf-8 37.2531ms
2025-05-06 13:48:25.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/1 - null null
2025-05-06 13:48:25.562 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:48:25.566 +03:00 [INF] Route matched with {action = "GetByRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetByRole(Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:48:25.603 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:48:25.626 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Role] = @__role_0
2025-05-06 13:48:25.627 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.9712ms.
2025-05-06 13:48:25.627 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:48:25.627 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) in 60.4744ms
2025-05-06 13:48:25.627 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:48:25.627 +03:00 [INF] HTTP GET /api/User/role/1 responded 200 in 64.9874 ms
2025-05-06 13:48:25.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/1 - 200 null application/json; charset=utf-8 65.6684ms
2025-05-06 13:48:34.413 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/2 - null null
2025-05-06 13:48:34.413 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:48:34.413 +03:00 [INF] Route matched with {action = "GetByRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetByRole(Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:48:34.500 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:48:34.506 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__role_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Role] = @__role_0
2025-05-06 13:48:34.507 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.5829ms.
2025-05-06 13:48:34.507 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:48:34.507 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) in 93.438ms
2025-05-06 13:48:34.507 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 13:48:34.507 +03:00 [INF] HTTP GET /api/User/role/2 responded 200 in 94.2648 ms
2025-05-06 13:48:34.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/2 - 200 null application/json; charset=utf-8 95.0982ms
2025-05-06 13:49:24.638 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - application/json 1
2025-05-06 13:49:24.640 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:49:24.703 +03:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] ChangeRole(System.Guid, Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:49:24.743 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:49:24.749 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:49:24.805 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:49:24.806 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.0151ms.
2025-05-06 13:49:24.806 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:49:24.807 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) in 104.2439ms
2025-05-06 13:49:24.807 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:49:24.807 +03:00 [INF] HTTP PUT /api/User/role/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 167.0319 ms
2025-05-06 13:49:24.807 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 169.4849ms
2025-05-06 13:49:36.589 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - application/json 1
2025-05-06 13:49:36.589 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:49:36.589 +03:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] ChangeRole(System.Guid, Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:49:36.619 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:49:36.625 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:49:36.631 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:49:36.632 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.2469ms.
2025-05-06 13:49:36.632 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:49:36.632 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) in 43.3815ms
2025-05-06 13:49:36.632 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 13:49:36.633 +03:00 [INF] HTTP PUT /api/User/role/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 43.7646 ms
2025-05-06 13:49:36.633 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 44.8158ms
2025-05-06 13:49:58.405 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 13:49:58.407 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:49:58.425 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:49:58.447 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:49:58.526 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 13:49:58.536 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 88.8804ms.
2025-05-06 13:49:58.536 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:49:58.555 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 130.7324ms
2025-05-06 13:49:58.556 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:49:58.556 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 148.6776 ms
2025-05-06 13:49:58.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 150.8614ms
2025-05-06 13:50:08.333 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 13:50:08.334 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:50:08.334 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:50:08.382 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:50:08.385 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 13:50:08.389 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7.4585ms.
2025-05-06 13:50:08.389 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:50:08.389 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 55.7596ms
2025-05-06 13:50:08.390 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 13:50:08.399 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 65.3759 ms
2025-05-06 13:50:08.399 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 65.8828ms
2025-05-06 13:50:54.795 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:50:55.314 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:50:55.314 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:50:55.317 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:50:55.317 +03:00 [INF] Hosting environment: Development
2025-05-06 13:50:55.317 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:50:56.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:50:56.739 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 497.2954ms
2025-05-06 13:50:56.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:50:56.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:50:56.771 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 13.6732ms
2025-05-06 13:50:56.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.7432ms
2025-05-06 13:50:58.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:50:58.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 224.6133ms
2025-05-06 13:51:06.918 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:51:07.061 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:07.093 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:51:08.476 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:51:09.227 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:51:09.464 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:51:09.495 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1015.0805ms.
2025-05-06 13:51:09.505 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:51:09.516 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 2418.7156ms
2025-05-06 13:51:09.516 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:09.520 +03:00 [INF] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 2591.6328 ms
2025-05-06 13:51:09.531 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 2614.7921ms
2025-05-06 13:51:32.920 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:51:32.926 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:32.928 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:51:33.039 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:51:33.053 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:51:33.061 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:51:33.067 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.297ms.
2025-05-06 13:51:33.067 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:51:33.068 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 139.6054ms
2025-05-06 13:51:33.068 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:33.068 +03:00 [INF] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 144.0008 ms
2025-05-06 13:51:33.070 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 149.7334ms
2025-05-06 13:51:42.843 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 13:51:42.847 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:42.847 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:51:42.899 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:51:42.906 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:51:42.911 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:51:42.917 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.9504ms.
2025-05-06 13:51:42.917 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 13:51:42.917 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 69.9686ms
2025-05-06 13:51:42.918 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:42.918 +03:00 [INF] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 73.7772 ms
2025-05-06 13:51:42.918 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 75.5543ms
2025-05-06 13:51:57.556 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - null null
2025-05-06 13:51:57.557 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:57.557 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 13:51:57.650 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:51:57.658 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 13:51:57.665 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 13:51:57.682 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 13:51:57.974 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 416.834ms
2025-05-06 13:51:57.975 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 13:51:57.976 +03:00 [ERR] HTTP DELETE /api/User/36ca1936-767b-492f-9d71-d19475eab931 responded 500 in 419.3539 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 13:51:58.002 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 121
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 13:51:58.010 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/36ca1936-767b-492f-9d71-d19475eab931 - 500 null text/plain; charset=utf-8 456.4658ms
2025-05-06 13:52:36.654 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:52:37.127 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:52:37.128 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:52:37.130 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:52:37.130 +03:00 [INF] Hosting environment: Development
2025-05-06 13:52:37.130 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:52:38.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:52:39.110 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:52:39.110 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:52:39.116 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 660.8386ms
2025-05-06 13:52:39.120 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.7175ms
2025-05-06 13:52:39.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.5358ms
2025-05-06 13:52:40.667 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:52:40.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.3366ms
2025-05-06 13:52:50.319 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 13:52:50.441 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:52:50.464 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:52:51.657 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:52:52.288 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 13:52:52.340 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 678.4514ms.
2025-05-06 13:52:52.349 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:52:52.370 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 1901.8642ms
2025-05-06 13:52:52.371 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:52:52.374 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2045.4615 ms
2025-05-06 13:52:52.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2063.3315ms
2025-05-06 13:53:29.536 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 46
2025-05-06 13:53:29.541 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:53:29.552 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:53:29.737 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:53:29.760 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 207.269ms
2025-05-06 13:53:29.760 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:53:29.760 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 400 in 220.2706 ms
2025-05-06 13:53:29.761 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 400 null application/problem+json; charset=utf-8 224.2724ms
2025-05-06 13:54:12.930 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 37
2025-05-06 13:54:12.940 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:54:12.940 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:54:12.965 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 13:54:12.965 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 24.9874ms
2025-05-06 13:54:12.966 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:54:12.966 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 400 in 34.1551 ms
2025-05-06 13:54:12.966 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 400 null application/problem+json; charset=utf-8 43.3581ms
2025-05-06 13:54:53.266 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:54:53.700 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:54:53.700 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:54:53.703 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:54:53.703 +03:00 [INF] Hosting environment: Development
2025-05-06 13:54:53.703 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:54:54.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:54:54.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:54:54.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 464.6819ms
2025-05-06 13:54:54.760 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 17.6796ms
2025-05-06 13:54:54.763 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:54:54.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.211ms
2025-05-06 13:54:56.459 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:54:56.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.2048ms
2025-05-06 13:55:00.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 13:55:00.891 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:55:00.936 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:55:02.171 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:55:02.906 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 13:55:02.983 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 801.8939ms.
2025-05-06 13:55:02.998 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:55:03.031 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2089.3174ms
2025-05-06 13:55:03.032 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:55:03.036 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2293.0129 ms
2025-05-06 13:55:03.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2328.9573ms
2025-05-06 13:55:15.343 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 43
2025-05-06 13:55:15.348 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:55:15.365 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:55:15.607 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:55:15.864 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:55:15.873 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 264.9926ms.
2025-05-06 13:55:15.873 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:55:15.875 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 509.084ms
2025-05-06 13:55:15.875 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:55:15.875 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 528.5926 ms
2025-05-06 13:55:15.875 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 532.757ms
2025-05-06 13:55:29.728 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 47
2025-05-06 13:55:29.731 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:55:29.731 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:55:29.844 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:55:29.858 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 13:55:29.858 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.6911ms.
2025-05-06 13:55:29.858 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 13:55:29.859 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 126.8719ms
2025-05-06 13:55:29.859 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 13:55:29.859 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 129.6942 ms
2025-05-06 13:55:29.859 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 131.4957ms
2025-05-06 13:59:35.500 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 13:59:36.012 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 13:59:36.013 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 13:59:36.016 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 13:59:36.016 +03:00 [INF] Hosting environment: Development
2025-05-06 13:59:36.016 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 13:59:36.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 13:59:37.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 559.9737ms
2025-05-06 13:59:37.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 13:59:37.182 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 13:59:37.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.9372ms
2025-05-06 13:59:37.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.232ms
2025-05-06 13:59:38.836 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 13:59:39.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.8962ms
2025-05-06 13:59:51.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 13:59:52.146 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:59:52.180 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 13:59:53.461 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 13:59:54.125 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 13:59:54.172 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 706.82ms.
2025-05-06 13:59:54.180 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 13:59:54.201 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2016.1488ms
2025-05-06 13:59:54.201 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 13:59:54.204 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2211.6769 ms
2025-05-06 13:59:54.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2233.7853ms
2025-05-06 13:59:59.988 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 13:59:59.994 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:00:00.037 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:00:00.275 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:00:15.002 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:00:45.994 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 45714.4142ms.
2025-05-06 14:00:46.004 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:00:49.845 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 49807.9217ms
2025-05-06 14:00:49.845 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:00:49.845 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 49854.5385 ms
2025-05-06 14:00:49.846 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 49858.9806ms
2025-05-06 14:01:34.959 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:01:35.390 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:01:35.390 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:01:35.392 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:01:35.393 +03:00 [INF] Hosting environment: Development
2025-05-06 14:01:35.393 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:01:36.075 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:01:36.518 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 460.6158ms
2025-05-06 14:01:36.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:01:36.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:01:36.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.8106ms
2025-05-06 14:01:36.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.9857ms
2025-05-06 14:01:37.957 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:01:38.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.4129ms
2025-05-06 14:01:42.821 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 14:01:42.979 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:01:43.019 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:01:44.507 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:01:48.550 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:01:54.170 +03:00 [ERR] Failed executing DbCommand (77ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 250), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseCategories] ([Id], [Description], [InsertedDate], [InsertedUser], [IsActive], [Name], [UpdatedDate], [UpdatedUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-06 14:01:54.202 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseCategories'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78775b76-d26d-46f0-94b0-6d1dc126c7e3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseCategories'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78775b76-d26d-46f0-94b0-6d1dc126c7e3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 14:01:54.540 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 11518.0227ms
2025-05-06 14:01:54.542 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:01:54.547 +03:00 [ERR] HTTP POST /api/ExpenseCategory responded 500 in 11714.7828 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseCategories'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78775b76-d26d-46f0-94b0-6d1dc126c7e3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create(ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 54
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:01:54.602 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseCategories'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78775b76-d26d-46f0-94b0-6d1dc126c7e3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create(ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 54
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:01:54.959 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 500 null text/plain; charset=utf-8 12137.3976ms
2025-05-06 14:04:51.169 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:04:51.875 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:04:51.876 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:04:51.879 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:04:51.880 +03:00 [INF] Hosting environment: Development
2025-05-06 14:04:51.880 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:04:52.622 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:04:53.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1136.4823ms
2025-05-06 14:04:53.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:04:53.762 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:04:53.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.301ms
2025-05-06 14:04:53.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.9022ms
2025-05-06 14:04:55.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:04:55.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 274.891ms
2025-05-06 14:05:01.162 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 14:05:01.380 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:05:01.455 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:05:03.168 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:05:04.075 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:05:04.425 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 250), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseCategories] ([Id], [Description], [InsertedDate], [InsertedUser], [Name], [UpdatedDate], [UpdatedUser])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-06 14:05:04.503 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1329.2129ms.
2025-05-06 14:05:04.513 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:05:04.553 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 3091.9979ms
2025-05-06 14:05:04.554 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:05:04.558 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 3371.6660 ms
2025-05-06 14:05:04.572 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 3410.4567ms
2025-05-06 14:05:16.466 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 14:05:16.471 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:05:16.477 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:05:16.608 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:05:16.628 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:05:16.629 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.8118ms.
2025-05-06 14:05:16.629 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:05:16.630 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 152.4128ms
2025-05-06 14:05:16.630 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:05:16.630 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 160.8504 ms
2025-05-06 14:05:16.631 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 164.5032ms
2025-05-06 14:05:33.166 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 14:05:33.170 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:05:33.176 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:05:33.225 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:05:33.285 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 14:05:33.310 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 84.8531ms.
2025-05-06 14:05:33.310 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 14:05:33.312 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 136.0402ms
2025-05-06 14:05:33.312 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:05:33.312 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 144.5380 ms
2025-05-06 14:05:33.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 146.5005ms
2025-05-06 14:05:52.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 14:05:52.839 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 14:05:52.855 +03:00 [INF] Route matched with {action = "GetById", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:05:52.966 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:05:53.018 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:05:53.020 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 53.0819ms.
2025-05-06 14:05:53.020 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:05:53.020 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) in 164.723ms
2025-05-06 14:05:53.020 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 14:05:53.021 +03:00 [INF] HTTP GET /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 182.1408 ms
2025-05-06 14:05:53.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 185.7251ms
2025-05-06 14:06:09.023 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 46
2025-05-06 14:06:09.023 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:09.027 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:06:09.073 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:06:09.083 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:06:09.087 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:06:09.123 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 14:06:09.152 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 14:06:09.533 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 505.8607ms
2025-05-06 14:06:09.534 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:09.535 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 512.0997 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method178(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:06:09.571 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method178(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:06:09.582 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 559.0909ms
2025-05-06 14:06:15.759 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 14:06:15.760 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:15.760 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:06:15.847 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:06:15.857 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:06:15.860 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:06:15.861 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.1261ms.
2025-05-06 14:06:15.861 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:06:15.861 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 101.1879ms
2025-05-06 14:06:15.861 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:15.861 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 101.6246 ms
2025-05-06 14:06:15.862 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 103.7546ms
2025-05-06 14:06:36.725 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 47
2025-05-06 14:06:36.726 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:36.726 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:06:36.758 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:06:36.764 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:06:36.768 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:06:36.777 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 14:06:36.783 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 25.0847ms.
2025-05-06 14:06:36.783 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:06:36.783 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 57.0089ms
2025-05-06 14:06:36.783 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:06:36.783 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 57.6410 ms
2025-05-06 14:06:36.784 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 59.091ms
2025-05-06 14:11:35.730 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 14:11:35.769 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 14:11:35.780 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-06 14:12:15.289 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 14:12:15.337 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 14:12:15.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 14:12:15.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 14:12:15.357 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-06 14:12:15.371 +03:00 [INF] Applying migration '20250506111104_updateExpenseCategory'.
2025-05-06 14:12:15.415 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506111104_updateExpenseCategory', N'8.0.0');
2025-05-06 14:12:15.420 +03:00 [INF] Applying migration '20250506111205_updateExpenseCategories'.
2025-05-06 14:12:15.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506111205_updateExpenseCategories', N'8.0.0');
2025-05-06 14:13:14.588 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:13:15.121 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:13:15.122 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:13:15.125 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:13:15.125 +03:00 [INF] Hosting environment: Development
2025-05-06 14:13:15.125 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:13:16.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:13:16.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 801.6644ms
2025-05-06 14:13:16.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:13:16.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:13:16.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.1567ms
2025-05-06 14:13:16.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 179.2316ms
2025-05-06 14:13:18.481 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:13:18.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 327.3711ms
2025-05-06 14:13:45.422 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 43
2025-05-06 14:13:45.599 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:13:45.637 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:13:47.161 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:13:48.166 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:13:48.323 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:13:48.473 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 14:13:48.513 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1347.496ms.
2025-05-06 14:13:48.522 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:13:48.551 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2911.0584ms
2025-05-06 14:13:48.552 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:13:48.555 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 3099.3828 ms
2025-05-06 14:13:48.566 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 3143.7277ms
2025-05-06 14:14:00.123 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 50
2025-05-06 14:14:00.128 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:14:00.129 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:14:00.240 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:14:00.250 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:14:00.255 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:14:00.256 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.9355ms.
2025-05-06 14:14:00.256 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:14:00.257 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 127.5183ms
2025-05-06 14:14:00.257 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:14:00.257 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 130.6156 ms
2025-05-06 14:14:00.257 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 134.1654ms
2025-05-06 14:15:01.941 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 - application/json 50
2025-05-06 14:15:01.982 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:15:01.983 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:15:02.035 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:15:02.041 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:15:02.214 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 231.0043ms
2025-05-06 14:15:02.215 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:15:02.216 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 responded 500 in 247.1007 ms
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b39 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:15:02.267 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b39 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:15:02.274 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 - 500 null text/plain; charset=utf-8 332.9332ms
2025-05-06 14:15:53.970 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 - application/json 50
2025-05-06 14:15:53.992 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:15:53.992 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:15:54.063 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:15:54.069 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:15:54.178 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 185.8865ms
2025-05-06 14:15:54.179 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:15:54.180 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 responded 500 in 188.1386 ms
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b39 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:15:54.182 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b39 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:15:54.185 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b39 - 500 null text/plain; charset=utf-8 217.255ms
2025-05-06 14:16:01.200 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 50
2025-05-06 14:16:01.201 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:16:01.240 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:16:01.280 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:16:01.288 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:16:01.292 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:16:01.292 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.4807ms.
2025-05-06 14:16:01.292 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 14:16:01.292 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 50.7018ms
2025-05-06 14:16:01.292 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 14:16:01.293 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 91.8894 ms
2025-05-06 14:16:01.293 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 92.9949ms
2025-05-06 14:17:14.979 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 14:17:14.983 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:15.069 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:17:15.147 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:17:15.168 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:17:15.204 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:17:15.221 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [InsertedDate] = @p1, [InsertedUser] = @p2, [IsActive] = @p3, [Name] = @p4, [UpdatedDate] = @p5, [UpdatedUser] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-06 14:17:15.485 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 416.0017ms
2025-05-06 14:17:15.486 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:15.487 +03:00 [ERR] HTTP DELETE /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 504.0761 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 94
   at lambda_method153(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:17:15.509 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 94
   at lambda_method153(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:17:15.513 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 534.8253ms
2025-05-06 14:17:30.909 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b37 - null null
2025-05-06 14:17:30.910 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:30.910 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:17:30.934 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:17:30.945 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:17:31.086 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 176.435ms
2025-05-06 14:17:31.087 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:31.087 +03:00 [ERR] HTTP DELETE /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b37 responded 500 in 177.8389 ms
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b37 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 86
   at lambda_method153(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:17:31.089 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b37 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 86
   at lambda_method153(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:17:31.092 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b37 - 500 null text/plain; charset=utf-8 183.0398ms
2025-05-06 14:17:37.363 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 14:17:37.389 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:37.390 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:17:37.446 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:17:37.461 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 14:17:37.468 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 14:17:37.474 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [InsertedDate] = @p1, [InsertedUser] = @p2, [IsActive] = @p3, [Name] = @p4, [UpdatedDate] = @p5, [UpdatedUser] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-06 14:17:37.484 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 37.9395ms.
2025-05-06 14:17:37.484 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 14:17:37.487 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 96.8437ms
2025-05-06 14:17:37.487 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 14:17:37.487 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 123.9712 ms
2025-05-06 14:17:37.487 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 125.1398ms
2025-05-06 14:18:44.173 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 14:18:44.212 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:18:44.231 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:18:44.269 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:18:44.364 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 132.2991ms
2025-05-06 14:18:44.364 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:18:44.365 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 185.5171 ms
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method164(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:18:44.367 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method164(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:18:44.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 196.5935ms
2025-05-06 14:21:54.936 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:21:55.398 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:21:55.399 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:21:55.402 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:21:55.402 +03:00 [INF] Hosting environment: Development
2025-05-06 14:21:55.402 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:21:56.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:21:56.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 638.6101ms
2025-05-06 14:21:57.077 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:21:57.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:21:57.104 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 26.3351ms
2025-05-06 14:21:58.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1779.2404ms
2025-05-06 14:21:59.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:21:59.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 274.7166ms
2025-05-06 14:22:07.924 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 14:22:08.087 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:22:08.131 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:22:08.263 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:22:08.383 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 246.1424ms
2025-05-06 14:22:08.385 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:22:08.388 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 453.1378 ms
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:22:08.442 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:22:08.448 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 525.4188ms
2025-05-06 14:22:18.417 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 22
2025-05-06 14:22:18.422 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:22:18.436 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:22:18.518 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:22:18.550 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 114.488ms
2025-05-06 14:22:18.551 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:22:18.551 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 130.9795 ms
2025-05-06 14:22:18.551 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 134.193ms
2025-05-06 14:22:33.394 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 46
2025-05-06 14:22:33.398 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:22:33.398 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:22:33.401 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:22:33.402 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 3.1653ms
2025-05-06 14:22:33.402 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:22:33.402 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 6.6781 ms
2025-05-06 14:22:33.402 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 8.5991ms
2025-05-06 14:28:07.237 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:28:07.909 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:28:07.909 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:28:07.912 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:28:07.913 +03:00 [INF] Hosting environment: Development
2025-05-06 14:28:07.913 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:28:08.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:28:09.339 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 721.4459ms
2025-05-06 14:28:09.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:28:09.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:28:09.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.3969ms
2025-05-06 14:28:09.655 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 292.2585ms
2025-05-06 14:28:11.458 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:28:11.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.9722ms
2025-05-06 14:29:07.895 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 70
2025-05-06 14:29:08.034 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:08.072 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:29:08.142 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:29:08.173 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 96.6836ms
2025-05-06 14:29:08.173 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:08.175 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 270.6580 ms
2025-05-06 14:29:08.176 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 282.3422ms
2025-05-06 14:29:15.229 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 70
2025-05-06 14:29:15.232 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:15.234 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:29:15.285 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:29:15.286 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 51.2114ms
2025-05-06 14:29:15.286 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:15.286 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 55.4635 ms
2025-05-06 14:29:15.287 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 58.0065ms
2025-05-06 14:29:27.362 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 77
2025-05-06 14:29:27.385 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:27.385 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:29:27.387 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:29:27.387 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 1.3914ms
2025-05-06 14:29:27.387 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:27.387 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 24.1655 ms
2025-05-06 14:29:27.387 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 25.5218ms
2025-05-06 14:29:38.872 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 73
2025-05-06 14:29:38.874 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:38.874 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:29:38.876 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:29:38.876 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 1.9413ms
2025-05-06 14:29:38.877 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:29:38.877 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 2.5451 ms
2025-05-06 14:29:38.877 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 4.5714ms
2025-05-06 14:30:01.339 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 77
2025-05-06 14:30:01.341 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:30:01.351 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:30:01.357 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:30:01.357 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 6.2039ms
2025-05-06 14:30:01.357 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:30:01.357 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 16.1117 ms
2025-05-06 14:30:01.358 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 19.3635ms
2025-05-06 14:30:49.085 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 60
2025-05-06 14:30:49.101 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:30:49.101 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:30:49.104 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:30:49.105 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 3.1317ms
2025-05-06 14:30:49.105 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:30:49.105 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 8.2174 ms
2025-05-06 14:30:49.105 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 23.7887ms
2025-05-06 14:31:18.937 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 77
2025-05-06 14:31:18.939 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:31:18.952 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:31:18.961 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:31:18.962 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 7.9914ms
2025-05-06 14:31:18.962 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:31:18.962 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 23.4898 ms
2025-05-06 14:31:18.962 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 25.9694ms
2025-05-06 14:31:51.602 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:31:52.026 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:31:52.027 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:31:52.029 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:31:52.029 +03:00 [INF] Hosting environment: Development
2025-05-06 14:31:52.029 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:31:52.750 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:31:53.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 439.426ms
2025-05-06 14:31:53.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:31:53.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:31:53.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 25.5066ms
2025-05-06 14:31:53.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.3051ms
2025-05-06 14:31:54.726 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:31:54.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 199.5734ms
2025-05-06 14:32:02.263 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 66
2025-05-06 14:32:02.398 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:32:02.429 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:32:02.488 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:32:02.513 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 79.5181ms
2025-05-06 14:32:02.513 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:32:02.515 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 242.3134 ms
2025-05-06 14:32:02.517 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 254.6234ms
2025-05-06 14:32:13.118 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 70
2025-05-06 14:32:13.122 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:32:13.122 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:32:13.125 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:32:13.125 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 2.7362ms
2025-05-06 14:32:13.125 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:32:13.125 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 4.7916 ms
2025-05-06 14:32:13.125 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 7.0904ms
2025-05-06 14:33:34.900 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:33:35.375 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:33:35.375 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:33:35.377 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:33:35.378 +03:00 [INF] Hosting environment: Development
2025-05-06 14:33:35.378 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:33:36.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:33:37.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 828.3866ms
2025-05-06 14:33:37.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:33:37.185 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:33:37.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.9417ms
2025-05-06 14:33:37.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.2564ms
2025-05-06 14:33:38.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:33:38.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 231.5823ms
2025-05-06 14:33:44.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 14:33:44.240 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:33:44.267 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 14:33:45.781 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:33:46.602 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 14:33:46.725 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 938.9694ms.
2025-05-06 14:33:46.732 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 14:33:46.761 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2490.2892ms
2025-05-06 14:33:46.762 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:33:46.765 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2643.4006 ms
2025-05-06 14:33:46.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2660.334ms
2025-05-06 14:33:55.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 14:33:55.368 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:33:55.376 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:33:55.424 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:33:55.536 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 160.0452ms
2025-05-06 14:33:55.538 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 14:33:55.539 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 172.6775 ms
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method105(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:33:55.583 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User role not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserRole() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 21
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 26
   at lambda_method105(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:33:55.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 227.0926ms
2025-05-06 14:34:04.506 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 60
2025-05-06 14:34:04.509 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:34:04.520 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:34:04.569 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:34:04.592 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 71.4558ms
2025-05-06 14:34:04.592 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:34:04.592 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 85.3083 ms
2025-05-06 14:34:04.592 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 86.6325ms
2025-05-06 14:34:15.284 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 70
2025-05-06 14:34:15.285 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:34:15.286 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:34:15.290 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:34:15.291 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 4.99ms
2025-05-06 14:34:15.291 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:34:15.291 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 5.7429 ms
2025-05-06 14:34:15.291 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 7.3248ms
2025-05-06 14:35:27.149 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:35:27.565 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:35:27.566 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:35:27.569 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:35:27.569 +03:00 [INF] Hosting environment: Development
2025-05-06 14:35:27.569 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:35:28.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:35:28.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 394.2457ms
2025-05-06 14:35:28.817 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:35:28.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:35:28.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 14.0673ms
2025-05-06 14:35:28.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.0672ms
2025-05-06 14:35:30.374 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:35:30.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.1367ms
2025-05-06 14:35:53.940 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - application/json 70
2025-05-06 14:35:54.095 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:35:54.146 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:35:54.209 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 14:35:54.234 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 84.3953ms
2025-05-06 14:35:54.234 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:35:54.236 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 400 in 286.5152 ms
2025-05-06 14:35:54.238 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 400 null application/problem+json; charset=utf-8 297.5902ms
2025-05-06 14:45:45.605 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:45:46.393 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:45:46.395 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:45:46.400 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:45:46.408 +03:00 [INF] Hosting environment: Development
2025-05-06 14:45:46.408 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:45:47.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:45:47.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 563.3782ms
2025-05-06 14:45:47.688 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:45:47.688 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:45:47.697 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.2983ms
2025-05-06 14:45:47.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.0905ms
2025-05-06 14:45:49.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:45:49.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 331.9513ms
2025-05-06 14:47:51.499 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:47:51.988 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:47:51.988 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:47:51.990 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:47:51.991 +03:00 [INF] Hosting environment: Development
2025-05-06 14:47:51.991 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:47:52.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:47:53.870 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1027.0339ms
2025-05-06 14:47:53.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:47:53.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:47:53.894 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.6217ms
2025-05-06 14:47:53.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.6093ms
2025-05-06 14:47:55.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:47:55.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.381ms
2025-05-06 14:48:25.219 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryJijf4naPN3bFNfpo 28406
2025-05-06 14:48:25.343 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:48:25.381 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:48:25.430 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:48:25.458 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 73.0218ms
2025-05-06 14:48:25.459 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:48:25.461 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 415 in 233.4577 ms
2025-05-06 14:48:25.465 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 415 null application/problem+json; charset=utf-8 246.0852ms
2025-05-06 14:49:17.519 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryTTePN0AutDXQIAvK 158939
2025-05-06 14:49:17.556 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:49:17.562 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:49:17.582 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:49:17.584 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 22.4215ms
2025-05-06 14:49:17.585 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:49:17.589 +03:00 [INF] HTTP POST /api/ExpenseDocument responded 415 in 53.4168 ms
2025-05-06 14:49:17.596 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 415 null application/problem+json; charset=utf-8 76.5833ms
2025-05-06 14:52:41.752 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:52:42.284 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:52:42.285 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:52:42.288 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:52:42.289 +03:00 [INF] Hosting environment: Development
2025-05-06 14:52:42.289 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:52:43.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:52:44.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 569.3789ms
2025-05-06 14:52:44.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:52:44.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:52:44.092 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.5725ms
2025-05-06 14:52:44.159 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.7049ms
2025-05-06 14:52:45.881 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:52:46.101 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 219.3472ms
2025-05-06 14:52:58.732 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryrCWjJeAvwrjQFhCN 531000
2025-05-06 14:52:58.876 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:52:58.920 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:52:59.191 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:53:09.018 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 10094.7853ms
2025-05-06 14:53:09.020 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:53:09.024 +03:00 [ERR] HTTP POST /api/ExpenseDocument responded 500 in 10260.0894 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:53:09.072 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:53:09.083 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 10351.7552ms
2025-05-06 14:55:01.879 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryvtx6Q6o9yptjfAoO 144
2025-05-06 14:55:01.898 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:55:01.900 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:55:07.073 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 5172.54ms
2025-05-06 14:55:07.078 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:55:07.085 +03:00 [ERR] HTTP POST /api/ExpenseDocument responded 500 in 5192.8322 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.Application.Validation.ExpenseDocumentValidator.<>c.<.ctor>b__0_1(IFormFile f) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Validations\ExpenseDocumentValidator.cs:line 18
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass27_0`2.<Must>b__0(T x, TProperty val) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 421
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass28_0`2.<Must>b__0(T x, TProperty val, ValidationContext`1 _) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 437
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass29_0`2.<Must>b__0(T instance, TProperty property, ValidationContext`1 propertyValidatorContext) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 453
   at FluentValidation.Validators.PredicateValidator`2.IsValid(ValidationContext`1 context, TProperty value) in /_/src/FluentValidation/Validators/PredicateValidator.cs:line 36
   at FluentValidation.Internal.RuleComponent`2.InvokePropertyValidator(ValidationContext`1 context, TProperty value) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 92
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 83
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 156
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 246
   at FluentValidation.AbstractValidator`1.Validate(ValidationContext`1 context) in /_/src/FluentValidation/AbstractValidator.cs:line 202
   at FluentValidation.AbstractValidator`1.FluentValidation.IValidator.Validate(IValidationContext context) in /_/src/FluentValidation/AbstractValidator.cs:line 153
   at FluentValidation.AspNetCore.FluentValidationModelValidator.Validate(ModelValidationContext mvContext) in /_/src/FluentValidation.AspNetCore/FluentValidationModelValidatorProvider.cs:line 146
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>n__1(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>c__DisplayClass2_0.<Validate>g__BaseValidate|0() in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 45
   at FluentValidation.AspNetCore.FluentValidationVisitor.ValidateInternal(ModelMetadata metadata, String key, Object model, Func`1 continuation) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 63
   at FluentValidation.AspNetCore.FluentValidationVisitor.Validate(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 47
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:55:07.150 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.Application.Validation.ExpenseDocumentValidator.<>c.<.ctor>b__0_1(IFormFile f) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Validations\ExpenseDocumentValidator.cs:line 18
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass27_0`2.<Must>b__0(T x, TProperty val) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 421
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass28_0`2.<Must>b__0(T x, TProperty val, ValidationContext`1 _) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 437
   at FluentValidation.DefaultValidatorExtensions.<>c__DisplayClass29_0`2.<Must>b__0(T instance, TProperty property, ValidationContext`1 propertyValidatorContext) in /_/src/FluentValidation/DefaultValidatorExtensions.cs:line 453
   at FluentValidation.Validators.PredicateValidator`2.IsValid(ValidationContext`1 context, TProperty value) in /_/src/FluentValidation/Validators/PredicateValidator.cs:line 36
   at FluentValidation.Internal.RuleComponent`2.InvokePropertyValidator(ValidationContext`1 context, TProperty value) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 92
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 83
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 156
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 246
   at FluentValidation.AbstractValidator`1.Validate(ValidationContext`1 context) in /_/src/FluentValidation/AbstractValidator.cs:line 202
   at FluentValidation.AbstractValidator`1.FluentValidation.IValidator.Validate(IValidationContext context) in /_/src/FluentValidation/AbstractValidator.cs:line 153
   at FluentValidation.AspNetCore.FluentValidationModelValidator.Validate(ModelValidationContext mvContext) in /_/src/FluentValidation.AspNetCore/FluentValidationModelValidatorProvider.cs:line 146
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>n__1(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container)
   at FluentValidation.AspNetCore.FluentValidationVisitor.<>c__DisplayClass2_0.<Validate>g__BaseValidate|0() in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 45
   at FluentValidation.AspNetCore.FluentValidationVisitor.ValidateInternal(ModelMetadata metadata, String key, Object model, Func`1 continuation) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 63
   at FluentValidation.AspNetCore.FluentValidationVisitor.Validate(ModelMetadata metadata, String key, Object model, Boolean alwaysValidateAtTopLevel, Object container) in /_/src/FluentValidation.AspNetCore/FluentValidationVisitor.cs:line 47
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:55:07.157 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 5278.7418ms
2025-05-06 14:55:21.140 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryhGFOCW1Wq1TBHadc 531000
2025-05-06 14:55:21.175 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:55:21.175 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:55:21.275 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 14:55:27.315 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 6139.6137ms
2025-05-06 14:55:27.316 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:55:27.317 +03:00 [ERR] HTTP POST /api/ExpenseDocument responded 500 in 6175.7710 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 14:55:27.319 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 14:55:27.323 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 6182.8487ms
2025-05-06 14:58:34.770 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 14:58:35.391 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 14:58:35.392 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 14:58:35.395 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:58:35.395 +03:00 [INF] Hosting environment: Development
2025-05-06 14:58:35.395 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 14:58:36.134 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 14:58:36.801 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 687.1291ms
2025-05-06 14:58:36.812 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 14:58:36.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 14:58:36.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 17.7455ms
2025-05-06 14:58:36.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.6673ms
2025-05-06 14:58:39.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 14:58:39.292 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.9778ms
2025-05-06 14:59:17.361 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryhteEhJTvAceRl9IB 531000
2025-05-06 14:59:17.581 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 14:59:17.622 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 14:59:17.859 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:00:00.365 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:00:00.893 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:00:00.893 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:00:00.896 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:00:00.897 +03:00 [INF] Hosting environment: Development
2025-05-06 15:00:00.897 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:00:01.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:00:02.622 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 810.4991ms
2025-05-06 15:00:02.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:00:02.654 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:00:02.658 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 13.8772ms
2025-05-06 15:00:02.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.3825ms
2025-05-06 15:00:04.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:00:04.554 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 242.1066ms
2025-05-06 15:00:14.157 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundary7Fz29pC1B0Wv2nk0 391110
2025-05-06 15:00:14.313 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:00:14.348 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 15:00:14.665 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:00:21.784 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 7431.5967ms
2025-05-06 15:00:21.786 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:00:21.792 +03:00 [ERR] HTTP POST /api/ExpenseDocument responded 500 in 7601.4760 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 15:00:21.844 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 63
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 15:00:21.858 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 7700.8644ms
2025-05-06 15:01:53.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 15:01:53.892 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 15:01:53.902 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:01:55.266 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:01:55.345 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 1442.7702ms
2025-05-06 15:01:55.346 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 15:01:55.347 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 1459.4614 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method15(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 15:01:55.349 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method15(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 15:01:55.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 1502.9294ms
2025-05-06 15:03:49.588 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - application/json 276
2025-05-06 15:03:49.610 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:03:49.619 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:03:49.778 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:03:49.808 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 189.2612ms
2025-05-06 15:03:49.808 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:03:49.809 +03:00 [INF] HTTP POST /api/Expense responded 400 in 201.3648 ms
2025-05-06 15:03:49.809 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 224.0946ms
2025-05-06 15:04:13.941 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - application/json 276
2025-05-06 15:04:13.992 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:04:13.996 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:04:14.033 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:04:14.034 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 37.806ms
2025-05-06 15:04:14.034 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:04:14.034 +03:00 [INF] HTTP POST /api/Expense responded 400 in 52.1615 ms
2025-05-06 15:04:14.034 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 97.2494ms
2025-05-06 15:06:08.303 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:06:08.880 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:06:08.881 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:06:08.883 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:06:08.884 +03:00 [INF] Hosting environment: Development
2025-05-06 15:06:08.884 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:06:09.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:06:10.243 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 603.9726ms
2025-05-06 15:06:10.267 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:06:10.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:06:10.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 15.4603ms
2025-05-06 15:06:10.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.6868ms
2025-05-06 15:06:12.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:06:12.314 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.065ms
2025-05-06 15:06:55.890 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - application/json 276
2025-05-06 15:06:56.031 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:06:56.067 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:06:57.275 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:06:57.311 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 1239.9999ms
2025-05-06 15:06:57.311 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:06:57.313 +03:00 [INF] HTTP POST /api/Expense responded 400 in 1414.2116 ms
2025-05-06 15:06:57.319 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 1428.5206ms
2025-05-06 15:09:51.269 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:09:51.702 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:09:51.703 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:09:51.705 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:09:51.705 +03:00 [INF] Hosting environment: Development
2025-05-06 15:09:51.705 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:09:52.411 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:09:52.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 546.6535ms
2025-05-06 15:09:52.982 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:09:52.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:09:53.013 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 29.7595ms
2025-05-06 15:09:53.069 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.3462ms
2025-05-06 15:09:54.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:09:54.803 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 226.8041ms
2025-05-06 15:11:04.227 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryfygwQsMBtUQpFKFq 865
2025-05-06 15:11:04.396 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:04.444 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:11:05.920 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:11:05.956 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 1507.568ms
2025-05-06 15:11:05.956 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:05.960 +03:00 [INF] HTTP POST /api/Expense responded 400 in 1723.4218 ms
2025-05-06 15:11:05.968 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 1740.8278ms
2025-05-06 15:11:13.868 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryadn9ZLu10r2U8Ol1 869
2025-05-06 15:11:13.871 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:13.872 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:11:13.993 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:11:13.994 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 121.9699ms
2025-05-06 15:11:13.994 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:13.994 +03:00 [INF] HTTP POST /api/Expense responded 400 in 124.0130 ms
2025-05-06 15:11:13.994 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 126.7737ms
2025-05-06 15:11:29.965 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarywxmDliMc6sf8Jm1d 869
2025-05-06 15:11:29.969 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:29.970 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:11:30.041 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:11:30.041 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 71.3732ms
2025-05-06 15:11:30.041 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:11:30.041 +03:00 [INF] HTTP POST /api/Expense responded 400 in 74.7146 ms
2025-05-06 15:11:30.041 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 76.3774ms
2025-05-06 15:14:15.168 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary28SwmRVZERv76PY9 888
2025-05-06 15:14:15.225 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:14:15.226 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:14:15.239 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:14:15.240 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 7.1147ms
2025-05-06 15:14:15.240 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:14:15.240 +03:00 [INF] HTTP POST /api/Expense responded 400 in 15.2399 ms
2025-05-06 15:14:15.241 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 72.9905ms
2025-05-06 15:16:06.790 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary97ApCsFRDVynCtt0 936
2025-05-06 15:16:06.792 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:16:06.796 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:16:06.845 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:16:06.845 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 48.9796ms
2025-05-06 15:16:06.845 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:16:06.845 +03:00 [INF] HTTP POST /api/Expense responded 400 in 54.0599 ms
2025-05-06 15:16:06.845 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 56.8347ms
2025-05-06 15:16:20.873 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryMkqu1Ut5hvy7fBOg 943
2025-05-06 15:16:20.874 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:16:20.874 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:16:20.878 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:16:20.879 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 4.197ms
2025-05-06 15:16:20.879 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:16:20.879 +03:00 [INF] HTTP POST /api/Expense responded 400 in 5.3013 ms
2025-05-06 15:16:20.880 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 8.5215ms
2025-05-06 15:17:02.098 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryP8OJ9yX50AwN6LlR 1063
2025-05-06 15:17:02.156 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:17:02.156 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:17:02.163 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:17:02.168 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 11.9749ms
2025-05-06 15:17:02.169 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:17:02.169 +03:00 [INF] HTTP POST /api/Expense responded 400 in 70.1919 ms
2025-05-06 15:17:02.169 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 71.2736ms
2025-05-06 15:17:13.584 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryAXPA4aAsvW5kML38 857
2025-05-06 15:17:13.585 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:17:13.585 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:17:13.587 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:17:13.587 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 2.4234ms
2025-05-06 15:17:13.587 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:17:13.587 +03:00 [INF] HTTP POST /api/Expense responded 400 in 2.9116 ms
2025-05-06 15:17:13.588 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 4.0851ms
2025-05-06 15:24:08.397 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:24:09.116 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:24:09.117 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:24:09.119 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:24:09.120 +03:00 [INF] Hosting environment: Development
2025-05-06 15:24:09.120 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:24:10.133 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:24:10.971 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 869.8044ms
2025-05-06 15:24:11.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:24:11.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:24:11.168 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 13.2206ms
2025-05-06 15:24:11.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.8628ms
2025-05-06 15:24:16.507 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:24:16.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 334.1275ms
2025-05-06 15:25:21.951 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryIX9PCaC98LbH5gtQ 883
2025-05-06 15:25:22.145 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:25:22.207 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:25:23.781 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:25:23.817 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 1603.4793ms
2025-05-06 15:25:23.818 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:25:23.822 +03:00 [INF] HTTP POST /api/Expense responded 400 in 1857.4011 ms
2025-05-06 15:25:23.832 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 1881.7375ms
2025-05-06 15:25:32.839 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarypY1x0E9ycDUbfWAL 887
2025-05-06 15:25:32.850 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:25:32.850 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:25:32.922 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 15:25:32.922 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 71.9644ms
2025-05-06 15:25:32.922 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:25:32.922 +03:00 [INF] HTTP POST /api/Expense responded 400 in 73.7880 ms
2025-05-06 15:25:32.923 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 83.8833ms
2025-05-06 15:29:07.351 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:29:07.997 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:29:07.997 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:29:08.002 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:29:08.003 +03:00 [INF] Hosting environment: Development
2025-05-06 15:29:08.003 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:29:08.836 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:29:09.339 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 522.4493ms
2025-05-06 15:29:09.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:29:09.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:29:09.412 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 31.5174ms
2025-05-06 15:29:09.461 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.5418ms
2025-05-06 15:29:11.443 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:29:11.840 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 397.6681ms
2025-05-06 15:30:02.161 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryxyB1mTrwkPBChDiU 531709
2025-05-06 15:30:02.380 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:30:02.437 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 15:30:04.252 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:30:04.361 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 1919.5188ms
2025-05-06 15:30:04.363 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 15:30:04.367 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 2165.6485 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 15:30:04.410 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 15:30:04.428 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 2267.4169ms
2025-05-06 15:36:42.434 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:36:43.099 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:36:43.100 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:36:43.102 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:36:43.103 +03:00 [INF] Hosting environment: Development
2025-05-06 15:36:43.103 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:36:44.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:36:44.895 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 735.3549ms
2025-05-06 15:36:44.931 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:36:44.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:36:44.942 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.1108ms
2025-05-06 15:36:45.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 118.3802ms
2025-05-06 15:36:46.995 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:36:47.255 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 260.7292ms
2025-05-06 15:36:53.779 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 15:36:53.964 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 15:36:53.969 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:36:53.973 +03:00 [INF] HTTP GET /api/User responded 401 in 164.5220 ms
2025-05-06 15:36:53.975 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 221.6241ms
2025-05-06 15:37:00.796 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 15:37:00.808 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 15:37:00.808 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:37:00.808 +03:00 [INF] HTTP GET /api/Payment responded 401 in 8.9122 ms
2025-05-06 15:37:00.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 401 0 null 13.6428ms
2025-05-06 15:37:35.225 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:37:35.796 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:37:35.797 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:37:35.799 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:37:35.800 +03:00 [INF] Hosting environment: Development
2025-05-06 15:37:35.800 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:37:36.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:37:36.768 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 472.2785ms
2025-05-06 15:37:36.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:37:36.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:37:36.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.6852ms
2025-05-06 15:37:36.844 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.2001ms
2025-05-06 15:37:38.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:37:38.616 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.3564ms
2025-05-06 15:37:47.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 15:37:48.068 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 15:37:48.074 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:37:48.076 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 401 in 154.5109 ms
2025-05-06 15:37:48.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 401 0 null 166.2504ms
2025-05-06 15:37:55.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 15:37:55.251 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 15:37:55.252 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:37:55.252 +03:00 [INF] HTTP GET /api/User responded 401 in 6.2194 ms
2025-05-06 15:37:55.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 8.8861ms
2025-05-06 15:38:28.508 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 15:38:28.530 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:38:28.567 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 15:38:29.982 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:38:30.962 +03:00 [INF] Executed DbCommand (158ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 15:38:31.235 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1248.934ms.
2025-05-06 15:38:31.245 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 15:38:31.272 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2700.1543ms
2025-05-06 15:38:31.273 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:38:31.275 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2763.8037 ms
2025-05-06 15:38:31.287 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2779.1568ms
2025-05-06 15:39:23.121 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 15:39:23.133 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:39:23.138 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 15:39:23.236 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:39:23.269 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 15:39:23.271 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.9988ms.
2025-05-06 15:39:23.272 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 15:39:23.272 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 134.3362ms
2025-05-06 15:39:23.272 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:39:23.272 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 149.7373 ms
2025-05-06 15:39:23.273 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 153.3522ms
2025-05-06 15:40:00.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 15:40:00.892 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 15:40:00.892 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:40:00.892 +03:00 [INF] HTTP GET /api/Payment responded 401 in 22.1477 ms
2025-05-06 15:40:00.893 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 401 0 null 25.5667ms
2025-05-06 15:40:05.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 15:40:05.869 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 15:40:05.869 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:40:05.869 +03:00 [INF] HTTP GET /api/Payment responded 401 in 1.1101 ms
2025-05-06 15:40:05.870 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 401 0 null 3.5613ms
2025-05-06 15:41:15.056 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary8L8uyyJoN8B9i7Rz 531710
2025-05-06 15:41:15.058 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 15:41:15.066 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:41:15.068 +03:00 [INF] HTTP POST /api/Expense responded 401 in 8.3175 ms
2025-05-06 15:41:15.068 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 12.4637ms
2025-05-06 15:41:15.076 +03:00 [INF] Connection id "0HNCCJB3PH9NA", Request id "0HNCCJB3PH9NA:00000001": the application completed without reading the entire request body.
2025-05-06 15:46:12.687 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:46:13.377 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:46:13.380 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:46:13.395 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:46:13.397 +03:00 [INF] Hosting environment: Development
2025-05-06 15:46:13.397 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:46:14.160 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:46:15.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1081.9403ms
2025-05-06 15:46:15.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:46:15.249 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:46:15.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 39.9673ms
2025-05-06 15:46:15.356 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.9825ms
2025-05-06 15:46:17.501 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:46:17.739 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 238.2063ms
2025-05-06 15:50:22.830 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryf3zSnYu03aq062qA 531675
2025-05-06 15:50:23.025 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 15:50:23.033 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:50:23.036 +03:00 [INF] HTTP POST /api/Expense responded 401 in 175.8177 ms
2025-05-06 15:50:23.037 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 212.6405ms
2025-05-06 15:52:00.675 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:52:01.261 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:52:01.261 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:52:01.265 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:52:01.266 +03:00 [INF] Hosting environment: Development
2025-05-06 15:52:01.266 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:52:02.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:52:03.030 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 948.4712ms
2025-05-06 15:52:03.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:52:03.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:52:03.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 23.7951ms
2025-05-06 15:52:03.301 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 211.0571ms
2025-05-06 15:52:05.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:52:05.641 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 269.6693ms
2025-05-06 15:52:27.196 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 15:52:27.368 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:52:27.404 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 15:52:29.479 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:52:30.474 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 15:52:30.626 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1142.1047ms.
2025-05-06 15:52:30.636 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 15:52:30.652 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3243.587ms
2025-05-06 15:52:30.652 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:52:30.655 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3448.9259 ms
2025-05-06 15:52:30.668 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3472.5787ms
2025-05-06 15:53:47.160 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary4cAFWsWhAeoL73Wy 531703
2025-05-06 15:53:47.208 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 15:53:47.213 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 15:53:47.213 +03:00 [INF] HTTP POST /api/Expense responded 401 in 36.9022 ms
2025-05-06 15:53:47.214 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 53.9936ms
2025-05-06 15:59:00.515 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 15:59:01.217 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 15:59:01.218 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 15:59:01.222 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 15:59:01.223 +03:00 [INF] Hosting environment: Development
2025-05-06 15:59:01.223 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 15:59:02.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 15:59:03.438 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1416.5155ms
2025-05-06 15:59:03.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 15:59:03.586 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 15:59:03.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 32.9255ms
2025-05-06 15:59:03.869 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 282.6853ms
2025-05-06 15:59:05.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 15:59:06.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 405.7723ms
2025-05-06 15:59:32.892 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 15:59:34.597 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:59:34.647 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 15:59:36.576 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 15:59:38.255 +03:00 [INF] Executed DbCommand (258ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 15:59:38.470 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1889.1333ms.
2025-05-06 15:59:38.479 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 15:59:38.497 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3844.3086ms
2025-05-06 15:59:38.497 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 15:59:38.500 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 5596.1725 ms
2025-05-06 15:59:38.513 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 5622.1547ms
2025-05-06 16:00:55.931 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryxSJB2GGEMXGpscRo 531693
2025-05-06 16:00:55.978 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:00:55.989 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:00:55.989 +03:00 [INF] HTTP POST /api/Expense responded 401 in 51.5917 ms
2025-05-06 16:00:55.989 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 58.7645ms
2025-05-06 16:07:19.138 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryzBcaDFzMfBhrBZhn 531693
2025-05-06 16:07:19.287 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:07:19.289 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:07:19.289 +03:00 [INF] HTTP POST /api/Expense responded 401 in 103.1009 ms
2025-05-06 16:07:19.290 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 155.4151ms
2025-05-06 16:08:03.639 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:08:04.442 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:08:04.443 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:08:04.445 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:08:04.445 +03:00 [INF] Hosting environment: Development
2025-05-06 16:08:04.445 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:08:05.633 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:08:06.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 559.6493ms
2025-05-06 16:08:06.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:08:06.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:08:06.222 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 18.6061ms
2025-05-06 16:08:06.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.6731ms
2025-05-06 16:08:08.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:08:08.560 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 388.562ms
2025-05-06 16:08:35.949 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 16:08:36.080 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 16:08:36.116 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 16:08:37.833 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:08:38.786 +03:00 [INF] Executed DbCommand (166ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 16:08:38.950 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1109.8349ms.
2025-05-06 16:08:38.961 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 16:08:38.980 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2859.1086ms
2025-05-06 16:08:38.981 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 16:08:38.985 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3026.0404 ms
2025-05-06 16:08:38.998 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3048.9951ms
2025-05-06 16:10:40.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 16:10:40.165 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:10:40.172 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:10:40.172 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 15.6687 ms
2025-05-06 16:10:40.173 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 33.2071ms
2025-05-06 16:10:53.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 16:10:53.542 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:10:53.542 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:10:53.543 +03:00 [INF] HTTP GET /api/Expense/pending responded 401 in 3.6129 ms
2025-05-06 16:10:53.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 401 0 null 6.9835ms
2025-05-06 16:11:11.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - null null
2025-05-06 16:11:11.260 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 16:11:11.261 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:11:11.261 +03:00 [INF] HTTP GET /api/Expense/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 responded 401 in 4.8846 ms
2025-05-06 16:11:11.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - 401 0 null 6.5618ms
2025-05-06 16:13:45.225 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:13:45.777 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:13:45.778 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:13:45.792 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:13:45.794 +03:00 [INF] Hosting environment: Development
2025-05-06 16:13:45.794 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:13:46.549 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:13:47.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 513.7176ms
2025-05-06 16:13:47.089 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:13:47.094 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:13:47.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.958ms
2025-05-06 16:13:47.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.4189ms
2025-05-06 16:13:49.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:13:50.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 321.6253ms
2025-05-06 16:14:21.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 16:14:21.789 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:14:21.794 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:14:21.799 +03:00 [INF] HTTP GET /api/Expense/history responded 401 in 162.1627 ms
2025-05-06 16:14:21.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 401 0 null 177.8076ms
2025-05-06 16:15:13.154 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryY1VOf4pAdoD68JBB 531690
2025-05-06 16:15:13.181 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:15:13.182 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:15:13.182 +03:00 [INF] HTTP POST /api/Expense responded 401 in 11.6500 ms
2025-05-06 16:15:13.183 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 29.2044ms
2025-05-06 16:24:03.405 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:24:04.148 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:24:04.148 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:24:04.151 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:24:04.152 +03:00 [INF] Hosting environment: Development
2025-05-06 16:24:04.152 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:24:05.625 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:24:06.249 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 645.432ms
2025-05-06 16:24:06.280 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:24:06.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:24:06.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 630.7309ms
2025-05-06 16:24:07.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 782.563ms
2025-05-06 16:24:09.221 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:24:09.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.5278ms
2025-05-06 16:25:03.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 16:25:03.701 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 16:25:03.708 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:25:03.711 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 401 in 164.6071 ms
2025-05-06 16:25:03.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 401 0 null 195.9168ms
2025-05-06 16:29:09.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 16:29:09.740 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:29:09.805 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 16:29:11.252 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:29:12.074 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 16:29:12.189 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 932.9973ms.
2025-05-06 16:29:12.196 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 16:29:12.230 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2420.9384ms
2025-05-06 16:29:12.231 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:29:12.232 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2642.0362 ms
2025-05-06 16:29:12.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2665.3757ms
2025-05-06 16:41:06.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 16:41:06.697 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 13:29:38', Current time (UTC): '6.05.2025 13:41:06'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 16:41:06.728 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 13:29:38', Current time (UTC): '6.05.2025 13:41:06'.
2025-05-06 16:41:06.738 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:41:06.744 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:41:06.745 +03:00 [INF] HTTP GET /api/User responded 401 in 79.1287 ms
2025-05-06 16:41:06.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 401 0 null 93.2746ms
2025-05-06 16:41:33.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - null null
2025-05-06 16:41:33.774 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 13:29:38', Current time (UTC): '6.05.2025 13:41:33'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 16:41:33.775 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 13:29:38', Current time (UTC): '6.05.2025 13:41:33'.
2025-05-06 16:41:33.775 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 16:41:33.775 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:41:33.775 +03:00 [INF] HTTP GET /api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 responded 401 in 2.2999 ms
2025-05-06 16:41:33.776 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - 401 0 null 14.3525ms
2025-05-06 16:42:01.849 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:42:02.568 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:42:02.568 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:42:02.571 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:42:02.571 +03:00 [INF] Hosting environment: Development
2025-05-06 16:42:02.571 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:42:04.762 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:42:05.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 573.6399ms
2025-05-06 16:42:05.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:42:05.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:42:05.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.9639ms
2025-05-06 16:42:05.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.5396ms
2025-05-06 16:42:07.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:42:07.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 436.8111ms
2025-05-06 16:42:20.879 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 16:42:21.079 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 16:42:21.131 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 16:42:22.602 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:42:23.545 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 16:42:23.714 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1107.807ms.
2025-05-06 16:42:23.724 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 16:42:23.747 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2610.142ms
2025-05-06 16:42:23.748 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 16:42:23.753 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2862.4468 ms
2025-05-06 16:42:23.766 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2887.1194ms
2025-05-06 16:43:24.442 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 16:43:24.497 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 16:43:24.512 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:43:24.512 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 401 in 40.0092 ms
2025-05-06 16:43:24.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 401 0 null 72.2463ms
2025-05-06 16:44:29.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 16:44:29.839 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 16:44:29.840 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:44:29.840 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 401 in 4.5325 ms
2025-05-06 16:44:29.840 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 401 0 null 12.6937ms
2025-05-06 16:44:58.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 16:44:58.970 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 16:44:58.971 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 16:44:58.971 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 30.0633 ms
2025-05-06 16:44:58.971 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 44.8748ms
2025-05-06 16:45:08.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 16:45:08.615 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:45:08.630 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:45:08.774 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:45:08.912 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 281.1437ms
2025-05-06 16:45:08.913 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:45:08.914 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 391.7538 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:45:08.962 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:45:08.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 454.7188ms
2025-05-06 16:45:16.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 16:45:16.923 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:45:16.929 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 16:45:16.994 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:45:17.256 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 16:45:17.294 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 299.7754ms.
2025-05-06 16:45:17.295 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 16:45:17.321 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 391.2495ms
2025-05-06 16:45:17.321 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:45:17.321 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 399.2480 ms
2025-05-06 16:45:17.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 402.3142ms
2025-05-06 16:45:32.944 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 16:45:32.944 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:45:32.951 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 16:45:32.987 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:45:33.025 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 16:45:33.032 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 45.3196ms.
2025-05-06 16:45:33.033 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 16:45:33.045 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 93.9041ms
2025-05-06 16:45:33.045 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:45:33.045 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 100.9928 ms
2025-05-06 16:45:33.045 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 102.633ms
2025-05-06 16:45:39.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 16:45:39.690 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:45:39.692 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:45:39.692 +03:00 [INF] HTTP GET /api/User responded 403 in 2.6835 ms
2025-05-06 16:45:39.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 403 0 null 3.5106ms
2025-05-06 16:47:11.235 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 16:47:11.239 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:47:11.250 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 16:47:11.299 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:47:11.317 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 16:47:11.319 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.3267ms.
2025-05-06 16:47:11.319 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 16:47:11.320 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 64.7993ms
2025-05-06 16:47:11.320 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:47:11.320 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 83.2476 ms
2025-05-06 16:47:11.320 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 89.1059ms
2025-05-06 16:47:22.796 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 243
2025-05-06 16:47:22.797 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:47:22.798 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:47:22.798 +03:00 [INF] HTTP POST /api/User responded 403 in 1.0874 ms
2025-05-06 16:47:22.798 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 403 0 null 2.7463ms
2025-05-06 16:47:47.208 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - application/json 243
2025-05-06 16:47:47.209 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:47:47.209 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:47:47.209 +03:00 [INF] HTTP PUT /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 403 in 0.7657 ms
2025-05-06 16:47:47.209 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 403 0 null 1.1557ms
2025-05-06 16:47:55.979 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 16:47:55.980 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:47:55.980 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:47:55.980 +03:00 [INF] HTTP DELETE /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 403 in 0.6872 ms
2025-05-06 16:47:55.980 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 403 0 null 2.2935ms
2025-05-06 16:48:11.261 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - null null
2025-05-06 16:48:11.263 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:48:11.263 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:48:11.263 +03:00 [INF] HTTP GET /api/User/email/basak@gmail.com responded 403 in 1.5221 ms
2025-05-06 16:48:11.263 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - 403 0 null 2.0824ms
2025-05-06 16:48:24.468 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/1 - null null
2025-05-06 16:48:24.470 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:48:24.470 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:48:24.470 +03:00 [INF] HTTP GET /api/User/role/1 responded 403 in 1.1163 ms
2025-05-06 16:48:24.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/1 - 403 0 null 2.1852ms
2025-05-06 16:48:32.226 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - application/json 1
2025-05-06 16:48:32.227 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:48:32.227 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:48:32.227 +03:00 [INF] HTTP PUT /api/User/role/7737c586-19b4-4b30-9734-de656451e31e responded 403 in 0.8882 ms
2025-05-06 16:48:32.228 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - 403 0 null 1.2716ms
2025-05-06 16:48:37.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 16:48:37.336 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:48:37.336 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 16:48:37.369 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:48:37.387 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 16:48:37.389 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 19.7936ms.
2025-05-06 16:48:37.389 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 16:48:37.390 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 52.8156ms
2025-05-06 16:48:37.390 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:48:37.390 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 54.2175 ms
2025-05-06 16:48:37.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 55.3594ms
2025-05-06 16:49:24.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 16:49:24.234 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:49:24.248 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 16:49:24.274 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:49:24.296 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 16:49:24.324 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 49.4101ms.
2025-05-06 16:49:24.324 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 16:49:24.328 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 79.6983ms
2025-05-06 16:49:24.328 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:49:24.328 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 103.6285 ms
2025-05-06 16:49:24.329 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 107.6725ms
2025-05-06 16:49:46.645 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 16:49:46.646 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:49:46.652 +03:00 [INF] Route matched with {action = "GetById", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 16:49:46.690 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:49:46.705 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 16:49:46.709 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 19.4156ms.
2025-05-06 16:49:46.709 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 16:49:46.711 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) in 59.1002ms
2025-05-06 16:49:46.711 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:49:46.711 +03:00 [INF] HTTP GET /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 65.3605 ms
2025-05-06 16:49:46.711 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 66.8452ms
2025-05-06 16:49:55.268 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 16:49:55.269 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:49:55.269 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:49:55.269 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 403 in 0.8949 ms
2025-05-06 16:49:55.273 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 403 0 null 5.8166ms
2025-05-06 16:50:03.943 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 16:50:03.944 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:50:03.944 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:50:03.944 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 403 in 0.7289 ms
2025-05-06 16:50:03.944 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 403 0 null 1.8764ms
2025-05-06 16:50:12.470 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 16:50:12.475 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:50:12.475 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:50:12.475 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 403 in 4.5754 ms
2025-05-06 16:50:12.475 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 403 0 null 5.3894ms
2025-05-06 16:51:22.317 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 16:51:22.357 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 16:51:22.361 +03:00 [INF] Route matched with {action = "GetExpenseHistory", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetExpenseHistory() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:51:22.409 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:51:22.471 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) in 110.601ms
2025-05-06 16:51:22.472 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 16:51:22.473 +03:00 [ERR] HTTP GET /api/Expense/history responded 500 in 119.9636 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 41
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:51:22.475 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 41
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:51:22.478 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 500 null text/plain; charset=utf-8 162.8607ms
2025-05-06 16:51:48.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/rejected - null null
2025-05-06 16:51:48.104 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:51:48.115 +03:00 [INF] Route matched with {action = "GetRejectedExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetRejectedExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:51:48.154 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:51:48.216 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) in 100.9622ms
2025-05-06 16:51:48.217 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:51:48.218 +03:00 [ERR] HTTP GET /api/Expense/rejected responded 500 in 129.3801 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 51
   at lambda_method269(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:51:48.220 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 51
   at lambda_method269(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:51:48.222 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/rejected - 500 null text/plain; charset=utf-8 138.7188ms
2025-05-06 16:52:44.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/filter?Status=1 - null null
2025-05-06 16:52:44.277 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:52:44.305 +03:00 [INF] Route matched with {action = "FilterMyExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] FilterMyExpenses(Expense_Management_System.Application.DTOs.Requests.ExpenseFilterRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:52:44.449 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:52:44.530 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses (Expense_Management_System.WebApi) in 225.4176ms
2025-05-06 16:52:44.531 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses (Expense_Management_System.WebApi)'
2025-05-06 16:52:44.531 +03:00 [ERR] HTTP GET /api/Expense/filter responded 500 in 278.8006 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses(ExpenseFilterRequest filter) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 61
   at lambda_method277(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:52:44.533 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.FilterMyExpenses(ExpenseFilterRequest filter) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 61
   at lambda_method277(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:52:44.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/filter?Status=1 - 500 null text/plain; charset=utf-8 298.9067ms
2025-05-06 16:53:49.065 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryjahhEB8D2Wnd8B7B 531691
2025-05-06 16:53:49.154 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 16:53:49.184 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:53:49.426 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:53:49.504 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 319.4343ms
2025-05-06 16:53:49.505 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 16:53:49.505 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 352.6865 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method292(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:53:49.508 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method292(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:53:49.523 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 457.6624ms
2025-05-06 16:54:17.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 16:54:17.327 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:54:17.327 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:54:17.356 +03:00 [INF] HTTP GET /api/Expense/pending responded 403 in 34.5302 ms
2025-05-06 16:54:17.361 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 403 0 null 36.2522ms
2025-05-06 16:54:38.016 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 16:54:38.020 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:54:38.041 +03:00 [INF] Route matched with {action = "GetById", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:54:38.085 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:54:38.104 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 16:54:38.301 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) in 260.0408ms
2025-05-06 16:54:38.302 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:54:38.302 +03:00 [ERR] HTTP GET /api/Expense/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 283.4828 ms
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b35 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 122
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:54:38.322 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b35 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 122
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:54:38.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 309.6806ms
2025-05-06 16:54:54.588 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/Expense/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 16:54:54.588 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 16:54:54.604 +03:00 [INF] Route matched with {action = "Delete", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.String]] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 16:54:54.631 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:54:54.638 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 16:54:54.706 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 74.1476ms.
2025-05-06 16:54:54.706 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 16:54:54.708 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) in 103.2202ms
2025-05-06 16:54:54.708 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 16:54:54.708 +03:00 [INF] HTTP DELETE /api/Expense/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 119.6675 ms
2025-05-06 16:54:54.708 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/Expense/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 120.5163ms
2025-05-06 16:55:55.092 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 16:55:55.107 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:55:55.115 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 16:55:55.144 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:55:55.199 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 82.9529ms
2025-05-06 16:55:55.199 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 16:55:55.200 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 105.1941 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 33
   at lambda_method326(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:55:55.201 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 33
   at lambda_method326(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:55:55.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 111.3769ms
2025-05-06 16:56:42.082 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryNATpt5HA93zERSAU 531000
2025-05-06 16:56:42.089 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 16:56:42.106 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 16:56:42.285 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:58:21.880 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:58:22.512 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:58:22.513 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:58:22.516 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:58:22.517 +03:00 [INF] Hosting environment: Development
2025-05-06 16:58:22.517 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:58:23.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:58:23.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 493.1079ms
2025-05-06 16:58:24.154 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:58:24.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:58:24.168 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 14.1992ms
2025-05-06 16:58:24.231 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.5514ms
2025-05-06 16:58:26.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:58:26.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 354.1223ms
2025-05-06 16:58:44.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 16:58:44.620 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:58:44.622 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:58:44.625 +03:00 [INF] HTTP GET /api/Payment responded 403 in 236.5850 ms
2025-05-06 16:58:44.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 403 0 null 249.109ms
2025-05-06 16:58:56.421 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Payment - application/json 99
2025-05-06 16:58:56.433 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 16:58:56.433 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 16:58:56.433 +03:00 [INF] HTTP POST /api/Payment responded 403 in 8.5339 ms
2025-05-06 16:58:56.434 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Payment - 403 0 null 12.9597ms
2025-05-06 16:59:08.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 16:59:08.829 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:59:08.875 +03:00 [INF] Route matched with {action = "GetById", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.PaymentResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.PaymentController (Expense_Management_System.WebApi).
2025-05-06 16:59:10.333 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.PaymentController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 16:59:11.418 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[BankAccountNumber], [p].[ExpenseId], [p].[FailureReason], [p].[InsertedDate], [p].[InsertedUser], [p].[IsActive], [p].[IsSuccessful], [p].[PaymentDate], [p].[PaymentMethod], [p].[TransactionReference], [p].[UpdatedDate], [p].[UpdatedUser], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Id] = @__get_Item_0
2025-05-06 16:59:11.634 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.PaymentController.GetById (Expense_Management_System.WebApi) in 2755.1039ms
2025-05-06 16:59:11.635 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetById (Expense_Management_System.WebApi)'
2025-05-06 16:59:11.637 +03:00 [ERR] HTTP GET /api/Payment/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 2812.6290 ms
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b35 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.PaymentController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\PaymentController.cs:line 41
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 16:59:11.696 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 57bdee69-e820-46c7-9784-62354b271b35 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.PaymentController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\PaymentController.cs:line 41
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 16:59:11.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 2884.4263ms
2025-05-06 16:59:49.528 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 16:59:50.006 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 16:59:50.006 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 16:59:50.008 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 16:59:50.009 +03:00 [INF] Hosting environment: Development
2025-05-06 16:59:50.009 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 16:59:50.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 16:59:51.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 397.5393ms
2025-05-06 16:59:51.103 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 16:59:51.103 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 16:59:51.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.4997ms
2025-05-06 16:59:51.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.7705ms
2025-05-06 16:59:52.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 16:59:53.116 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 328.0546ms
2025-05-06 17:01:52.370 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 17:01:52.554 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:01:52.613 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 17:01:54.106 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:01:55.137 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:01:55.299 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1188.4241ms.
2025-05-06 17:01:55.307 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 17:01:55.323 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2706.075ms
2025-05-06 17:01:55.324 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:01:55.327 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2947.2858 ms
2025-05-06 17:01:55.337 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2967.8531ms
2025-05-06 17:02:31.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 17:02:31.878 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 17:02:31.883 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:02:31.985 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:02:32.015 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 17:02:32.044 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 58.7313ms.
2025-05-06 17:02:32.046 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:02:32.065 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 181.7699ms
2025-05-06 17:02:32.065 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 17:02:32.065 +03:00 [INF] HTTP GET /api/User responded 200 in 258.0017 ms
2025-05-06 17:02:32.068 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 284.7438ms
2025-05-06 17:03:39.760 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 270
2025-05-06 17:03:39.783 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:03:39.788 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:03:39.922 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:03:39.957 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:03:39.960 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 38.1147ms.
2025-05-06 17:03:39.961 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:03:39.962 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 173.6821ms
2025-05-06 17:03:39.962 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:03:39.963 +03:00 [INF] HTTP POST /api/User responded 200 in 199.2410 ms
2025-05-06 17:03:39.963 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 203.5419ms
2025-05-06 17:04:26.927 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 268
2025-05-06 17:04:26.931 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:04:26.931 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:04:26.977 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:04:26.989 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:04:27.373 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:04:27.994 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15), @p13='?' (DbType = Guid), @p14='?' (Size = 20), @p15='?' (Size = 34), @p16='?' (DbType = DateTime2), @p17='?' (Size = 250), @p18='?' (DbType = DateTime2), @p19='?' (Size = 250), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [BankAccounts] ([Id], [AccountNumber], [IBAN], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-06 17:04:28.040 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1063.4135ms.
2025-05-06 17:04:28.040 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:04:28.041 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 1109.5639ms
2025-05-06 17:04:28.041 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:04:28.041 +03:00 [INF] HTTP POST /api/User responded 200 in 1112.7548 ms
2025-05-06 17:04:28.041 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 1114.4509ms
2025-05-06 17:05:15.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 17:05:15.912 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:05:15.932 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:05:15.972 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:05:16.033 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:05:16.035 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.3466ms.
2025-05-06 17:05:16.036 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:05:16.036 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 104.0806ms
2025-05-06 17:05:16.036 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:05:16.037 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 127.9226 ms
2025-05-06 17:05:16.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 174.1332ms
2025-05-06 17:06:14.977 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - application/json 268
2025-05-06 17:06:15.000 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:06:15.005 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:06:15.046 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:06:15.054 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:06:15.057 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:06:15.083 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 17:06:15.387 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 381.2211ms
2025-05-06 17:06:15.388 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:06:15.389 +03:00 [ERR] HTTP PUT /api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e responded 500 in 394.0047 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 96
   at lambda_method374(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:06:15.433 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 96
   at lambda_method374(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:06:15.446 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - 500 null text/plain; charset=utf-8 475.6892ms
2025-05-06 17:06:40.172 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - application/json 268
2025-05-06 17:06:40.172 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:06:40.173 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:06:40.226 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:06:40.233 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:06:40.236 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:06:40.242 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-06 17:06:40.250 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.5027ms.
2025-05-06 17:06:40.251 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:06:40.251 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 78.4355ms
2025-05-06 17:06:40.251 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:06:40.251 +03:00 [INF] HTTP PUT /api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e responded 200 in 79.5521 ms
2025-05-06 17:06:40.252 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - 200 null application/json; charset=utf-8 80.6943ms
2025-05-06 17:07:26.550 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - null null
2025-05-06 17:07:26.583 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:07:26.604 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:07:26.688 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:07:26.704 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:07:26.786 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 17:07:26.811 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 17:07:27.307 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 702.4416ms
2025-05-06 17:07:27.308 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:07:27.308 +03:00 [ERR] HTTP DELETE /api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e responded 500 in 754.8017 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 122
   at lambda_method383(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:07:27.311 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 122
   at lambda_method383(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:07:27.317 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - 500 null text/plain; charset=utf-8 769.4488ms
2025-05-06 17:07:31.088 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - null null
2025-05-06 17:07:31.089 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:07:31.089 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:07:31.130 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:07:31.141 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:07:31.147 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 17:07:31.150 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 17:07:31.373 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 284.2199ms
2025-05-06 17:07:31.374 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:07:31.375 +03:00 [ERR] HTTP DELETE /api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e responded 500 in 286.6464 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 122
   at lambda_method383(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:07:31.378 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 122
   at lambda_method383(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:07:31.381 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/ae8d0a41-f0f6-4a2a-b503-65a07c66816e - 500 null text/plain; charset=utf-8 293.0694ms
2025-05-06 17:08:22.751 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - null null
2025-05-06 17:08:22.767 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 17:08:22.775 +03:00 [INF] Route matched with {action = "GetByEmail", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetByEmail(System.String) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:08:22.803 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:08:22.811 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:08:22.812 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 8.7321ms.
2025-05-06 17:08:22.812 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:08:22.812 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi) in 37.5056ms
2025-05-06 17:08:22.812 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByEmail (Expense_Management_System.WebApi)'
2025-05-06 17:08:22.812 +03:00 [INF] HTTP GET /api/User/email/basak@gmail.com responded 200 in 61.5158 ms
2025-05-06 17:08:22.813 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/email/basak@gmail.com - 200 null application/json; charset=utf-8 62.2741ms
2025-05-06 17:08:30.910 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/role/2 - null null
2025-05-06 17:08:30.911 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 17:08:30.932 +03:00 [INF] Route matched with {action = "GetByRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetByRole(Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:08:31.021 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:08:31.036 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__role_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Role] = @__role_0
2025-05-06 17:08:31.037 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.7917ms.
2025-05-06 17:08:31.037 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:08:31.037 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi) in 104.9014ms
2025-05-06 17:08:31.037 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetByRole (Expense_Management_System.WebApi)'
2025-05-06 17:08:31.037 +03:00 [INF] HTTP GET /api/User/role/2 responded 200 in 126.7167 ms
2025-05-06 17:08:31.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/role/2 - 200 null application/json; charset=utf-8 128.1061ms
2025-05-06 17:09:18.150 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - application/json 1
2025-05-06 17:09:18.182 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 17:09:18.216 +03:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] ChangeRole(System.Guid, Expense_Management_System.Domain.Enums.UserRole) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:09:18.286 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:09:18.294 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 17:09:18.333 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 17:09:18.335 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 48.9642ms.
2025-05-06 17:09:18.335 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 17:09:18.336 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi) in 120.4916ms
2025-05-06 17:09:18.336 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.ChangeRole (Expense_Management_System.WebApi)'
2025-05-06 17:09:18.336 +03:00 [INF] HTTP PUT /api/User/role/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 186.1424 ms
2025-05-06 17:09:18.337 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/role/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 187.4992ms
2025-05-06 17:09:36.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - null null
2025-05-06 17:09:36.721 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:09:36.726 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 17:09:36.766 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:09:36.859 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 17:09:36.874 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 107.6288ms.
2025-05-06 17:09:36.874 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:09:36.894 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 167.5334ms
2025-05-06 17:09:36.894 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:09:36.894 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses responded 200 in 174.3440 ms
2025-05-06 17:09:36.894 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e/expenses - 200 null application/json; charset=utf-8 175.2921ms
2025-05-06 17:10:03.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 17:10:03.330 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 17:10:03.335 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:10:03.367 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:10:03.384 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 17:10:03.407 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 39.9573ms.
2025-05-06 17:10:03.407 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:10:03.411 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 75.3546ms
2025-05-06 17:10:03.411 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 17:10:03.411 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 81.9322 ms
2025-05-06 17:10:03.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 83.4875ms
2025-05-06 17:10:29.112 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 17:10:29.115 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:10:29.134 +03:00 [INF] Route matched with {action = "GetById", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:10:29.178 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:10:29.190 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:10:29.194 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.8143ms.
2025-05-06 17:10:29.194 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:10:29.196 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) in 62.3609ms
2025-05-06 17:10:29.196 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:10:29.196 +03:00 [INF] HTTP GET /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 83.8000 ms
2025-05-06 17:10:29.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 84.9708ms
2025-05-06 17:11:05.862 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 71
2025-05-06 17:11:05.911 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:11:05.926 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:11:05.972 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:11:05.981 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:11:06.031 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:11:06.048 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 17:11:06.048 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 17:11:06.330 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 404.4306ms
2025-05-06 17:11:06.331 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:11:06.331 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 467.7810 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method510(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:11:06.334 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 61
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method510(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:11:06.338 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 475.6538ms
2025-05-06 17:12:01.579 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 17:12:01.599 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:12:01.607 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:12:01.661 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:12:01.677 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:12:01.686 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 250), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseCategories] ([Id], [Description], [InsertedDate], [InsertedUser], [Name], [UpdatedDate], [UpdatedUser])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-06 17:12:01.689 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.7682ms.
2025-05-06 17:12:01.689 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:12:01.690 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 82.3282ms
2025-05-06 17:12:01.690 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:12:01.690 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 110.3153 ms
2025-05-06 17:12:01.690 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 112.8346ms
2025-05-06 17:12:24.511 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 17:12:24.527 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:12:24.527 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:12:24.566 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:12:24.572 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:12:24.574 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7.4871ms.
2025-05-06 17:12:24.574 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:12:24.583 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 56.0243ms
2025-05-06 17:12:24.583 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:12:24.583 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 69.3477 ms
2025-05-06 17:12:24.584 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 73.3932ms
2025-05-06 17:12:31.260 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - null null
2025-05-06 17:12:31.261 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:12:31.267 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:12:31.314 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:12:31.320 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:12:31.336 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 17:12:31.341 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 17:12:31.345 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [InsertedDate] = @p1, [InsertedUser] = @p2, [IsActive] = @p3, [Name] = @p4, [UpdatedDate] = @p5, [UpdatedUser] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-06 17:12:31.556 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 288.9935ms
2025-05-06 17:12:31.557 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:12:31.558 +03:00 [ERR] HTTP DELETE /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 500 in 297.7344 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 94
   at lambda_method574(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:12:31.561 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 94
   at lambda_method574(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:12:31.565 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 500 null text/plain; charset=utf-8 306.3239ms
2025-05-06 17:13:21.830 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad07 - null null
2025-05-06 17:13:21.833 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:13:21.844 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 17:13:21.908 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:13:21.918 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:13:22.046 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 202.5659ms
2025-05-06 17:13:22.047 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:13:22.048 +03:00 [ERR] HTTP DELETE /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad07 responded 500 in 215.6887 ms
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad07 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 86
   at lambda_method574(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:13:22.049 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad07 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 86
   at lambda_method574(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:13:22.051 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad07 - 500 null text/plain; charset=utf-8 220.6602ms
2025-05-06 17:13:49.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 17:13:49.211 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 17:13:49.219 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 17:13:49.248 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:14:35.285 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:14:35.832 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:14:35.832 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:14:35.835 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:14:35.835 +03:00 [INF] Hosting environment: Development
2025-05-06 17:14:35.835 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:14:36.906 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:14:37.360 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 465.3664ms
2025-05-06 17:14:37.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:14:37.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:14:37.392 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.1033ms
2025-05-06 17:14:37.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.875ms
2025-05-06 17:14:38.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:14:39.262 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 281.1481ms
2025-05-06 17:15:35.669 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:15:35.951 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 17:15:35.953 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 17:15:35.956 +03:00 [INF] HTTP GET /api/Expense/active responded 403 in 261.6623 ms
2025-05-06 17:15:35.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 403 0 null 289.0169ms
2025-05-06 17:16:08.261 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 17:16:08.271 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 17:16:08.271 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 17:16:08.271 +03:00 [INF] HTTP GET /api/Expense/history responded 403 in 5.7666 ms
2025-05-06 17:16:08.272 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 403 0 null 11.7446ms
2025-05-06 17:16:26.028 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 17:16:26.034 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi)'
2025-05-06 17:16:26.080 +03:00 [INF] Route matched with {action = "GetAllPending", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetAllPending() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:16:27.667 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:16:28.733 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__status_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Status] = @__status_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:16:28.796 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1122.6628ms.
2025-05-06 17:16:28.810 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:16:28.864 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi) in 2777.5143ms
2025-05-06 17:16:28.866 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi)'
2025-05-06 17:16:28.867 +03:00 [INF] HTTP GET /api/Expense/pending responded 200 in 2838.5951 ms
2025-05-06 17:16:28.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 200 null application/json; charset=utf-8 2848.1861ms
2025-05-06 17:17:50.391 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:17:50.892 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:17:50.892 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:17:50.894 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:17:50.894 +03:00 [INF] Hosting environment: Development
2025-05-06 17:17:50.895 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:17:51.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:17:52.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 594.1814ms
2025-05-06 17:17:52.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:17:52.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:17:52.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.0569ms
2025-05-06 17:17:52.257 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.7546ms
2025-05-06 17:17:54.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:17:54.621 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 337.9629ms
2025-05-06 17:18:10.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:18:11.013 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:18:11'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 17:18:11.053 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:18:11'.
2025-05-06 17:18:11.071 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 17:18:11.080 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 17:18:11.085 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 299.2333 ms
2025-05-06 17:18:11.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 316.8244ms
2025-05-06 17:18:49.097 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:18:49.147 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:18:49'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 17:18:49.148 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:18:49'.
2025-05-06 17:18:49.151 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 17:18:49.151 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 17:18:49.151 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 14.7045 ms
2025-05-06 17:18:49.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 56.04ms
2025-05-06 17:19:13.235 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 17:19:13.238 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:19:13'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 17:19:13.239 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 14:12:23', Current time (UTC): '6.05.2025 14:19:13'.
2025-05-06 17:19:13.243 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:19:13.291 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 17:19:14.793 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:19:15.651 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:19:15.773 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 975.2254ms.
2025-05-06 17:19:15.778 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 17:19:15.793 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2499.0094ms
2025-05-06 17:19:15.794 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:19:15.795 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2558.6942 ms
2025-05-06 17:19:15.801 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2566.7176ms
2025-05-06 17:19:54.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:19:54.793 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:19:54.802 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:19:54.893 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:19:55.021 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 218.3188ms
2025-05-06 17:19:55.022 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:19:55.023 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 299.5214 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:19:55.054 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:19:55.061 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 340.9584ms
2025-05-06 17:27:45.321 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:27:46.089 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:27:46.090 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:27:46.093 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:27:46.093 +03:00 [INF] Hosting environment: Development
2025-05-06 17:27:46.094 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:27:47.405 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:27:47.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 569.1952ms
2025-05-06 17:27:47.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:27:47.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.2647ms
2025-05-06 17:27:47.991 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:27:48.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.3115ms
2025-05-06 17:27:50.813 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:27:51.059 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.1097ms
2025-05-06 17:28:07.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:28:08.111 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:28:08.155 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:28:09.711 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:28:09.811 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 1651.0261ms
2025-05-06 17:28:09.812 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:28:09.816 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 1958.9943 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:28:09.867 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:28:09.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 2037.049ms
2025-05-06 17:28:40.432 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:28:40.459 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:28:40.459 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:28:40.563 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:28:40.640 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 180.4353ms
2025-05-06 17:28:40.641 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:28:40.642 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 188.4932 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:28:40.644 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:28:40.646 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 214.832ms
2025-05-06 17:29:30.329 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryXWma39IWBXoVT7ca 531678
2025-05-06 17:29:30.365 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:29:30.382 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:29:30.649 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 17:29:30.677 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 294.8949ms
2025-05-06 17:29:30.678 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:29:30.679 +03:00 [INF] HTTP POST /api/Expense responded 400 in 326.9212 ms
2025-05-06 17:29:30.685 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 400 null application/problem+json; charset=utf-8 356.553ms
2025-05-06 17:29:39.956 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary8y0iz479AjQk0rZa 531682
2025-05-06 17:29:39.958 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:29:39.958 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:29:40.100 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:29:40.175 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 217.1625ms
2025-05-06 17:29:40.176 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:29:40.176 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 220.0571 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method53(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:29:40.179 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 72
   at lambda_method53(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:29:40.187 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 231.4537ms
2025-05-06 17:34:26.116 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:34:26.747 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:34:26.747 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:34:26.750 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:34:26.750 +03:00 [INF] Hosting environment: Development
2025-05-06 17:34:26.750 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:34:27.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:34:28.327 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 569.07ms
2025-05-06 17:34:28.365 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:34:28.372 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.8572ms
2025-05-06 17:34:28.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:34:28.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.9313ms
2025-05-06 17:34:30.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:34:30.347 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.6156ms
2025-05-06 17:34:49.014 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 17:34:49.176 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:34:49.213 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 17:34:50.695 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:34:51.694 +03:00 [INF] Executed DbCommand (159ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:34:51.858 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1157.695ms.
2025-05-06 17:34:51.866 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 17:34:51.883 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2666.8489ms
2025-05-06 17:34:51.884 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:34:51.887 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2861.9604 ms
2025-05-06 17:34:51.898 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2884.0872ms
2025-05-06 17:35:16.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:35:16.874 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:35:16.878 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:35:16.970 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:35:17.065 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 187.0173ms
2025-05-06 17:35:17.067 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:35:17.068 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 264.7730 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:35:17.109 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:35:17.122 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 322.6909ms
2025-05-06 17:35:28.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:35:28.185 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:35:28.186 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:35:28.228 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:35:28.283 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 97.3632ms
2025-05-06 17:35:28.284 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:35:28.284 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 104.0768 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:35:28.286 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:35:28.290 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 113.1799ms
2025-05-06 17:38:06.531 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:38:07.232 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:38:07.232 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:38:07.235 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:38:07.235 +03:00 [INF] Hosting environment: Development
2025-05-06 17:38:07.235 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:38:08.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:38:08.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 682.4418ms
2025-05-06 17:38:08.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:38:08.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:38:08.891 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.3072ms
2025-05-06 17:38:08.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 112.1772ms
2025-05-06 17:38:10.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:38:10.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 347.2325ms
2025-05-06 17:38:28.721 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:38:29.015 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:38:29.061 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:38:30.658 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:38:33.987 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 4921.4322ms
2025-05-06 17:38:33.994 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:38:34.006 +03:00 [ERR] HTTP GET /api/Expense/active responded 500 in 5275.5745 ms
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 17:38:34.058 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: User ID not found.
   at Expense_Management_System.WebApi.Controllers.BaseController.get_CurrentUserId() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\BaseController.cs:line 12
   at Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 31
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 17:38:39.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 500 null text/plain; charset=utf-8 11088.0573ms
2025-05-06 17:41:38.199 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:41:38.974 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:41:38.974 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:41:38.977 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:41:38.978 +03:00 [INF] Hosting environment: Development
2025-05-06 17:41:38.978 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:41:39.855 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:41:40.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 562.7138ms
2025-05-06 17:41:40.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:41:40.485 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.3894ms
2025-05-06 17:41:40.926 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:41:41.856 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 931.1772ms
2025-05-06 17:41:42.749 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:41:43.091 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 342.9837ms
2025-05-06 17:42:01.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/claims - null null
2025-05-06 17:42:02.195 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi)'
2025-05-06 17:42:02.221 +03:00 [INF] Route matched with {action = "GetClaims", controller = "Expense"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetClaims() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:42:03.522 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:42:03.529 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.6925ms.
2025-05-06 17:42:03.537 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectEnumerableIterator`2[[System.Security.Claims.Claim, System.Security.Claims, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a],[<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Expense_Management_System.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:42:03.556 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi) in 1331.6391ms
2025-05-06 17:42:03.556 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi)'
2025-05-06 17:42:03.558 +03:00 [INF] HTTP GET /api/Expense/claims responded 200 in 1577.7116 ms
2025-05-06 17:42:03.564 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/claims - 200 null application/json; charset=utf-8 1593.5993ms
2025-05-06 17:44:53.557 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 17:44:54.064 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 17:44:54.065 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 17:44:54.067 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 17:44:54.067 +03:00 [INF] Hosting environment: Development
2025-05-06 17:44:54.067 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 17:44:55.213 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 17:44:55.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 467.6997ms
2025-05-06 17:44:55.716 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 17:44:55.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 17:44:55.728 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.7266ms
2025-05-06 17:44:55.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.683ms
2025-05-06 17:44:57.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 17:44:57.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.8263ms
2025-05-06 17:45:15.740 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 17:45:17.686 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:45:17.725 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 17:45:19.545 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:45:21.243 +03:00 [INF] Executed DbCommand (259ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 17:45:21.455 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1904.8469ms.
2025-05-06 17:45:21.462 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 17:45:21.479 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3749.8986ms
2025-05-06 17:45:21.480 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 17:45:21.483 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 5734.7866 ms
2025-05-06 17:45:21.492 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 5752.948ms
2025-05-06 17:45:55.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/claims - null null
2025-05-06 17:45:55.134 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi)'
2025-05-06 17:45:55.137 +03:00 [INF] Route matched with {action = "GetClaims", controller = "Expense"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetClaims() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:45:55.213 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:45:55.215 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.4701ms.
2025-05-06 17:45:55.216 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectEnumerableIterator`2[[System.Security.Claims.Claim, System.Security.Claims, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a],[<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], Expense_Management_System.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:45:55.226 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi) in 89.2656ms
2025-05-06 17:45:55.226 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetClaims (Expense_Management_System.WebApi)'
2025-05-06 17:45:55.226 +03:00 [INF] HTTP GET /api/Expense/claims responded 200 in 171.4735 ms
2025-05-06 17:45:55.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/claims - 200 null application/json; charset=utf-8 175.9444ms
2025-05-06 17:46:01.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:46:01.402 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:46:01.419 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:46:01.505 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:46:01.595 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:46:01.634 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 128.7588ms.
2025-05-06 17:46:01.636 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:46:01.665 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 245.3004ms
2025-05-06 17:46:01.665 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:46:01.665 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 285.1670 ms
2025-05-06 17:46:01.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 293.0204ms
2025-05-06 17:46:22.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 17:46:22.233 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 17:46:22.241 +03:00 [INF] Route matched with {action = "GetExpenseHistory", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetExpenseHistory() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:46:22.275 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:46:22.290 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 1 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:46:22.292 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.1349ms.
2025-05-06 17:46:22.293 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:46:22.293 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) in 52.1348ms
2025-05-06 17:46:22.293 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 17:46:22.293 +03:00 [INF] HTTP GET /api/Expense/history responded 200 in 64.5901 ms
2025-05-06 17:46:22.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 200 null application/json; charset=utf-8 67.0104ms
2025-05-06 17:46:27.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/rejected - null null
2025-05-06 17:46:27.246 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:46:27.250 +03:00 [INF] Route matched with {action = "GetRejectedExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetRejectedExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:46:27.281 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:46:27.299 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 2 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:46:27.300 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.7516ms.
2025-05-06 17:46:27.300 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:46:27.300 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) in 50.5421ms
2025-05-06 17:46:27.300 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:46:27.300 +03:00 [INF] HTTP GET /api/Expense/rejected responded 200 in 54.9720 ms
2025-05-06 17:46:27.301 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/rejected - 200 null application/json; charset=utf-8 55.9999ms
2025-05-06 17:47:27.612 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryslAQ2WkAbCWW0uBq 531710
2025-05-06 17:47:27.626 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:47:27.640 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:47:27.861 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:47:28.234 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 17:47:28.307 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 446.5395ms.
2025-05-06 17:47:28.308 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:47:28.320 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 680.1765ms
2025-05-06 17:47:28.320 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 17:47:28.320 +03:00 [INF] HTTP POST /api/Expense responded 200 in 705.1642 ms
2025-05-06 17:47:28.328 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 200 null application/json; charset=utf-8 716.9559ms
2025-05-06 17:49:19.900 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c - null null
2025-05-06 17:49:19.917 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:49:19.920 +03:00 [INF] Route matched with {action = "GetById", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:49:19.957 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:49:20.051 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:49:20.054 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 96.8286ms.
2025-05-06 17:49:20.054 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:49:20.054 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) in 133.8159ms
2025-05-06 17:49:20.054 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:49:20.054 +03:00 [INF] HTTP GET /api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c responded 200 in 152.1056 ms
2025-05-06 17:49:20.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c - 200 null application/json; charset=utf-8 155.3271ms
2025-05-06 17:49:31.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 17:49:31.968 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:49:31.968 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:49:32.000 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:49:32.035 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:49:32.036 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35.7897ms.
2025-05-06 17:49:32.036 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:49:32.037 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 68.1666ms
2025-05-06 17:49:32.037 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:49:32.037 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 69.9457 ms
2025-05-06 17:49:32.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 71.8565ms
2025-05-06 17:49:38.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 17:49:38.419 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 17:49:38.419 +03:00 [INF] Route matched with {action = "GetExpenseHistory", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetExpenseHistory() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:49:38.455 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:49:38.462 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 1 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:49:38.462 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.4375ms.
2025-05-06 17:49:38.462 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:49:38.462 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) in 43.3067ms
2025-05-06 17:49:38.462 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 17:49:38.462 +03:00 [INF] HTTP GET /api/Expense/history responded 200 in 44.0702 ms
2025-05-06 17:49:38.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 200 null application/json; charset=utf-8 45.296ms
2025-05-06 17:49:44.922 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/rejected - null null
2025-05-06 17:49:44.923 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:49:44.924 +03:00 [INF] Route matched with {action = "GetRejectedExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetRejectedExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:49:44.987 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:49:44.995 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 2 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 17:49:44.995 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 8.4234ms.
2025-05-06 17:49:44.996 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:49:44.996 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) in 72.2979ms
2025-05-06 17:49:44.996 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 17:49:44.996 +03:00 [INF] HTTP GET /api/Expense/rejected responded 200 in 73.8090 ms
2025-05-06 17:49:44.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/rejected - 200 null application/json; charset=utf-8 76.19ms
2025-05-06 17:52:52.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 17:52:52.439 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 17:52:52.444 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 17:52:52.444 +03:00 [INF] HTTP GET /api/Expense/pending responded 403 in 36.9967 ms
2025-05-06 17:52:52.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 403 0 null 43.3395ms
2025-05-06 17:53:38.218 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - null 0
2025-05-06 17:53:38.221 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 17:53:38.221 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 17:53:38.221 +03:00 [INF] HTTP POST /api/Expense/approve/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 responded 403 in 1.7562 ms
2025-05-06 17:53:38.221 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - 403 0 null 3.4237ms
2025-05-06 17:53:56.194 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/reject/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - application/json 32
2025-05-06 17:53:56.199 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 17:53:56.199 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 17:53:56.199 +03:00 [INF] HTTP POST /api/Expense/reject/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 responded 403 in 3.9826 ms
2025-05-06 17:53:56.210 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/reject/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32 - 403 0 null 5.4796ms
2025-05-06 17:54:02.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c - null null
2025-05-06 17:54:02.435 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:54:02.435 +03:00 [INF] Route matched with {action = "GetById", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:54:02.493 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:54:02.511 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:54:02.512 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.8228ms.
2025-05-06 17:54:02.512 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 17:54:02.513 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) in 77.858ms
2025-05-06 17:54:02.513 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 17:54:02.513 +03:00 [INF] HTTP GET /api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c responded 200 in 78.9658 ms
2025-05-06 17:54:02.514 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8c - 200 null application/json; charset=utf-8 80.4894ms
2025-05-06 17:54:38.968 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f - null null
2025-05-06 17:54:38.969 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:54:38.990 +03:00 [INF] Route matched with {action = "Delete", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.String]] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:54:39.022 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 17:54:39.029 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 17:54:39.062 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p15='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [Amount] = @p0, [ApprovedAt] = @p1, [ApprovedByUserId] = @p2, [Description] = @p3, [ExpenseCategoryId] = @p4, [InsertedDate] = @p5, [InsertedUser] = @p6, [IsActive] = @p7, [PaymentLocation] = @p8, [PaymentMethod] = @p9, [RejectionReason] = @p10, [Status] = @p11, [UpdatedDate] = @p12, [UpdatedUser] = @p13, [UserId] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-05-06 17:54:39.091 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 17:54:39.434 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 411.2536ms.
2025-05-06 17:54:39.434 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 17:54:39.437 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) in 447.0626ms
2025-05-06 17:54:39.437 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 17:54:39.437 +03:00 [INF] HTTP DELETE /api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f responded 200 in 468.7837 ms
2025-05-06 17:54:39.437 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f - 200 null application/json; charset=utf-8 469.6471ms
2025-05-06 17:55:17.264 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f - application/json 250
2025-05-06 17:55:17.284 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:55:17.292 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:55:17.379 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 17:55:17.409 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 117.2875ms
2025-05-06 17:55:17.409 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:55:17.409 +03:00 [INF] HTTP PUT /api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f responded 400 in 145.6191 ms
2025-05-06 17:55:17.410 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f8f - 400 null application/problem+json; charset=utf-8 146.6694ms
2025-05-06 17:57:34.829 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f85 - application/json 250
2025-05-06 17:57:34.865 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:57:34.867 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 17:57:34.879 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 17:57:34.879 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 12.1643ms
2025-05-06 17:57:34.879 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 17:57:34.879 +03:00 [INF] HTTP PUT /api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f85 responded 400 in 48.2233 ms
2025-05-06 17:57:34.880 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/f70dd5e2-226e-4c5c-9555-b9621d7b9f85 - 400 null application/problem+json; charset=utf-8 50.5831ms
2025-05-06 18:16:30.408 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 18:16:30.471 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 18:16:30.473 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 18:16:30.473 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 18:16:30.521 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-06 18:16:30.531 +03:00 [INF] Applying migration '20250506151621_updateExpenseDocument'.
2025-05-06 18:16:30.615 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ExpenseDocuments] ADD [FileName] nvarchar(250) NOT NULL DEFAULT N'';
2025-05-06 18:16:30.632 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506151621_updateExpenseDocument', N'8.0.0');
2025-05-06 18:19:21.846 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:19:22.504 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:19:22.504 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:19:22.508 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:19:22.508 +03:00 [INF] Hosting environment: Development
2025-05-06 18:19:22.508 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:19:23.922 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:19:25.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1665.8063ms
2025-05-06 18:19:25.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:19:25.588 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:19:25.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 19.4376ms
2025-05-06 18:19:25.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.5293ms
2025-05-06 18:19:27.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:19:27.992 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 286.8468ms
2025-05-06 18:19:38.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:19:38.959 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:19:38.992 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:19:40.359 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:19:41.255 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 18:19:41.385 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1021.8428ms.
2025-05-06 18:19:41.394 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:19:41.439 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 2442.3877ms
2025-05-06 18:19:41.440 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:19:41.444 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 2713.4771 ms
2025-05-06 18:19:41.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 2732.6822ms
2025-05-06 18:20:15.271 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryNHryWHQoBTrxZoYD 72376
2025-05-06 18:20:15.298 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:20:15.317 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:20:15.666 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:20:15.953 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 18:20:15.991 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Expenses_ExpenseCategories_ExpenseCategoryId". The conflict occurred in database "ExpenseManagementDB", table "dbo.ExpenseCategories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:983b4a8e-0651-4bfd-8f03-41e91613b6b2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Expenses_ExpenseCategories_ExpenseCategoryId". The conflict occurred in database "ExpenseManagementDB", table "dbo.ExpenseCategories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:983b4a8e-0651-4bfd-8f03-41e91613b6b2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 18:20:16.301 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 984.0932ms
2025-05-06 18:20:16.303 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:20:16.304 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 1012.4043 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Expenses_ExpenseCategories_ExpenseCategoryId". The conflict occurred in database "ExpenseManagementDB", table "dbo.ExpenseCategories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:983b4a8e-0651-4bfd-8f03-41e91613b6b2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 85
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 18:20:16.353 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Expenses_ExpenseCategories_ExpenseCategoryId". The conflict occurred in database "ExpenseManagementDB", table "dbo.ExpenseCategories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:983b4a8e-0651-4bfd-8f03-41e91613b6b2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 85
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 18:20:16.372 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 1101.4597ms
2025-05-06 18:20:41.362 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarydEdNvEqGJ1YAkfCO 72376
2025-05-06 18:20:41.440 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:41'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:20:41.442 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:41'.
2025-05-06 18:20:41.449 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:20:41.459 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:20:41.459 +03:00 [INF] HTTP POST /api/Expense responded 401 in 93.2451 ms
2025-05-06 18:20:41.459 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 97.5489ms
2025-05-06 18:20:47.006 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundary4kj4yAOEyR070RA2 72376
2025-05-06 18:20:47.072 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:47'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:20:47.072 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:47'.
2025-05-06 18:20:47.073 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:20:47.074 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:20:47.074 +03:00 [INF] HTTP POST /api/Expense responded 401 in 63.7568 ms
2025-05-06 18:20:47.075 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 68.8499ms
2025-05-06 18:20:51.703 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarymflqM7ssdVYYV908 72376
2025-05-06 18:20:51.705 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:51'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:20:51.706 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:51'.
2025-05-06 18:20:51.706 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:20:51.706 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:20:51.706 +03:00 [INF] HTTP POST /api/Expense responded 401 in 1.9814 ms
2025-05-06 18:20:51.706 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 3.4095ms
2025-05-06 18:20:54.053 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryT8D6gVWjYRhsQy5k 72376
2025-05-06 18:20:54.078 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:54'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:20:54.079 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:54'.
2025-05-06 18:20:54.079 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:20:54.079 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:20:54.079 +03:00 [INF] HTTP POST /api/Expense responded 401 in 25.3344 ms
2025-05-06 18:20:54.079 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 26.4272ms
2025-05-06 18:20:58.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:20:58.335 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:58'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:20:58.335 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:20:58'.
2025-05-06 18:20:58.336 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:20:58.336 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:20:58.336 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 2.1911 ms
2025-05-06 18:20:58.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 4.6254ms
2025-05-06 18:21:25.786 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 18:21:25.789 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:21:25'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 18:21:25.790 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 15:15:21', Current time (UTC): '6.05.2025 15:21:25'.
2025-05-06 18:21:25.792 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:21:25.804 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 18:21:25.924 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:21:25.952 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 18:21:26.015 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.3779ms.
2025-05-06 18:21:26.016 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 18:21:26.018 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 213.1809ms
2025-05-06 18:21:26.018 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:21:26.018 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 231.2549 ms
2025-05-06 18:21:26.024 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 239.6662ms
2025-05-06 18:22:02.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:22:02.636 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:22:02.639 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:22:02.639 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:22:02.639 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:22:02.639 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 26.5696 ms
2025-05-06 18:22:02.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 27.8858ms
2025-05-06 18:22:23.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:22:23.953 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:22:23.959 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:22:23.959 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:22:23.959 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:22:23.960 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 52.2488 ms
2025-05-06 18:22:23.967 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 53.6944ms
2025-05-06 18:22:30.970 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryaBZUz6UxBXLnPkwv 72376
2025-05-06 18:22:30.985 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:22:30.993 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:22:30.993 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:22:30.993 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:22:30.993 +03:00 [INF] HTTP POST /api/Expense responded 401 in 22.7390 ms
2025-05-06 18:22:30.993 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 401 0 null 23.5593ms
2025-05-06 18:26:22.460 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:26:23.044 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:26:23.045 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:26:23.047 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:26:23.048 +03:00 [INF] Hosting environment: Development
2025-05-06 18:26:23.048 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:26:24.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:26:24.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 562.2114ms
2025-05-06 18:26:24.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:26:24.760 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:26:24.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.9056ms
2025-05-06 18:26:24.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.1762ms
2025-05-06 18:26:27.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:26:27.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 296.7848ms
2025-05-06 18:26:40.294 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:26:40.521 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:26:40.547 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:26:40.555 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:26:40.561 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:26:40.564 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 256.3498 ms
2025-05-06 18:26:40.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 272.363ms
2025-05-06 18:27:17.913 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:27:17.965 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:27:17.965 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:27:17.967 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:27:17.967 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:27:17.967 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 29.3780 ms
2025-05-06 18:27:17.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 54.9426ms
2025-05-06 18:28:43.972 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:28:44.571 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:28:44.572 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:28:44.575 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:28:44.575 +03:00 [INF] Hosting environment: Development
2025-05-06 18:28:44.575 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:28:45.469 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:28:45.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 492.932ms
2025-05-06 18:28:46.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:28:46.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:28:46.056 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.2393ms
2025-05-06 18:28:46.123 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.6445ms
2025-05-06 18:28:47.768 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:28:48.124 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 356.1761ms
2025-05-06 18:29:01.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:29:02.048 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:29:02.086 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:29:02.094 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:29:02.101 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:29:02.104 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 213.4535 ms
2025-05-06 18:29:02.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 226.0547ms
2025-05-06 18:29:27.546 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 18:29:27.555 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-05-06 18:29:27.556 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-05-06 18:29:27.559 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:29:27.596 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 18:29:28.901 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:29:29.846 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 18:29:29.980 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1073.5783ms.
2025-05-06 18:29:29.985 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 18:29:30.003 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2401.4789ms
2025-05-06 18:29:30.004 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:29:30.005 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2456.5316 ms
2025-05-06 18:29:30.016 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2469.8981ms
2025-05-06 18:29:57.485 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:29:57.563 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:29:57.568 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:29:57.661 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:29:57.726 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 18:29:57.798 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 136.498ms.
2025-05-06 18:29:57.799 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:29:57.841 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 273.7096ms
2025-05-06 18:29:57.842 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:29:57.842 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 343.7029 ms
2025-05-06 18:29:57.846 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 360.8218ms
2025-05-06 18:36:00.095 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:36:00.776 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:36:00.777 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:36:00.780 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:36:00.781 +03:00 [INF] Hosting environment: Development
2025-05-06 18:36:00.781 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:36:02.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:36:03.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1604.1727ms
2025-05-06 18:36:03.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:36:03.927 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:36:03.933 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.4954ms
2025-05-06 18:36:04.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.3277ms
2025-05-06 18:36:06.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:36:06.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 309.7518ms
2025-05-06 18:36:15.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:36:15.374 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:36:15.414 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:36:16.874 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:36:17.949 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 18:36:18.121 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1239.0072ms.
2025-05-06 18:36:18.134 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:36:18.189 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 2770.5886ms
2025-05-06 18:36:18.190 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:36:18.195 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 3067.3278 ms
2025-05-06 18:36:18.202 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 3087.0637ms
2025-05-06 18:36:54.312 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryNlCgXxNKBy2gGM5Y 159636
2025-05-06 18:36:54.343 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:36:54.374 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:36:54.793 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:36:55.053 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 18:36:55.267 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 892.5734ms
2025-05-06 18:36:55.268 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:36:55.270 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 932.0870 ms
System.IO.DirectoryNotFoundException: Could not find a part of the path 'D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\wwwroot\uploads\1be81114-e5ec-4e31-92f0-db223709e5a4.png'.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 113
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 18:36:55.307 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.DirectoryNotFoundException: Could not find a part of the path 'D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\wwwroot\uploads\1be81114-e5ec-4e31-92f0-db223709e5a4.png'.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 113
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 18:36:55.323 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 1010.4845ms
2025-05-06 18:40:17.460 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:40:18.080 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:40:18.081 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:40:18.084 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:40:18.084 +03:00 [INF] Hosting environment: Development
2025-05-06 18:40:18.084 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:40:19.099 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:40:19.552 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 469.4105ms
2025-05-06 18:40:19.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:40:19.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:40:19.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.6156ms
2025-05-06 18:40:19.659 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.0122ms
2025-05-06 18:40:21.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:40:21.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 526.5017ms
2025-05-06 18:40:35.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:40:35.360 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:40:35.383 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:40:36.594 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:40:37.492 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 18:40:37.644 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1044.8317ms.
2025-05-06 18:40:37.655 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:40:37.708 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 2320.3404ms
2025-05-06 18:40:37.709 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:40:37.715 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 2557.7643 ms
2025-05-06 18:40:37.727 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 2580.8819ms
2025-05-06 18:41:15.420 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarybUd7BxLPEEjlAOd5 159632
2025-05-06 18:41:15.444 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:41:15.458 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 18:41:15.878 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:41:16.268 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 18:41:16.414 +03:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 250), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (Size = 250), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseDocuments] ([Id], [ExpenseId], [FileName], [FilePath], [InsertedDate], [InsertedUser], [IsActive], [UpdatedDate], [UpdatedUser], [UploadDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-06 18:41:16.453 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3cca4b85-287e-46ce-b8dd-5066b1f28a73
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3cca4b85-287e-46ce-b8dd-5066b1f28a73
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 18:41:16.817 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 1359.0073ms
2025-05-06 18:41:16.818 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 18:41:16.819 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 1394.3418 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3cca4b85-287e-46ce-b8dd-5066b1f28a73
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 105
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 18:41:16.847 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3cca4b85-287e-46ce-b8dd-5066b1f28a73
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 105
   at lambda_method151(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 18:41:16.866 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 1446.2905ms
2025-05-06 18:45:44.383 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:45:44.963 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:45:44.969 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:45:44.973 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:45:44.974 +03:00 [INF] Hosting environment: Development
2025-05-06 18:45:44.974 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:45:46.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:45:47.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 693.4711ms
2025-05-06 18:45:47.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:45:47.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:45:47.248 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.7657ms
2025-05-06 18:45:47.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.3174ms
2025-05-06 18:45:48.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:45:49.243 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 442.728ms
2025-05-06 18:47:01.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - null null
2025-05-06 18:47:01.727 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 18:47:01.737 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:47:01.740 +03:00 [INF] HTTP GET /api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses responded 401 in 192.8539 ms
2025-05-06 18:47:01.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - 401 0 null 220.4976ms
2025-05-06 18:47:12.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 18:47:12.595 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Personnel)
2025-05-06 18:47:12.596 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 18:47:12.596 +03:00 [INF] HTTP GET /api/Expense/active responded 401 in 9.7184 ms
2025-05-06 18:47:12.596 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 401 0 null 15.6992ms
2025-05-06 18:47:36.242 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 18:47:36.265 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:47:36.307 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 18:47:37.803 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:47:38.804 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 18:47:38.956 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1147.7124ms.
2025-05-06 18:47:38.970 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 18:47:38.988 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2676.6577ms
2025-05-06 18:47:38.989 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 18:47:38.990 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2745.7737 ms
2025-05-06 18:47:38.999 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2769.9245ms
2025-05-06 18:48:16.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - null null
2025-05-06 18:48:16.974 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:48:16.984 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:48:17.103 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:48:17.279 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 18:48:17.388 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 283.8429ms.
2025-05-06 18:48:17.390 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:48:17.428 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 443.0442ms
2025-05-06 18:48:17.428 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:48:17.428 +03:00 [INF] HTTP GET /api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses responded 200 in 554.5731 ms
2025-05-06 18:48:17.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - 200 null application/json; charset=utf-8 559.5331ms
2025-05-06 18:48:33.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - null null
2025-05-06 18:48:33.596 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:48:33.596 +03:00 [INF] Route matched with {action = "GetUserExpenses", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetUserExpenses(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:48:33.649 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:48:33.668 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[Email], [t].[FirstName], [t].[InsertedDate], [t].[InsertedUser], [t].[IsActive], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[Role], [t].[UpdatedDate], [t].[UpdatedUser], [t].[WorkPhoneNumber], [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Expenses] AS [e] ON [t].[Id] = [e].[UserId]
ORDER BY [t].[Id]
2025-05-06 18:48:33.670 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.2642ms.
2025-05-06 18:48:33.670 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 18:48:33.670 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi) in 74.1741ms
2025-05-06 18:48:33.670 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetUserExpenses (Expense_Management_System.WebApi)'
2025-05-06 18:48:33.670 +03:00 [INF] HTTP GET /api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses responded 200 in 82.7296 ms
2025-05-06 18:48:33.671 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/f5a3c4b7-7d23-4c6e-91f0-9e0fa54b8f32/expenses - 200 null application/json; charset=utf-8 96.3324ms
2025-05-06 18:49:56.015 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - null null
2025-05-06 18:49:56.030 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:49:56.034 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:49:56.076 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:49:56.114 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 18:49:56.119 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 42.391ms.
2025-05-06 18:49:56.119 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 18:49:56.126 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 91.6807ms
2025-05-06 18:49:56.126 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:49:56.126 +03:00 [INF] HTTP GET /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 responded 200 in 108.6866 ms
2025-05-06 18:49:56.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec74 - 200 null application/json; charset=utf-8 112.3196ms
2025-05-06 18:50:00.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec79 - null null
2025-05-06 18:50:00.932 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:50:00.933 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:50:00.972 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:50:00.989 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 18:50:01.273 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 340.3483ms
2025-05-06 18:50:01.274 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:50:01.276 +03:00 [ERR] HTTP GET /api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec79 responded 500 in 344.2007 ms
System.Exception: Entity with id 48c0bfd5-d43a-4603-bdc3-4b28f3d2ec79 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method260(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 18:50:01.327 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 48c0bfd5-d43a-4603-bdc3-4b28f3d2ec79 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method260(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 18:50:01.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/48c0bfd5-d43a-4603-bdc3-4b28f3d2ec79 - 500 null text/plain; charset=utf-8 406.727ms
2025-05-06 18:53:13.060 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 18:53:13.904 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 18:53:13.905 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 18:53:13.910 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 18:53:13.910 +03:00 [INF] Hosting environment: Development
2025-05-06 18:53:13.910 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 18:53:14.958 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 18:53:15.676 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 738.7056ms
2025-05-06 18:53:15.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 18:53:15.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 18:53:15.735 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.9894ms
2025-05-06 18:53:15.792 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.9417ms
2025-05-06 18:53:18.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 18:53:18.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 424.2154ms
2025-05-06 18:53:43.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 18:53:44.247 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:53:44.294 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:53:45.743 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:53:47.200 +03:00 [INF] Executed DbCommand (145ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 18:53:47.328 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1581.1135ms.
2025-05-06 18:53:47.337 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 18:53:47.371 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 3070.6105ms
2025-05-06 18:53:47.372 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:53:47.375 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 3367.9726 ms
2025-05-06 18:53:47.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 3384.8612ms
2025-05-06 18:53:51.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e317 - null null
2025-05-06 18:53:51.404 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:53:51.404 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 18:53:51.531 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 18:53:51.551 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 18:53:51.764 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 232.6607ms.
2025-05-06 18:53:51.765 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 18:53:51.766 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 361.4705ms
2025-05-06 18:53:51.766 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 18:53:51.767 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e317 responded 200 in 366.4826 ms
2025-05-06 18:53:51.768 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e317 - 200 null application/json; charset=utf-8 370.3348ms
2025-05-06 19:00:13.191 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:00:13.731 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:00:13.732 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:00:13.734 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:00:13.734 +03:00 [INF] Hosting environment: Development
2025-05-06 19:00:13.735 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:00:14.513 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:00:15.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 615.7446ms
2025-05-06 19:00:15.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:00:15.159 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:00:15.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 30.4027ms
2025-05-06 19:00:15.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 490.8974ms
2025-05-06 19:00:17.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:00:17.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.3654ms
2025-05-06 19:00:53.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 19:00:54.086 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 19:00:54.089 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-05-06 19:00:54.092 +03:00 [INF] HTTP GET /api/User responded 403 in 231.4552 ms
2025-05-06 19:00:54.095 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 403 0 null 265.9156ms
2025-05-06 19:00:59.924 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 19:00:59.936 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 19:00:59.968 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 19:01:01.541 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:01:02.449 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 19:01:02.648 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1098.9774ms.
2025-05-06 19:01:02.663 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 19:01:02.716 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 2743.7704ms
2025-05-06 19:01:02.717 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 19:01:02.717 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 2791.1068 ms
2025-05-06 19:01:02.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 2799.7451ms
2025-05-06 19:02:22.226 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:02:22.715 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:02:22.715 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:02:22.718 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:02:22.718 +03:00 [INF] Hosting environment: Development
2025-05-06 19:02:22.719 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:02:23.594 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:02:24.274 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 704.6744ms
2025-05-06 19:02:24.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:02:24.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:02:24.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 17.1492ms
2025-05-06 19:02:24.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 133.3135ms
2025-05-06 19:02:25.802 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:02:26.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 343.2169ms
2025-05-06 19:02:56.738 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:02:57.055 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:02:57.105 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:02:58.527 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:02:59.540 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:02:59.674 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1143.6587ms.
2025-05-06 19:02:59.684 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:02:59.715 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 2604.4684ms
2025-05-06 19:02:59.716 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:02:59.720 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 2938.7243 ms
2025-05-06 19:02:59.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 2992.1404ms
2025-05-06 19:03:03.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e314 - null null
2025-05-06 19:03:03.418 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:03:03.418 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:03:03.580 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:03:03.602 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:03:03.836 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 255.8347ms.
2025-05-06 19:03:03.836 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:03:03.836 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 417.9645ms
2025-05-06 19:03:03.836 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:03:03.836 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e314 responded 200 in 425.6342 ms
2025-05-06 19:03:03.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e314 - 200 null application/json; charset=utf-8 430.2333ms
2025-05-06 19:04:34.891 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:04:35.383 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:04:35.384 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:04:35.386 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:04:35.386 +03:00 [INF] Hosting environment: Development
2025-05-06 19:04:35.386 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:04:36.269 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:04:36.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 510.5374ms
2025-05-06 19:04:36.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:04:36.791 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:04:36.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.9175ms
2025-05-06 19:04:36.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.6367ms
2025-05-06 19:04:38.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:04:38.515 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 227.7009ms
2025-05-06 19:05:13.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:05:14.024 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:05:14.074 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:05:15.688 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:05:16.670 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:05:16.781 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1087.409ms.
2025-05-06 19:05:16.789 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:05:16.822 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 2743.9153ms
2025-05-06 19:05:16.823 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:05:16.826 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 3098.6806 ms
2025-05-06 19:05:16.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 3135.8706ms
2025-05-06 19:05:22.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31d - null null
2025-05-06 19:05:22.343 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:05:22.343 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:05:22.458 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:05:22.480 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:05:22.701 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 357.3502ms
2025-05-06 19:05:22.702 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:05:22.703 +03:00 [ERR] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31d responded 500 in 366.7147 ms
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e31d not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:05:22.753 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e31d not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:05:22.762 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31d - 500 null text/plain; charset=utf-8 428.8505ms
2025-05-06 19:05:50.540 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:05:51.025 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:05:51.025 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:05:51.027 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:05:51.028 +03:00 [INF] Hosting environment: Development
2025-05-06 19:05:51.028 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:05:51.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:05:52.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 500.8007ms
2025-05-06 19:05:52.432 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:05:52.432 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:05:52.441 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.3162ms
2025-05-06 19:05:52.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.2575ms
2025-05-06 19:05:53.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:05:53.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.6972ms
2025-05-06 19:06:31.050 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:06:31.301 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:31.359 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:06:32.769 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:06:33.736 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:06:33.858 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1084.2416ms.
2025-05-06 19:06:33.871 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:06:33.907 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 2543.3669ms
2025-05-06 19:06:33.908 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:33.912 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 2853.4298 ms
2025-05-06 19:06:33.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 2874.3171ms
2025-05-06 19:06:52.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:06:52.332 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:52.332 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:06:52.424 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:06:52.438 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:06:52.439 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.7363ms.
2025-05-06 19:06:52.440 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:06:52.440 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 107.4721ms
2025-05-06 19:06:52.440 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:52.440 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 112.7500 ms
2025-05-06 19:06:52.441 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 116.5927ms
2025-05-06 19:06:57.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e312 - null null
2025-05-06 19:06:57.970 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:57.970 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:06:58.052 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:06:58.059 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:06:58.257 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 286.4654ms
2025-05-06 19:06:58.258 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:06:58.259 +03:00 [ERR] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e312 responded 500 in 294.3926 ms
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e312 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:06:58.301 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e312 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:06:58.309 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e312 - 500 null text/plain; charset=utf-8 345.7856ms
2025-05-06 19:09:32.535 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:09:33.191 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:09:33.192 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:09:33.194 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:09:33.195 +03:00 [INF] Hosting environment: Development
2025-05-06 19:09:33.195 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:09:34.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:09:34.776 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 540.4028ms
2025-05-06 19:09:34.797 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:09:34.799 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:09:34.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.1357ms
2025-05-06 19:09:34.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.8157ms
2025-05-06 19:09:36.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:09:37.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 317.2302ms
2025-05-06 19:10:15.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:10:15.713 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:10:15.754 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:10:17.297 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:10:18.444 +03:00 [INF] Executed DbCommand (163ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:10:18.662 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1355.2845ms.
2025-05-06 19:10:18.679 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:10:18.734 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 2974.12ms
2025-05-06 19:10:18.735 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:10:18.740 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 3302.7793 ms
2025-05-06 19:10:18.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 3325.3266ms
2025-05-06 19:10:25.162 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e314 - null null
2025-05-06 19:10:25.172 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:10:25.173 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:10:25.273 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:10:25.290 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:10:25.472 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 299.4819ms
2025-05-06 19:10:25.473 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:10:25.474 +03:00 [ERR] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e314 responded 500 in 307.7958 ms
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e314 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:10:25.544 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 7737c586-19b4-4b30-9734-de656451e314 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.UserController.GetById(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 42
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:10:25.554 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e314 - 500 null text/plain; charset=utf-8 392.2169ms
2025-05-06 19:11:56.285 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:11:56.919 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:11:56.920 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:11:56.924 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:11:56.925 +03:00 [INF] Hosting environment: Development
2025-05-06 19:11:56.925 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:11:58.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:11:58.622 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 632.6675ms
2025-05-06 19:11:58.667 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:11:58.667 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:11:58.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.7557ms
2025-05-06 19:11:58.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.5074ms
2025-05-06 19:12:00.794 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:12:01.120 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 326.7575ms
2025-05-06 19:12:30.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - null null
2025-05-06 19:12:30.841 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:12:30.882 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:12:32.346 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:12:33.546 +03:00 [INF] Executed DbCommand (132ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:12:33.755 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1401.4744ms.
2025-05-06 19:12:33.773 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:12:33.856 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 2969.1827ms
2025-05-06 19:12:33.857 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:12:33.863 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e31e responded 200 in 3280.4400 ms
2025-05-06 19:12:33.875 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e31e - 200 null application/json; charset=utf-8 3303.801ms
2025-05-06 19:12:38.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e315 - null null
2025-05-06 19:12:38.566 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:12:38.567 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:12:38.663 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:12:38.680 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:12:38.872 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 209.1494ms.
2025-05-06 19:12:38.873 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:12:38.873 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi) in 306.2399ms
2025-05-06 19:12:38.874 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetById (Expense_Management_System.WebApi)'
2025-05-06 19:12:38.874 +03:00 [INF] HTTP GET /api/User/7737c586-19b4-4b30-9734-de656451e315 responded 200 in 312.3864 ms
2025-05-06 19:12:38.874 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User/7737c586-19b4-4b30-9734-de656451e315 - 200 null application/json; charset=utf-8 317.4464ms
2025-05-06 19:13:24.754 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:13:25.315 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:13:25.316 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:13:25.322 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:13:25.323 +03:00 [INF] Hosting environment: Development
2025-05-06 19:13:25.323 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:13:26.274 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:13:26.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 477.3526ms
2025-05-06 19:13:26.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:13:26.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:13:26.766 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.9001ms
2025-05-06 19:13:26.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.3405ms
2025-05-06 19:15:26.740 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:15:27.560 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:15:27.561 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:15:27.563 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:15:27.564 +03:00 [INF] Hosting environment: Development
2025-05-06 19:15:27.564 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:15:29.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:15:30.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 722.0395ms
2025-05-06 19:15:30.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:15:30.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:15:30.734 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 35.8691ms
2025-05-06 19:15:30.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.2777ms
2025-05-06 19:15:32.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:15:32.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.1315ms
2025-05-06 19:15:52.786 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 19:15:52.989 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 19:15:53.056 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 19:15:54.448 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:15:55.576 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 19:15:55.725 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1272.2785ms.
2025-05-06 19:15:55.732 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 19:15:55.749 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2687.8535ms
2025-05-06 19:15:55.750 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 19:15:55.754 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2950.3856 ms
2025-05-06 19:15:55.767 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2981.4606ms
2025-05-06 19:16:35.852 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/User - null null
2025-05-06 19:16:35.975 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 19:16:35.985 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:16:36.134 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:16:36.187 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
2025-05-06 19:16:36.220 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 85.7597ms.
2025-05-06 19:16:36.222 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 19:16:36.246 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi) in 261.1615ms
2025-05-06 19:16:36.247 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 19:16:36.247 +03:00 [INF] HTTP GET /api/User responded 200 in 390.0495 ms
2025-05-06 19:16:36.251 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/User - 200 null application/json; charset=utf-8 399.4212ms
2025-05-06 19:17:31.819 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/User - application/json 285
2025-05-06 19:17:31.841 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 19:17:31.846 +03:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Create(Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:17:31.944 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:17:31.989 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:17:32.022 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 19:17:32.788 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15), @p13='?' (DbType = Guid), @p14='?' (Size = 20), @p15='?' (Size = 34), @p16='?' (DbType = DateTime2), @p17='?' (Size = 250), @p18='?' (DbType = DateTime2), @p19='?' (Size = 250), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Address], [Email], [FirstName], [InsertedDate], [InsertedUser], [LastName], [PasswordHash], [PhoneNumber], [Role], [UpdatedDate], [UpdatedUser], [WorkPhoneNumber])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [BankAccounts] ([Id], [AccountNumber], [IBAN], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-05-06 19:17:32.843 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 898.2611ms.
2025-05-06 19:17:32.843 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:17:32.846 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi) in 999.8044ms
2025-05-06 19:17:32.846 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Create (Expense_Management_System.WebApi)'
2025-05-06 19:17:32.846 +03:00 [INF] HTTP POST /api/User responded 200 in 1012.5463 ms
2025-05-06 19:17:32.846 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/User - 200 null application/json; charset=utf-8 1028.3904ms
2025-05-06 19:18:28.129 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - application/json 285
2025-05-06 19:18:28.151 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:18:28.158 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:18:28.219 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:18:28.313 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:18:28.319 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:18:28.353 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-06 19:18:28.378 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:18:28.822 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 664.0342ms
2025-05-06 19:18:28.823 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:18:28.824 +03:00 [ERR] HTTP PUT /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 500 in 676.8288 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method364(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:18:28.864 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method364(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:18:28.896 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 500 null text/plain; charset=utf-8 767.1347ms
2025-05-06 19:18:48.769 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - application/json 285
2025-05-06 19:18:48.772 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:18:48.773 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:18:48.858 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:18:48.867 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:18:48.872 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:18:48.880 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-06 19:18:48.887 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.3339ms.
2025-05-06 19:18:48.888 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:18:48.888 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 115.3778ms
2025-05-06 19:18:48.889 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:18:48.889 +03:00 [INF] HTTP PUT /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 200 in 117.4558 ms
2025-05-06 19:18:48.889 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 200 null application/json; charset=utf-8 119.5942ms
2025-05-06 19:21:11.449 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:21:12.101 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:21:12.102 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:21:12.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:21:12.106 +03:00 [INF] Hosting environment: Development
2025-05-06 19:21:12.106 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:21:12.826 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:21:13.506 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 690.1966ms
2025-05-06 19:21:13.533 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:21:13.533 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:21:13.546 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 14.7934ms
2025-05-06 19:21:13.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.9817ms
2025-05-06 19:21:15.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:21:15.741 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 305.3393ms
2025-05-06 19:24:44.167 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 297
2025-05-06 19:24:44.431 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:24:44.476 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:24:46.168 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 19:24:46.199 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 1718.8273ms
2025-05-06 19:24:46.199 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:24:46.201 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 400 in 2021.5713 ms
2025-05-06 19:24:46.208 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 400 null application/problem+json; charset=utf-8 2042.2757ms
2025-05-06 19:25:25.924 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 294
2025-05-06 19:25:25.948 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:25:25.948 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:25:26.045 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 19:25:26.046 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 97.0127ms
2025-05-06 19:25:26.046 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:25:26.046 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 400 in 104.9434 ms
2025-05-06 19:25:26.046 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 400 null application/problem+json; charset=utf-8 122.0209ms
2025-05-06 19:25:37.254 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 292
2025-05-06 19:25:37.259 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:25:37.259 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:25:37.495 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:25:38.715 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:25:38.871 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:25:39.053 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (Size = 15), @p3='?' (DbType = DateTime2), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [LastName] = @p1, [PhoneNumber] = @p2, [UpdatedDate] = @p3, [WorkPhoneNumber] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-05-06 19:25:39.074 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (Size = 15), @p3='?' (DbType = DateTime2), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [LastName] = @p1, [PhoneNumber] = @p2, [UpdatedDate] = @p3, [WorkPhoneNumber] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-05-06 19:25:39.526 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 2266.9562ms
2025-05-06 19:25:39.528 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:25:39.531 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 2276.9170 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:25:39.607 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:25:39.644 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 2390.6813ms
2025-05-06 19:27:35.461 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:27:36.324 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:27:36.334 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:27:36.340 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:27:36.341 +03:00 [INF] Hosting environment: Development
2025-05-06 19:27:36.341 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:27:36.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:27:37.545 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 628.4638ms
2025-05-06 19:27:37.574 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:27:37.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:27:37.605 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 28.2683ms
2025-05-06 19:27:37.663 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.1741ms
2025-05-06 19:27:39.716 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:27:40.024 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.6046ms
2025-05-06 19:28:26.775 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 293
2025-05-06 19:28:27.036 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:28:27.073 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:28:28.313 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:28:29.230 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:28:29.371 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:28:29.490 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-06 19:28:29.513 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:28:29.786 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 2709.1822ms
2025-05-06 19:28:29.788 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:28:29.793 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 2981.7743 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:28:29.835 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 95
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:28:29.868 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 3093.8405ms
2025-05-06 19:29:47.065 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:29:47.784 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:29:47.784 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:29:47.787 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:29:47.787 +03:00 [INF] Hosting environment: Development
2025-05-06 19:29:47.787 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:29:48.738 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:29:49.223 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 500.936ms
2025-05-06 19:29:49.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:29:49.263 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:29:49.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 17.8803ms
2025-05-06 19:29:49.353 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.3866ms
2025-05-06 19:29:50.997 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:29:51.415 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 417.3325ms
2025-05-06 19:30:23.061 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 272
2025-05-06 19:30:23.335 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:30:23.370 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:30:24.733 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:30:25.715 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:30:25.886 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:30:26.129 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0, [UpdatedUser] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:30:26.145 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UpdatedDate] = @p0, [UpdatedUser] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:30:26.542 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 3168.7037ms
2025-05-06 19:30:26.544 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:30:26.548 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 3475.1479 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 97
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:30:26.583 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 97
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:30:26.597 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 3535.8058ms
2025-05-06 19:40:24.481 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:40:25.124 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:40:25.125 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:40:25.128 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:40:25.128 +03:00 [INF] Hosting environment: Development
2025-05-06 19:40:25.128 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:40:26.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:40:26.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 644.7909ms
2025-05-06 19:40:27.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:40:27.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:40:27.392 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.6929ms
2025-05-06 19:40:27.464 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.2575ms
2025-05-06 19:40:29.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:40:29.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 343.075ms
2025-05-06 19:41:28.321 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 292
2025-05-06 19:41:28.564 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:41:28.605 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:41:30.177 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:41:31.194 +03:00 [INF] Executed DbCommand (155ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:41:31.433 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:41:32.045 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:41:32.068 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:41:32.438 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 3830.2591ms
2025-05-06 19:41:32.440 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:41:32.443 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 4114.1702 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 114
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:41:32.491 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 114
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:41:32.528 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 4208.0394ms
2025-05-06 19:41:54.356 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 292
2025-05-06 19:41:54.383 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:41:54.384 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:41:54.510 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:41:54.532 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:41:54.538 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:41:54.949 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:41:54.992 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:41:55.220 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 834.6911ms
2025-05-06 19:41:55.221 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:41:55.221 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 862.3347 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 114
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:41:55.224 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 114
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:41:55.245 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 885.9614ms
2025-05-06 19:43:23.832 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:43:24.442 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:43:24.442 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:43:24.445 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:43:24.445 +03:00 [INF] Hosting environment: Development
2025-05-06 19:43:24.445 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:43:25.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:43:26.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 676.8731ms
2025-05-06 19:43:26.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:43:26.174 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:43:26.185 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.6719ms
2025-05-06 19:43:26.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.2759ms
2025-05-06 19:43:28.482 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:43:28.784 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 302.851ms
2025-05-06 19:43:41.053 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 19:43:41.314 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 19:43:41.351 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 19:43:42.905 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:43:43.845 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 19:43:43.979 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1067.4907ms.
2025-05-06 19:43:43.991 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 19:43:44.029 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 2673.2963ms
2025-05-06 19:43:44.030 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 19:43:44.035 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 2972.0070 ms
2025-05-06 19:43:44.045 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 2991.8217ms
2025-05-06 19:44:22.628 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 284
2025-05-06 19:44:22.635 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:44:22.647 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:44:22.845 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:44:25.998 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:44:27.582 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:45:13.576 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:45:13.617 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:45:13.730 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 51082.0151ms
2025-05-06 19:45:13.731 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:45:13.732 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 51102.0954 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 111
   at lambda_method105(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 19:45:13.785 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 111
   at lambda_method105(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 19:45:13.814 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 51185.926ms
2025-05-06 19:48:34.786 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:48:35.436 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:48:35.437 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:48:35.441 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:48:35.441 +03:00 [INF] Hosting environment: Development
2025-05-06 19:48:35.442 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:48:36.608 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:48:37.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 593.8509ms
2025-05-06 19:48:37.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:48:37.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.3495ms
2025-05-06 19:48:37.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:48:37.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.2065ms
2025-05-06 19:48:39.193 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:48:39.604 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 412.0633ms
2025-05-06 19:49:27.377 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 294
2025-05-06 19:49:27.644 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:49:27.692 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:49:29.157 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:49:34.086 +03:00 [INF] Executed DbCommand (179ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:49:36.028 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:49:54.121 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:49:54.134 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:50:07.243 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 38081.5911ms.
2025-05-06 19:50:07.252 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:50:10.697 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 42998.8108ms
2025-05-06 19:50:10.698 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:50:10.701 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 200 in 43315.8653 ms
2025-05-06 19:50:10.709 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 200 null application/json; charset=utf-8 43332.2313ms
2025-05-06 19:53:27.219 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 19:53:27.870 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 19:53:27.870 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 19:53:27.872 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 19:53:27.873 +03:00 [INF] Hosting environment: Development
2025-05-06 19:53:27.873 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 19:53:28.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 19:53:29.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 764.7043ms
2025-05-06 19:53:29.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 19:53:29.505 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 19:53:29.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.3873ms
2025-05-06 19:53:29.577 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.9761ms
2025-05-06 19:53:31.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 19:53:31.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 387.9962ms
2025-05-06 19:54:01.951 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 294
2025-05-06 19:54:02.175 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:45:55', Current time (UTC): '6.05.2025 16:54:02'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 19:54:02.198 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:45:55', Current time (UTC): '6.05.2025 16:54:02'.
2025-05-06 19:54:02.204 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 19:54:02.209 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 19:54:02.212 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 401 in 228.8576 ms
2025-05-06 19:54:02.213 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 401 0 null 263.0312ms
2025-05-06 19:55:56.242 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 67
2025-05-06 19:55:56.249 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 19:55:56.300 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 19:55:57.817 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:55:58.849 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 19:55:58.973 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1151.624ms.
2025-05-06 19:55:58.979 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 19:55:58.996 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2692.7696ms
2025-05-06 19:55:58.997 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 19:55:58.998 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2754.1507 ms
2025-05-06 19:55:59.006 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2764.6622ms
2025-05-06 19:56:19.947 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 294
2025-05-06 19:56:19.999 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:56:20.009 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:56:20.247 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:56:20.373 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:56:20.419 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:56:21.133 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:56:21.154 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:56:21.531 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1283.686ms.
2025-05-06 19:56:21.532 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:56:21.543 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 1534.4738ms
2025-05-06 19:56:21.543 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:56:21.544 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 200 in 1575.3880 ms
2025-05-06 19:56:21.546 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 200 null application/json; charset=utf-8 1605.0019ms
2025-05-06 19:57:06.413 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 294
2025-05-06 19:57:06.417 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:57:06.418 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 19:57:06.480 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 19:57:06.499 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 19:57:06.506 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 19:57:06.854 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 19:57:06.855 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 19:57:07.106 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 626.4409ms.
2025-05-06 19:57:07.107 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 19:57:07.107 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 689.3069ms
2025-05-06 19:57:07.107 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 19:57:07.107 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 200 in 693.0194 ms
2025-05-06 19:57:07.107 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 200 null application/json; charset=utf-8 694.7366ms
2025-05-06 20:05:45.154 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 20:05:45.794 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 20:05:45.794 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 20:05:45.797 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 20:05:45.797 +03:00 [INF] Hosting environment: Development
2025-05-06 20:05:45.798 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 20:05:46.688 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 20:05:47.862 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1205.1032ms
2025-05-06 20:05:47.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 20:05:47.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 20:05:47.911 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.2084ms
2025-05-06 20:05:47.969 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.5635ms
2025-05-06 20:05:49.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 20:05:50.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 418.6509ms
2025-05-06 20:06:36.570 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 274
2025-05-06 20:06:36.821 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:06:36.861 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:06:38.485 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:06:39.501 +03:00 [INF] Executed DbCommand (166ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:06:39.676 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 20:06:57.616 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 20750.528ms
2025-05-06 20:06:57.618 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:06:57.622 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 21043.5988 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 103
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:06:57.662 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 103
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:06:57.675 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 21105.7287ms
2025-05-06 20:09:08.988 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 20:09:09.630 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 20:09:09.630 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 20:09:09.633 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 20:09:09.633 +03:00 [INF] Hosting environment: Development
2025-05-06 20:09:09.633 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 20:09:10.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 20:09:11.300 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 474.5209ms
2025-05-06 20:09:11.324 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 20:09:11.324 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 20:09:11.334 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.7387ms
2025-05-06 20:09:11.398 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.5086ms
2025-05-06 20:09:12.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 20:09:13.284 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 353.3131ms
2025-05-06 20:09:53.720 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 274
2025-05-06 20:09:53.981 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:09:54.026 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:09:55.487 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:09:56.457 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:09:56.621 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 20:09:57.179 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 20:09:57.204 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 20:09:57.489 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 3459.3962ms
2025-05-06 20:09:57.490 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:09:57.493 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 3743.2549 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 110
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:09:57.555 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 110
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:09:57.592 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 3872.141ms
2025-05-06 20:11:53.786 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:11:53.803 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:11:53.822 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:11:54.002 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:11:54.059 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:11:54.117 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 20:11:54.205 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:11:54.494 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 670.9546ms
2025-05-06 20:11:54.495 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:11:54.496 +03:00 [ERR] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 500 in 704.0768 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:11:54.500 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:11:54.507 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 500 null text/plain; charset=utf-8 721.7116ms
2025-05-06 20:12:10.033 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:12:10.041 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:10.041 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:12:10.095 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:12:10.107 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:12:10.120 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:12:10.155 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 56.2451ms.
2025-05-06 20:12:10.167 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 20:12:10.180 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 138.7425ms
2025-05-06 20:12:10.180 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:10.180 +03:00 [INF] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 200 in 145.4013 ms
2025-05-06 20:12:10.181 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 200 null application/json; charset=utf-8 147.7045ms
2025-05-06 20:12:26.850 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:12:26.901 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:26.902 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:12:26.948 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:12:26.954 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:12:26.961 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 20:12:26.963 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:12:27.169 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 266.7355ms
2025-05-06 20:12:27.170 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:27.170 +03:00 [ERR] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 500 in 319.6275 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:12:27.173 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:12:27.177 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 500 null text/plain; charset=utf-8 327.5997ms
2025-05-06 20:12:29.549 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:12:29.550 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:29.550 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:12:29.607 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:12:29.611 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:12:29.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:12:29.819 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 268.443ms
2025-05-06 20:12:29.819 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:29.820 +03:00 [ERR] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 500 in 270.2289 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:12:29.822 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:12:29.824 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 500 null text/plain; charset=utf-8 274.888ms
2025-05-06 20:12:30.672 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:12:30.673 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:30.673 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:12:30.706 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:12:30.712 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:12:30.721 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 20:12:30.725 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:12:30.965 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 292.0836ms
2025-05-06 20:12:30.965 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:12:30.966 +03:00 [ERR] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 500 in 293.7741 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:12:30.968 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.UserController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 139
   at lambda_method245(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:12:30.971 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 500 null text/plain; charset=utf-8 299.7376ms
2025-05-06 20:17:51.216 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 20:17:51.949 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 20:17:51.949 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 20:17:51.951 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 20:17:51.952 +03:00 [INF] Hosting environment: Development
2025-05-06 20:17:51.952 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 20:17:53.077 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 20:17:55.233 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 2185.2904ms
2025-05-06 20:17:55.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 20:17:55.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 20:17:55.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.3151ms
2025-05-06 20:17:55.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.5698ms
2025-05-06 20:17:57.543 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 20:17:57.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 238.0862ms
2025-05-06 20:18:23.601 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:18:23.844 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:18:23.894 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:18:25.212 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:18:26.099 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:18:26.374 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?' (Size = 200), @p1='?' (Size = 100), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 255), @p8='?' (Size = 15), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 250), @p12='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [Email] = @p1, [FirstName] = @p2, [InsertedDate] = @p3, [InsertedUser] = @p4, [IsActive] = @p5, [LastName] = @p6, [PasswordHash] = @p7, [PhoneNumber] = @p8, [Role] = @p9, [UpdatedDate] = @p10, [UpdatedUser] = @p11, [WorkPhoneNumber] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-05-06 20:18:26.400 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1182.9084ms.
2025-05-06 20:18:26.411 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 20:18:26.422 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 2524.078ms
2025-05-06 20:18:26.422 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:18:26.425 +03:00 [INF] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 200 in 2813.6170 ms
2025-05-06 20:18:26.434 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 200 null application/json; charset=utf-8 2833.5927ms
2025-05-06 20:18:29.703 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - null null
2025-05-06 20:18:29.708 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:18:29.708 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:18:29.784 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:18:29.792 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:18:29.794 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 9.4172ms.
2025-05-06 20:18:29.794 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 20:18:29.794 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi) in 86.0591ms
2025-05-06 20:18:29.794 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Delete (Expense_Management_System.WebApi)'
2025-05-06 20:18:29.794 +03:00 [INF] HTTP DELETE /api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 responded 200 in 90.0553 ms
2025-05-06 20:18:29.795 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/User/99024279-bf3b-4839-bfec-5b2c48aa82c9 - 200 null application/json; charset=utf-8 92.6662ms
2025-05-06 20:21:34.040 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 273
2025-05-06 20:21:34.058 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:21:34.065 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:21:34.215 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:21:34.245 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:21:34.294 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 20:21:34.742 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 20:21:34.774 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 20:21:35.147 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 1082.2065ms
2025-05-06 20:21:35.148 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:21:35.149 +03:00 [ERR] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 500 in 1098.5667 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 63
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 110
   at lambda_method232(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 20:21:35.212 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 63
   at Expense_Management_System.WebApi.Controllers.UserController.Update(Guid id, UserRequest userRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\UserController.cs:line 110
   at lambda_method232(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 20:21:35.233 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 500 null text/plain; charset=utf-8 1195.0678ms
2025-05-06 20:22:02.177 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - application/json 273
2025-05-06 20:22:02.180 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:22:02.180 +03:00 [INF] Route matched with {action = "Update", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.UserResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.UserRequest) on controller Expense_Management_System.WebApi.Controllers.UserController (Expense_Management_System.WebApi).
2025-05-06 20:22:02.232 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:22:02.246 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 20:22:02.253 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 20:22:02.587 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 255), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 20:22:02.609 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 376.7237ms.
2025-05-06 20:22:02.609 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.UserResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 20:22:02.638 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi) in 458.1069ms
2025-05-06 20:22:02.639 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.UserController.Update (Expense_Management_System.WebApi)'
2025-05-06 20:22:02.639 +03:00 [INF] HTTP PUT /api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 responded 200 in 460.0764 ms
2025-05-06 20:22:02.639 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/User/d290f1ee-6c54-4b01-90e6-d701748f0851 - 200 null application/json; charset=utf-8 461.8065ms
2025-05-06 20:38:29.191 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 20:38:29.884 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 20:38:29.885 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 20:38:29.887 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 20:38:29.887 +03:00 [INF] Hosting environment: Development
2025-05-06 20:38:29.887 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 20:38:30.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 20:38:31.497 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 575.1211ms
2025-05-06 20:38:31.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 20:38:31.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 20:38:31.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 18.7435ms
2025-05-06 20:38:31.642 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.5457ms
2025-05-06 20:38:33.365 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 20:38:33.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 323.9734ms
2025-05-06 20:45:23.548 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 20:45:24.345 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 20:45:24.346 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 20:45:24.350 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 20:45:24.351 +03:00 [INF] Hosting environment: Development
2025-05-06 20:45:24.352 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 20:45:25.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 20:45:27.391 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1629.1688ms
2025-05-06 20:45:27.434 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 20:45:27.435 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 20:45:27.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 14.7837ms
2025-05-06 20:45:27.958 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 523.3573ms
2025-05-06 20:45:30.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 20:45:30.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 460.254ms
2025-05-06 20:45:44.680 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 20:45:44.919 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:17:38', Current time (UTC): '6.05.2025 17:45:44'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 20:45:44.948 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:17:38', Current time (UTC): '6.05.2025 17:45:44'.
2025-05-06 20:45:44.955 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 20:45:44.962 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 20:45:44.964 +03:00 [INF] HTTP GET /api/ExpenseDocument responded 401 in 273.6145 ms
2025-05-06 20:45:44.965 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 401 0 null 285.956ms
2025-05-06 20:46:24.216 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 70
2025-05-06 20:46:24.224 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:17:38', Current time (UTC): '6.05.2025 17:46:24'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 20:46:24.225 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 16:17:38', Current time (UTC): '6.05.2025 17:46:24'.
2025-05-06 20:46:24.228 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 20:46:24.269 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 20:46:25.658 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 20:46:26.545 +03:00 [INF] Executed DbCommand (175ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 20:46:26.666 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1004.4855ms.
2025-05-06 20:46:26.671 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 20:46:26.687 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2413.5345ms
2025-05-06 20:46:26.688 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 20:46:26.689 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2470.0974 ms
2025-05-06 20:46:26.698 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2482.7979ms
2025-05-06 20:46:54.458 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 20:46:54.495 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 20:46:54.502 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 20:46:54.528 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:02:56.475 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:02:57.144 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:02:57.145 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:02:57.148 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:02:57.149 +03:00 [INF] Hosting environment: Development
2025-05-06 21:02:57.149 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:02:58.299 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:02:58.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 648.7253ms
2025-05-06 21:02:58.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:02:58.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:02:58.981 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.6049ms
2025-05-06 21:02:59.044 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.5757ms
2025-05-06 21:03:00.873 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:03:01.112 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 239.2133ms
2025-05-06 21:03:36.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 21:03:37.182 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 21:03:37.214 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 21:03:37.335 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:04:21.874 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:04:22.415 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:04:22.415 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:04:22.418 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:04:22.419 +03:00 [INF] Hosting environment: Development
2025-05-06 21:04:22.419 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:04:23.229 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:04:23.747 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 529.1413ms
2025-05-06 21:04:23.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:04:23.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:04:23.818 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 51.3878ms
2025-05-06 21:04:23.882 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.1896ms
2025-05-06 21:04:25.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:04:25.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 315.146ms
2025-05-06 21:04:49.557 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/active - null null
2025-05-06 21:04:49.822 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 21:04:49.850 +03:00 [INF] Route matched with {action = "GetActiveExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetActiveExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:04:51.155 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:04:52.214 +03:00 [INF] Executed DbCommand (233ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 21:04:52.359 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1199.4888ms.
2025-05-06 21:04:52.367 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 21:04:52.414 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi) in 2559.8111ms
2025-05-06 21:04:52.415 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetActiveExpenses (Expense_Management_System.WebApi)'
2025-05-06 21:04:52.418 +03:00 [INF] HTTP GET /api/Expense/active responded 200 in 2828.9698 ms
2025-05-06 21:04:52.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/active - 200 null application/json; charset=utf-8 2871.2231ms
2025-05-06 21:05:16.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/history - null null
2025-05-06 21:05:16.090 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 21:05:16.097 +03:00 [INF] Route matched with {action = "GetExpenseHistory", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetExpenseHistory() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:05:16.196 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:05:16.275 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 1 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 21:05:16.277 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 80.9988ms.
2025-05-06 21:05:16.278 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 21:05:16.278 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi) in 181.5755ms
2025-05-06 21:05:16.278 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetExpenseHistory (Expense_Management_System.WebApi)'
2025-05-06 21:05:16.278 +03:00 [INF] HTTP GET /api/Expense/history responded 200 in 193.9897 ms
2025-05-06 21:05:16.279 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/history - 200 null application/json; charset=utf-8 203.1784ms
2025-05-06 21:05:20.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/rejected - null null
2025-05-06 21:05:20.955 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 21:05:20.960 +03:00 [INF] Route matched with {action = "GetRejectedExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetRejectedExpenses() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:05:21.011 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:05:21.033 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[UserId] = @__userId_0 AND [e].[Status] = 2 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 21:05:21.034 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 22.4712ms.
2025-05-06 21:05:21.034 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 21:05:21.034 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi) in 73.3948ms
2025-05-06 21:05:21.034 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetRejectedExpenses (Expense_Management_System.WebApi)'
2025-05-06 21:05:21.034 +03:00 [INF] HTTP GET /api/Expense/rejected responded 200 in 83.0538 ms
2025-05-06 21:05:21.035 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/rejected - 200 null application/json; charset=utf-8 84.4063ms
2025-05-06 21:06:05.854 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryMpzX0K2djtiNpBE4 531689
2025-05-06 21:06:05.872 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:06:05.890 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:06:06.199 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:06:06.492 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:06:06.579 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 379.245ms.
2025-05-06 21:06:06.580 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 21:06:06.583 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 692.8775ms
2025-05-06 21:06:06.583 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:06:06.583 +03:00 [INF] HTTP POST /api/Expense responded 200 in 726.1634 ms
2025-05-06 21:06:06.591 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 200 null application/json; charset=utf-8 737.0045ms
2025-05-06 21:15:07.703 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:15:08.401 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:15:08.402 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:15:08.404 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:15:08.405 +03:00 [INF] Hosting environment: Development
2025-05-06 21:15:08.405 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:15:09.415 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:15:10.310 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 914.9552ms
2025-05-06 21:15:10.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:15:10.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:15:10.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 20.3864ms
2025-05-06 21:15:10.426 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.7378ms
2025-05-06 21:15:12.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:15:12.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 302.6009ms
2025-05-06 21:15:51.339 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryVTpV9vCxuRBLCO08 936122
2025-05-06 21:15:51.614 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:15:51.656 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:15:53.585 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:15:54.626 +03:00 [INF] Executed DbCommand (210ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:15:54.795 +03:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 250), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (Size = 250), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseDocuments] ([Id], [ExpenseId], [FileName], [FilePath], [InsertedDate], [InsertedUser], [IsActive], [UpdatedDate], [UpdatedUser], [UploadDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-06 21:15:54.821 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:15:55.142 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 3482.3148ms
2025-05-06 21:15:55.143 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:15:55.148 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 3759.2850 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 104
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:15:55.205 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 104
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:15:55.227 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 3888.221ms
2025-05-06 21:16:32.316 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundarypKRkAOSBb11Q1oyy 1095021
2025-05-06 21:16:32.360 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:16:32.361 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:16:32.533 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:16:32.552 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:16:32.566 +03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 250), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (Size = 250), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseDocuments] ([Id], [ExpenseId], [FileName], [FilePath], [InsertedDate], [InsertedUser], [IsActive], [UpdatedDate], [UpdatedUser], [UploadDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-05-06 21:16:32.574 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:16:32.928 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 566.7092ms
2025-05-06 21:16:32.928 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:16:32.929 +03:00 [ERR] HTTP POST /api/Expense responded 500 in 598.7900 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 104
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:16:32.934 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.ExpenseDocuments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e493aff2-de18-4795-bd58-a3e7fae3dedf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Create(ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 104
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:16:32.946 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 500 null text/plain; charset=utf-8 631.1875ms
2025-05-06 21:18:06.478 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:18:07.402 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:18:07.405 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:18:07.417 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:18:07.419 +03:00 [INF] Hosting environment: Development
2025-05-06 21:18:07.419 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:18:08.178 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:18:08.720 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 559.1415ms
2025-05-06 21:18:08.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:18:08.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:18:08.807 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 48.4275ms
2025-05-06 21:18:08.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.6388ms
2025-05-06 21:18:11.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:18:11.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 285.2635ms
2025-05-06 21:18:31.582 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:18:32.101 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:18:32.101 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:18:32.104 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:18:32.104 +03:00 [INF] Hosting environment: Development
2025-05-06 21:18:32.104 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:18:33.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:18:33.882 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:18:33.893 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:18:33.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 632.1367ms
2025-05-06 21:18:33.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 21.5395ms
2025-05-06 21:18:34.017 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.6997ms
2025-05-06 21:18:35.667 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:18:36.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 400.4534ms
2025-05-06 21:19:11.012 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense - multipart/form-data; boundary=----WebKitFormBoundaryB59EDKiEax3BRA9O 386623
2025-05-06 21:19:11.323 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:19:11.392 +03:00 [INF] Route matched with {action = "Create", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:19:13.151 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:19:14.337 +03:00 [INF] Executed DbCommand (219ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (Size = 500), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Expenses] ([Id], [Amount], [ApprovedAt], [ApprovedByUserId], [Description], [ExpenseCategoryId], [InsertedDate], [InsertedUser], [PaymentLocation], [PaymentMethod], [RejectionReason], [Status], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:19:14.505 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 250), @p3='?' (Size = 500), @p4='?' (DbType = DateTime2), @p5='?' (Size = 250), @p6='?' (DbType = DateTime2), @p7='?' (Size = 250), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseDocuments] ([Id], [ExpenseId], [FileName], [FilePath], [InsertedDate], [InsertedUser], [UpdatedDate], [UpdatedUser], [UploadDate])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-05-06 21:19:14.526 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1367.8123ms.
2025-05-06 21:19:14.540 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 21:19:14.604 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi) in 3206.893ms
2025-05-06 21:19:14.604 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Create (Expense_Management_System.WebApi)'
2025-05-06 21:19:14.610 +03:00 [INF] HTTP POST /api/Expense responded 200 in 3566.5912 ms
2025-05-06 21:19:14.631 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense - 200 null application/json; charset=utf-8 3618.435ms
2025-05-06 21:22:03.294 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 21:22:03.322 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:16:26', Current time (UTC): '6.05.2025 18:22:03'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 21:22:03.348 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:16:26', Current time (UTC): '6.05.2025 18:22:03'.
2025-05-06 21:22:03.353 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 21:22:03.363 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 21:22:03.363 +03:00 [INF] HTTP GET /api/Expense/pending responded 401 in 60.4334 ms
2025-05-06 21:22:03.365 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 401 0 null 72.0937ms
2025-05-06 21:23:04.263 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 64
2025-05-06 21:23:04.280 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 21:23:04.322 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 21:23:04.619 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:23:05.182 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 21:23:05.269 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 649.1611ms.
2025-05-06 21:23:05.269 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 21:23:05.275 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 952.5649ms
2025-05-06 21:23:05.275 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 21:23:05.275 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1002.2579 ms
2025-05-06 21:23:05.279 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 1015.436ms
2025-05-06 21:23:33.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/pending - null null
2025-05-06 21:23:33.771 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi)'
2025-05-06 21:23:33.780 +03:00 [INF] Route matched with {action = "GetAllPending", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]]] GetAllPending() on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:23:33.835 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:23:33.869 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__status_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Status] = @__status_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-05-06 21:23:33.895 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 59.6945ms.
2025-05-06 21:23:33.895 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 21:23:33.901 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi) in 120.8589ms
2025-05-06 21:23:33.901 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetAllPending (Expense_Management_System.WebApi)'
2025-05-06 21:23:33.901 +03:00 [INF] HTTP GET /api/Expense/pending responded 200 in 141.5138 ms
2025-05-06 21:23:33.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/pending - 200 null application/json; charset=utf-8 196.3176ms
2025-05-06 21:25:14.895 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 - null 0
2025-05-06 21:25:14.907 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:25:14.956 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:25:15.001 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:25:15.078 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:25:15.320 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 364.6386ms
2025-05-06 21:25:15.322 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:25:15.324 +03:00 [ERR] HTTP POST /api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 responded 500 in 417.7128 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:25:15.367 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:25:15.381 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 - 500 null text/plain; charset=utf-8 487.8443ms
2025-05-06 21:25:58.409 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 - null 0
2025-05-06 21:25:58.480 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:25:58.486 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:25:58.590 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:25:58.625 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:25:58.735 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [ApprovedByUserId] = @p1, [Status] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 21:25:58.806 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:25:59.002 +03:00 [ERR] Failed executing DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:25:59.035 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:25:59.491 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 1004.6553ms
2025-05-06 21:25:59.492 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:25:59.492 +03:00 [ERR] HTTP POST /api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 responded 500 in 1080.7736 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:25:59.504 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:25:59.513 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 - 500 null text/plain; charset=utf-8 1104.8574ms
2025-05-06 21:26:24.000 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null 0
2025-05-06 21:26:24.029 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:26:24.030 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:26:24.100 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:26:24.115 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:26:24.125 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [ApprovedByUserId] = @p1, [Status] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 21:26:24.144 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:26:24.152 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:26:24.156 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:26:24.625 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 595.3693ms
2025-05-06 21:26:24.626 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:26:24.626 +03:00 [ERR] HTTP POST /api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 624.2296 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:26:24.630 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:851dbd60-5182-4ee7-8877-9f24f5b7167c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 133
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:26:24.638 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 639.4787ms
2025-05-06 21:27:18.367 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/reject/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - application/json 36
2025-05-06 21:27:18.371 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Reject (Expense_Management_System.WebApi)'
2025-05-06 21:27:18.392 +03:00 [INF] Route matched with {action = "Reject", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Reject(System.Guid, Expense_Management_System.Application.DTOs.Requests.RejectExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:27:18.431 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Reject (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:27:18.438 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:27:18.570 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Reject (Expense_Management_System.WebApi) in 177.4867ms
2025-05-06 21:27:18.570 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Reject (Expense_Management_System.WebApi)'
2025-05-06 21:27:18.571 +03:00 [ERR] HTTP POST /api/Expense/reject/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 203.4483 ms
System.Exception: Only pending expenses can be rejected
   at Expense_Management_System.Application.Services.ExpenseService.RejectExpenseAsync(Guid expenseId, Guid adminId, String rejectionReason) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 144
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Reject(Guid expenseId, RejectExpenseRequest reject) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 143
   at lambda_method716(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:27:18.573 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be rejected
   at Expense_Management_System.Application.Services.ExpenseService.RejectExpenseAsync(Guid expenseId, Guid adminId, String rejectionReason) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 144
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Reject(Guid expenseId, RejectExpenseRequest reject) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 143
   at lambda_method716(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:27:18.576 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/reject/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 213.5863ms
2025-05-06 21:27:57.507 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null null
2025-05-06 21:27:57.557 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 21:27:57.562 +03:00 [INF] Route matched with {action = "GetById", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:27:57.597 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:27:57.611 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:27:57.613 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.9643ms.
2025-05-06 21:27:57.613 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 21:27:57.616 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi) in 54.6294ms
2025-05-06 21:27:57.616 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.GetById (Expense_Management_System.WebApi)'
2025-05-06 21:27:57.617 +03:00 [INF] HTTP GET /api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 200 in 104.2990 ms
2025-05-06 21:27:57.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 200 null application/json; charset=utf-8 110.8526ms
2025-05-06 21:28:09.554 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null null
2025-05-06 21:28:09.591 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 21:28:09.601 +03:00 [INF] Route matched with {action = "Delete", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.String]] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:28:09.627 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:28:09.636 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:28:09.679 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p15='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 300), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [Amount] = @p0, [ApprovedAt] = @p1, [ApprovedByUserId] = @p2, [Description] = @p3, [ExpenseCategoryId] = @p4, [InsertedDate] = @p5, [InsertedUser] = @p6, [IsActive] = @p7, [PaymentLocation] = @p8, [PaymentMethod] = @p9, [RejectionReason] = @p10, [Status] = @p11, [UpdatedDate] = @p12, [UpdatedUser] = @p13, [UserId] = @p14
OUTPUT 1
WHERE [Id] = @p15;
2025-05-06 21:28:09.681 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 53.8083ms.
2025-05-06 21:28:09.681 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 21:28:09.684 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi) in 83.379ms
2025-05-06 21:28:09.684 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Delete (Expense_Management_System.WebApi)'
2025-05-06 21:28:09.684 +03:00 [INF] HTTP DELETE /api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 200 in 130.0523 ms
2025-05-06 21:28:09.684 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 200 null application/json; charset=utf-8 130.661ms
2025-05-06 21:32:37.421 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:32:38.132 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:32:38.133 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:32:38.136 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:32:38.136 +03:00 [INF] Hosting environment: Development
2025-05-06 21:32:38.136 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:32:39.262 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:32:39.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 665.6993ms
2025-05-06 21:32:39.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:32:39.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:32:39.977 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 16.5683ms
2025-05-06 21:32:40.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.5351ms
2025-05-06 21:32:42.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:32:42.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 448.9579ms
2025-05-06 21:33:05.321 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null 0
2025-05-06 21:33:05.601 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:33:05.650 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:33:07.131 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:33:11.190 +03:00 [INF] Executed DbCommand (152ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:33:48.028 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 42374.1537ms
2025-05-06 21:33:48.030 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:33:48.036 +03:00 [ERR] HTTP POST /api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 42706.5458 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:33:48.079 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:33:48.095 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 42775.0637ms
2025-05-06 21:34:05.514 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - null 0
2025-05-06 21:34:05.593 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:34:05.594 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:34:05.732 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:34:08.636 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:34:50.839 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [ApprovedByUserId] = @p1, [Status] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 21:34:52.288 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:35:01.535 +03:00 [ERR] Failed executing DbCommand (49ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:35:01.562 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:77cc5273-cf47-411a-9a9b-6fcc59ae6481
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:77cc5273-cf47-411a-9a9b-6fcc59ae6481
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:35:02.183 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 56589.4145ms
2025-05-06 21:35:02.184 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:35:02.185 +03:00 [ERR] HTTP POST /api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 responded 500 in 56599.6747 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:77cc5273-cf47-411a-9a9b-6fcc59ae6481
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:35:02.190 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:77cc5273-cf47-411a-9a9b-6fcc59ae6481
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:35:02.258 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - 500 null text/plain; charset=utf-8 56744.8032ms
2025-05-06 21:35:33.273 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:35:33.943 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:35:33.943 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:35:33.952 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:35:33.953 +03:00 [INF] Hosting environment: Development
2025-05-06 21:35:33.953 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:35:35.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:35:35.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 485.343ms
2025-05-06 21:35:35.810 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:35:35.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.8025ms
2025-05-06 21:35:35.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:35:35.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.0771ms
2025-05-06 21:35:37.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:35:37.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 305.3486ms
2025-05-06 21:36:18.423 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - null 0
2025-05-06 21:36:18.672 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:36:18.719 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:36:20.476 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:36:27.397 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:36:27.821 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [ApprovedByUserId] = @p1, [Status] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 21:36:27.875 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:36:28.012 +03:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:36:28.041 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a904d7e1-f972-4e52-838f-c459fd0fc4c1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a904d7e1-f972-4e52-838f-c459fd0fc4c1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:36:28.490 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 9767.7069ms
2025-05-06 21:36:28.492 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:36:28.496 +03:00 [ERR] HTTP POST /api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 responded 500 in 10064.6304 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a904d7e1-f972-4e52-838f-c459fd0fc4c1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:36:28.516 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a904d7e1-f972-4e52-838f-c459fd0fc4c1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 166
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 45
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:36:28.549 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - 500 null text/plain; charset=utf-8 10127.1541ms
2025-05-06 21:36:47.006 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:36:47.630 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:36:47.631 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:36:47.634 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:36:47.635 +03:00 [INF] Hosting environment: Development
2025-05-06 21:36:47.635 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:36:48.459 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:36:49.091 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 642.664ms
2025-05-06 21:36:49.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:36:49.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.3711ms
2025-05-06 21:36:49.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:36:49.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.3392ms
2025-05-06 21:36:50.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:36:51.339 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 443.4571ms
2025-05-06 21:37:07.622 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - null 0
2025-05-06 21:37:07.844 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:37:07.892 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:37:10.065 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:37:13.686 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:37:24.832 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 16936.3491ms
2025-05-06 21:37:24.834 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:37:24.838 +03:00 [ERR] HTTP POST /api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 responded 500 in 17202.0989 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:37:24.858 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:37:24.870 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - 500 null text/plain; charset=utf-8 17249.345ms
2025-05-06 21:39:29.896 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:39:30.559 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:39:30.561 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:39:30.566 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:39:30.567 +03:00 [INF] Hosting environment: Development
2025-05-06 21:39:30.567 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:39:31.539 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:39:32.889 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1375.8849ms
2025-05-06 21:39:32.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:39:32.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:39:32.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.0273ms
2025-05-06 21:39:33.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.7001ms
2025-05-06 21:39:35.130 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:39:35.483 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 353.7282ms
2025-05-06 21:40:08.437 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - null 0
2025-05-06 21:40:08.706 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:40:08.767 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:40:11.105 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:40:15.628 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:41:10.507 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 21:41:18.361 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:41:18.578 +03:00 [ERR] Failed executing DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:41:18.606 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:287bd252-aa32-4b1d-a310-c125b577895d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:287bd252-aa32-4b1d-a310-c125b577895d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:41:19.107 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 70335.8182ms
2025-05-06 21:41:19.109 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:41:19.113 +03:00 [ERR] HTTP POST /api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 responded 500 in 70651.8785 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:287bd252-aa32-4b1d-a310-c125b577895d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense)
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId)
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId)
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:41:19.129 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:287bd252-aa32-4b1d-a310-c125b577895d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense)
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId)
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId)
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:41:19.455 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - 500 null text/plain; charset=utf-8 71018.0794ms
2025-05-06 21:45:38.449 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:45:39.111 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:45:39.112 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:45:39.114 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:45:39.114 +03:00 [INF] Hosting environment: Development
2025-05-06 21:45:39.114 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:45:40.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:45:41.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1279.2697ms
2025-05-06 21:45:41.444 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:45:41.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:45:41.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 8.2766ms
2025-05-06 21:45:41.523 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.8513ms
2025-05-06 21:45:43.677 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:45:44.026 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 349.5234ms
2025-05-06 21:46:06.652 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - null 0
2025-05-06 21:46:06.925 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:46:06.980 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:46:08.518 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:46:13.857 +03:00 [INF] Executed DbCommand (182ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:46:16.803 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 9818.9006ms
2025-05-06 21:46:16.805 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:46:16.809 +03:00 [ERR] HTTP POST /api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 responded 500 in 10148.4923 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:46:16.865 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:46:16.882 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - 500 null text/plain; charset=utf-8 10230.0974ms
2025-05-06 21:49:30.938 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - null 0
2025-05-06 21:49:30.977 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:49:30.978 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:49:31.103 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:49:36.501 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:49:38.966 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 7988.429ms
2025-05-06 21:49:38.967 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:49:38.968 +03:00 [ERR] HTTP POST /api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 responded 500 in 7997.1735 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:49:38.970 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 35
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:49:38.972 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - 500 null text/plain; charset=utf-8 8034.5168ms
2025-05-06 21:49:59.598 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/5b98bd9e-a3ea-468d-a57b-7b532f725b38 - null 0
2025-05-06 21:49:59.603 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:49:59.603 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:49:59.691 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:50:03.654 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:50:14.197 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [ApprovedByUserId] = @p1, [Status] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 21:50:17.447 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:50:17.627 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:50:17.655 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44b9b4ab-9150-47cf-b2a6-a86831d88e2b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44b9b4ab-9150-47cf-b2a6-a86831d88e2b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:50:23.856 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 24253.0735ms
2025-05-06 21:50:23.857 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:50:23.858 +03:00 [ERR] HTTP POST /api/Expense/approve/5b98bd9e-a3ea-468d-a57b-7b532f725b38 responded 500 in 24258.3460 ms
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44b9b4ab-9150-47cf-b2a6-a86831d88e2b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 173
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 47
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 51
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:50:23.865 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:44b9b4ab-9150-47cf-b2a6-a86831d88e2b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 173
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 47
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 51
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:50:23.925 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/5b98bd9e-a3ea-468d-a57b-7b532f725b38 - 500 null text/plain; charset=utf-8 24326.3528ms
2025-05-06 21:52:12.504 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 21:52:13.284 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 21:52:13.284 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 21:52:13.287 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 21:52:13.288 +03:00 [INF] Hosting environment: Development
2025-05-06 21:52:13.288 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 21:52:13.930 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 21:52:14.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 639.1614ms
2025-05-06 21:52:14.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 21:52:14.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 21:52:14.605 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 13.5296ms
2025-05-06 21:52:14.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.178ms
2025-05-06 21:52:16.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 21:52:17.224 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 288.2936ms
2025-05-06 21:52:50.134 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null 0
2025-05-06 21:52:50.394 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:52:50.446 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 21:52:52.284 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 21:52:59.472 +03:00 [INF] Executed DbCommand (129ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 21:53:18.982 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 21:53:21.589 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 21:53:21.826 +03:00 [ERR] Failed executing DbCommand (31ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 21:53:21.860 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9cd95c40-faa1-4b38-a15d-85a2d6956bd9
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9cd95c40-faa1-4b38-a15d-85a2d6956bd9
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 21:53:28.924 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 38474.1017ms
2025-05-06 21:53:28.925 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 21:53:28.929 +03:00 [ERR] HTTP POST /api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 38786.0686 ms
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9cd95c40-faa1-4b38-a15d-85a2d6956bd9
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 175
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 53
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 21:53:28.957 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9cd95c40-faa1-4b38-a15d-85a2d6956bd9
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 175
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 53
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 21:53:29.436 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 39302.0904ms
2025-05-06 22:00:12.245 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:00:13.009 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:00:13.010 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:00:13.012 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:00:13.013 +03:00 [INF] Hosting environment: Development
2025-05-06 22:00:13.013 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:00:14.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:00:15.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1061.2292ms
2025-05-06 22:00:15.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:00:15.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:00:15.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 42.9709ms
2025-05-06 22:00:15.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 156.9678ms
2025-05-06 22:00:17.381 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:00:17.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 284.9691ms
2025-05-06 22:00:44.017 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null 0
2025-05-06 22:00:44.321 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:53:05', Current time (UTC): '6.05.2025 19:00:44'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 22:00:44.356 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:53:05', Current time (UTC): '6.05.2025 19:00:44'.
2025-05-06 22:00:44.369 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-05-06 22:00:44.375 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 22:00:44.378 +03:00 [INF] HTTP POST /api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 401 in 345.6347 ms
2025-05-06 22:00:44.381 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 401 0 null 364.0304ms
2025-05-06 22:01:04.454 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 64
2025-05-06 22:01:04.475 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:53:05', Current time (UTC): '6.05.2025 19:01:04'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 22:01:04.476 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 18:53:05', Current time (UTC): '6.05.2025 19:01:04'.
2025-05-06 22:01:04.483 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 22:01:04.538 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 22:01:05.826 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:01:06.681 +03:00 [INF] Executed DbCommand (124ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 22:01:06.847 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1013.1316ms.
2025-05-06 22:01:06.855 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 22:01:06.882 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2337.6561ms
2025-05-06 22:01:06.883 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 22:01:06.885 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 2421.7671 ms
2025-05-06 22:01:06.904 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 2450.129ms
2025-05-06 22:01:31.695 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - null 0
2025-05-06 22:01:31.717 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:01:31.726 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:01:31.861 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:01:37.015 +03:00 [INF] Executed DbCommand (2,669ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:01:37.329 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 5602.7099ms
2025-05-06 22:01:37.330 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:01:37.332 +03:00 [ERR] HTTP POST /api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 5633.1709 ms
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:01:37.370 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Only pending expenses can be approved
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 37
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:01:37.383 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 5689.0797ms
2025-05-06 22:02:19.654 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 - null 0
2025-05-06 22:02:19.679 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:02:19.680 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:02:19.723 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:02:34.875 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:02:44.760 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:02:47.583 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 22:02:47.764 +03:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 22:02:47.783 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e698dbc7-b5ed-42d8-8341-e725fb7f5f8d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e698dbc7-b5ed-42d8-8341-e725fb7f5f8d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:02:52.690 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 33010.5729ms
2025-05-06 22:02:52.691 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:02:52.691 +03:00 [ERR] HTTP POST /api/Expense/approve/bc18136a-63cf-4746-a873-a04a455e8558 responded 500 in 33034.2541 ms
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details. | Inner: Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e698dbc7-b5ed-42d8-8341-e725fb7f5f8d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 176
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 54
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:02:52.696 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details. | Inner: Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FailureReason', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e698dbc7-b5ed-42d8-8341-e725fb7f5f8d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 176
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 54
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:07:23.078 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:07:23.924 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:07:23.925 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:07:23.927 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:07:23.928 +03:00 [INF] Hosting environment: Development
2025-05-06 22:07:23.928 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:07:25.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:07:26.476 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 591.9059ms
2025-05-06 22:07:26.529 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:07:26.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:07:26.540 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.7777ms
2025-05-06 22:07:26.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.193ms
2025-05-06 22:07:28.847 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:07:29.193 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 345.9107ms
2025-05-06 22:07:45.247 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - null 0
2025-05-06 22:07:45.556 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:07:45.599 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:07:47.267 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:07:51.285 +03:00 [INF] Executed DbCommand (184ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:07:59.997 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:08:02.925 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 22:08:03.126 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 22:08:03.154 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c740b9a5-af2a-464d-a99c-ab7891a236a2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c740b9a5-af2a-464d-a99c-ab7891a236a2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:08:08.176 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) in 22572.1264ms
2025-05-06 22:08:08.178 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:08:08.182 +03:00 [ERR] HTTP POST /api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 responded 500 in 22925.0283 ms
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details. | Inner: Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c740b9a5-af2a-464d-a99c-ab7891a236a2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 176
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 54
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:08:08.228 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Payment simulation failed: An error occurred while saving the entity changes. See the inner exception for details. | Inner: Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c740b9a5-af2a-464d-a99c-ab7891a236a2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.PaymentService.ProcessPaymentAsync(Expense expense) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\PaymentService.cs:line 56
   at Expense_Management_System.Application.Services.ExpenseService.TriggerPaymentSimulationAsync(Guid expenseId, Guid userId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 176
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 49
   --- End of inner exception stack trace ---
   at Expense_Management_System.Application.Services.ExpenseService.ApproveExpenseAsync(Guid expenseId, Guid adminId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\ExpenseService.cs:line 54
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Approve(Guid expenseId) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 132
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:08:08.536 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Expense/approve/dc776fc8-0472-41c3-8beb-877f113a4991 - 500 null text/plain; charset=utf-8 23289.4187ms
2025-05-06 22:09:52.569 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:09:53.443 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:09:53.444 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:09:53.450 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:09:53.451 +03:00 [INF] Hosting environment: Development
2025-05-06 22:09:53.451 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:09:54.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:09:56.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 2458.8028ms
2025-05-06 22:09:56.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:09:56.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:09:56.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.9395ms
2025-05-06 22:09:56.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.6562ms
2025-05-06 22:09:58.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:09:59.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.2369ms
2025-05-06 22:10:19.219 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - null 0
2025-05-06 22:10:19.499 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:10:19.544 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:10:21.248 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:10:24.821 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:10:30.512 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:11:30.976 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 22:11:31.162 +03:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 22:11:31.191 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:67a4c570-43bf-45b1-9997-1316eb6caf30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:67a4c570-43bf-45b1-9997-1316eb6caf30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:14:41.249 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:14:41.975 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:14:41.976 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:14:41.979 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:14:41.979 +03:00 [INF] Hosting environment: Development
2025-05-06 22:14:41.979 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:14:43.574 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:14:44.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 883.0835ms
2025-05-06 22:14:44.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:14:44.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:14:44.593 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 21.4191ms
2025-05-06 22:14:44.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 172.5483ms
2025-05-06 22:14:46.901 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:14:47.218 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 317.2394ms
2025-05-06 22:15:01.882 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Expense/approve/5b98bd9e-a3ea-468d-a57b-7b532f725b38 - null 0
2025-05-06 22:15:02.167 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi)'
2025-05-06 22:15:02.210 +03:00 [INF] Route matched with {action = "Approve", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Approve(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:15:03.808 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Approve (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:15:09.887 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:15:15.058 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [ApprovedAt] = @p0, [Status] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:15:18.041 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Id] = @__get_Item_0
2025-05-06 22:15:18.238 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime2), @p13='?' (Size = 250), @p14='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsActive], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-05-06 22:15:18.270 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3212c820-3617-47b4-a0ef-0be88ff14ebf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'InsertedUser', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3212c820-3617-47b4-a0ef-0be88ff14ebf
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:16:16.428 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:16:17.274 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:16:17.275 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:16:17.278 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:16:17.279 +03:00 [INF] Hosting environment: Development
2025-05-06 22:16:17.279 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:16:18.489 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:16:19.204 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 727.8246ms
2025-05-06 22:16:19.230 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:16:19.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:16:19.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 31.3104ms
2025-05-06 22:16:19.410 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 162.7141ms
2025-05-06 22:16:21.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:16:21.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 338.2914ms
2025-05-06 22:26:22.936 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:26:23.722 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:26:23.722 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:26:23.725 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:26:23.725 +03:00 [INF] Hosting environment: Development
2025-05-06 22:26:23.725 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:26:24.465 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:26:25.116 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 668.2428ms
2025-05-06 22:26:25.128 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:26:25.143 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:26:25.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 15.8473ms
2025-05-06 22:26:25.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.4602ms
2025-05-06 22:26:26.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:26:27.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.0511ms
2025-05-06 22:28:34.397 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - multipart/form-data; boundary=----WebKitFormBoundaryMCPsDHH6XbDGHH0U 386627
2025-05-06 22:28:34.848 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:28:34.915 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:28:36.549 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:28:37.551 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:28:37.690 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1134.9472ms.
2025-05-06 22:28:37.701 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 22:28:37.740 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 2821.6453ms
2025-05-06 22:28:37.741 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:28:37.744 +03:00 [INF] HTTP PUT /api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 200 in 3295.2468 ms
2025-05-06 22:28:37.759 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 200 null application/json; charset=utf-8 3365.6004ms
2025-05-06 22:29:48.138 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:29:48.801 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:29:48.802 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:29:48.805 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:29:48.805 +03:00 [INF] Hosting environment: Development
2025-05-06 22:29:48.805 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:29:49.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:29:50.012 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 592.6341ms
2025-05-06 22:29:50.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:29:50.038 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:29:50.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.6946ms
2025-05-06 22:29:50.092 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.2104ms
2025-05-06 22:29:52.167 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:29:52.516 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 348.8492ms
2025-05-06 22:30:34.646 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - multipart/form-data; boundary=----WebKitFormBoundaryB9vz0cWTxMnmlCzX 386619
2025-05-06 22:30:34.952 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:30:35.012 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:30:36.374 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:31:20.649 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:38:00.584 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:38:01.336 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:38:01.336 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:38:01.339 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:38:01.340 +03:00 [INF] Hosting environment: Development
2025-05-06 22:38:01.340 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:38:02.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:38:03.503 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 1003.0849ms
2025-05-06 22:38:03.524 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:38:03.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:38:03.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 56.8752ms
2025-05-06 22:38:03.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 110.0368ms
2025-05-06 22:38:05.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:38:05.621 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 304.6031ms
2025-05-06 22:39:04.486 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - multipart/form-data; boundary=----WebKitFormBoundaryHIFO1fm6Ju69x9LV 386615
2025-05-06 22:39:04.793 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 19:31:06', Current time (UTC): '6.05.2025 19:39:04'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 22:39:04.829 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 19:31:06', Current time (UTC): '6.05.2025 19:39:04'.
2025-05-06 22:39:04.841 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 22:39:04.849 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 22:39:04.852 +03:00 [INF] HTTP PUT /api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 401 in 353.7066 ms
2025-05-06 22:39:04.854 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 401 0 null 367.9447ms
2025-05-06 22:39:24.989 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 64
2025-05-06 22:39:25.024 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 22:39:25.075 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 22:39:26.941 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:39:28.015 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 22:39:28.144 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1199.4666ms.
2025-05-06 22:39:28.149 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 22:39:28.166 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 3086.5284ms
2025-05-06 22:39:28.167 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 22:39:28.168 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3159.9954 ms
2025-05-06 22:39:28.175 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3187.6053ms
2025-05-06 22:39:54.990 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - multipart/form-data; boundary=----WebKitFormBoundaryiZNvUx01oQ0rz7Gv 386615
2025-05-06 22:39:55.024 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:39:55.075 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:39:55.435 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:40:07.955 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:40:10.583 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:40:10.586 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 500), @p2='?' (Size = 100), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [Amount] = @p0, [Description] = @p1, [PaymentLocation] = @p2, [UpdatedDate] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 22:40:10.801 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 15725.7322ms
2025-05-06 22:40:10.802 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:40:10.803 +03:00 [ERR] HTTP PUT /api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 responded 500 in 15808.9873 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Update(Guid id, ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 186
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:40:10.839 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseController.Update(Guid id, ExpenseRequest request) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseController.cs:line 186
   at lambda_method149(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:40:10.981 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/a125ad9b-d004-42d6-9fa2-ea32e0a61b51 - 500 null text/plain; charset=utf-8 15990.4955ms
2025-05-06 22:43:42.652 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:43:45.304 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:43:45.306 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:43:45.310 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:43:45.311 +03:00 [INF] Hosting environment: Development
2025-05-06 22:43:45.311 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:43:46.235 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:43:46.916 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 700.1449ms
2025-05-06 22:43:46.943 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:43:46.945 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:43:46.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 9.4356ms
2025-05-06 22:43:47.043 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.1462ms
2025-05-06 22:43:49.423 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:43:49.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 260.916ms
2025-05-06 22:44:47.710 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - multipart/form-data; boundary=----WebKitFormBoundaryZ9rZTnJstEMrieo9 675545
2025-05-06 22:44:48.020 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:44:48.070 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:44:49.674 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 22:44:49.705 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 1631.0611ms
2025-05-06 22:44:49.706 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:44:49.709 +03:00 [INF] HTTP PUT /api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 responded 400 in 1971.9451 ms
2025-05-06 22:44:49.726 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - 400 null application/problem+json; charset=utf-8 2016.4203ms
2025-05-06 22:44:58.612 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - multipart/form-data; boundary=----WebKitFormBoundaryBAui6pVhpFT1ZmhA 675546
2025-05-06 22:44:58.662 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:44:58.662 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:44:58.743 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 22:44:58.744 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 81.3161ms
2025-05-06 22:44:58.744 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:44:58.744 +03:00 [INF] HTTP PUT /api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 responded 400 in 90.0786 ms
2025-05-06 22:44:58.747 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - 400 null application/problem+json; charset=utf-8 137.9715ms
2025-05-06 22:45:09.293 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - multipart/form-data; boundary=----WebKitFormBoundaryTSS2n8YMlBltz5sQ 675560
2025-05-06 22:45:09.304 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:45:09.304 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:45:09.468 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:45:15.489 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:45:20.514 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 500), @p2='?' (Size = 100), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [Amount] = @p0, [Description] = @p1, [PaymentLocation] = @p2, [PaymentMethod] = @p3, [UpdatedDate] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-05-06 22:45:20.534 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:45:45.649 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 36176.4235ms.
2025-05-06 22:45:45.650 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 22:45:48.641 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 39336.393ms
2025-05-06 22:45:48.641 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:45:48.641 +03:00 [INF] HTTP PUT /api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 responded 200 in 39346.2783 ms
2025-05-06 22:45:48.671 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/7ae545d4-4342-4b7e-bbb5-72f9a3747307 - 200 null application/json; charset=utf-8 39377.4926ms
2025-05-06 22:51:17.264 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 22:51:17.967 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 22:51:17.968 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 22:51:17.971 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 22:51:17.972 +03:00 [INF] Hosting environment: Development
2025-05-06 22:51:17.972 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 22:51:19.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 22:51:19.759 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 633.5816ms
2025-05-06 22:51:19.783 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 22:51:19.783 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 22:51:19.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 11.191ms
2025-05-06 22:51:19.844 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.8234ms
2025-05-06 22:51:21.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 22:51:22.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 350.8891ms
2025-05-06 22:52:15.095 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/Expense/dc776fc8-0472-41c3-8beb-877f113a4991 - multipart/form-data; boundary=----WebKitFormBoundary8BXlX1Ajv7wosgtp 183284
2025-05-06 22:52:15.371 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:52:15.419 +03:00 [INF] Route matched with {action = "Update", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseController (Expense_Management_System.WebApi).
2025-05-06 22:52:17.701 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:52:23.285 +03:00 [INF] Executed DbCommand (131ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Amount], [e].[ApprovedAt], [e].[ApprovedByUserId], [e].[Description], [e].[ExpenseCategoryId], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[PaymentLocation], [e].[PaymentMethod], [e].[RejectionReason], [e].[Status], [e].[UpdatedDate], [e].[UpdatedUser], [e].[UserId]
FROM [Expenses] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:52:28.112 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Size = 500), @p1='?' (Size = 100), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Expenses] SET [Description] = @p0, [PaymentLocation] = @p1, [PaymentMethod] = @p2, [UpdatedDate] = @p3, [UpdatedUser] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-05-06 22:52:28.146 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 22:52:39.737 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 22030.9466ms.
2025-05-06 22:52:39.747 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 22:52:41.665 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi) in 26240.8192ms
2025-05-06 22:52:41.666 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:52:41.670 +03:00 [INF] HTTP PUT /api/Expense/dc776fc8-0472-41c3-8beb-877f113a4991 responded 200 in 26543.7222 ms
2025-05-06 22:52:41.696 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/Expense/dc776fc8-0472-41c3-8beb-877f113a4991 - 200 null application/json; charset=utf-8 26601.145ms
2025-05-06 22:54:12.551 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument - null null
2025-05-06 22:54:12.558 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 22:54:12.566 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 22:54:12.649 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:54:20.007 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi) in 7440.0568ms
2025-05-06 22:54:20.008 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 22:54:20.009 +03:00 [ERR] HTTP GET /api/ExpenseDocument responded 500 in 7454.8259 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 30
   at lambda_method263(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:54:20.039 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetAll() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseDocumentController.cs:line 30
   at lambda_method263(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:54:20.045 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 7494.7167ms
2025-05-06 22:55:25.597 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 60
2025-05-06 22:55:25.617 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:55:25.621 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 22:55:25.721 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:55:25.741 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:55:25.796 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 22:55:25.813 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 22:55:25.924 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 302.3813ms
2025-05-06 22:55:25.924 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:55:25.925 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 500 in 318.3908 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method271(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:55:25.931 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method271(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:55:25.943 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 500 null text/plain; charset=utf-8 346.1698ms
2025-05-06 22:56:11.184 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 60
2025-05-06 22:56:11.242 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:11.243 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 22:56:11.310 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:56:11.322 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:56:11.327 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 22:56:11.335 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:56:11.387 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 76.9228ms.
2025-05-06 22:56:11.388 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 22:56:11.399 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 155.7368ms
2025-05-06 22:56:11.399 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:11.399 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 157.6617 ms
2025-05-06 22:56:11.400 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 216.05ms
2025-05-06 22:56:19.899 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 60
2025-05-06 22:56:19.900 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:19.900 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 22:56:19.934 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:56:19.938 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:56:19.942 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 22:56:19.943 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 8.2833ms.
2025-05-06 22:56:19.943 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 22:56:19.943 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 43.2388ms
2025-05-06 22:56:19.943 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:19.943 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 44.3471 ms
2025-05-06 22:56:19.944 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 45.6025ms
2025-05-06 22:56:28.349 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 47
2025-05-06 22:56:28.350 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:28.350 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 22:56:28.457 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 22:56:28.461 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 22:56:28.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 22:56:28.467 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 22:56:28.712 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 361.9681ms
2025-05-06 22:56:28.713 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 22:56:28.713 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 364.3590 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method271(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 22:56:28.716 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 76
   at lambda_method271(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 22:56:28.724 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 371.9447ms
2025-05-06 22:59:58.452 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 22:59:58.501 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 22:59:58.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-06 22:59:58.503 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-06 22:59:58.522 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-06 22:59:58.533 +03:00 [INF] Applying migration '20250506195947_updatedExpenseCategory'.
2025-05-06 22:59:58.712 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ExpenseCategories]') AND [c].[name] = N'Description');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [ExpenseCategories] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [ExpenseCategories] SET [Description] = N'' WHERE [Description] IS NULL;
ALTER TABLE [ExpenseCategories] ALTER COLUMN [Description] nvarchar(100) NOT NULL;
ALTER TABLE [ExpenseCategories] ADD DEFAULT N'' FOR [Description];
2025-05-06 22:59:58.718 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506195947_updatedExpenseCategory', N'8.0.0');
2025-05-06 23:00:31.001 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:00:31.733 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:00:31.734 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:00:31.736 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:00:31.737 +03:00 [INF] Hosting environment: Development
2025-05-06 23:00:31.737 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:00:32.914 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:00:33.636 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 746.3961ms
2025-05-06 23:00:33.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:00:33.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:00:33.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 12.2791ms
2025-05-06 23:00:33.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.1456ms
2025-05-06 23:00:35.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:00:35.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 362.5635ms
2025-05-06 23:01:24.037 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 64
2025-05-06 23:01:24.259 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 23:01:24.308 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 23:01:25.765 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:01:26.842 +03:00 [INF] Executed DbCommand (172ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 23:01:27.048 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1276.1647ms.
2025-05-06 23:01:27.059 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 23:01:27.083 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 2766.2113ms
2025-05-06 23:01:27.084 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 23:01:27.090 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 3039.3210 ms
2025-05-06 23:01:27.107 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 3071.4667ms
2025-05-06 23:02:21.066 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 43
2025-05-06 23:02:21.200 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:21.216 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:02:21.364 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:02:21.390 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 171.7873ms
2025-05-06 23:02:21.390 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:21.390 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 296.3315 ms
2025-05-06 23:02:21.391 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 325.327ms
2025-05-06 23:02:28.932 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 23:02:28.944 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:28.945 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:02:28.993 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:02:28.993 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 48.269ms
2025-05-06 23:02:28.993 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:28.993 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 60.1260 ms
2025-05-06 23:02:28.994 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 61.8479ms
2025-05-06 23:02:36.983 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 23:02:36.990 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:36.990 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:02:36.999 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:02:36.999 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 8.3864ms
2025-05-06 23:02:36.999 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:36.999 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 14.9418 ms
2025-05-06 23:02:36.999 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 16.7861ms
2025-05-06 23:02:47.445 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 54
2025-05-06 23:02:47.446 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:47.447 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:02:47.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:02:47.449 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2.112ms
2025-05-06 23:02:47.449 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:02:47.449 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 3.6793 ms
2025-05-06 23:02:47.449 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 4.9097ms
2025-05-06 23:03:34.973 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 54
2025-05-06 23:03:34.988 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:03:34.988 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:03:34.996 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:03:34.997 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 8.3827ms
2025-05-06 23:03:34.997 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:03:34.997 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 20.9968 ms
2025-05-06 23:03:34.997 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 24.9126ms
2025-05-06 23:03:47.088 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 54
2025-05-06 23:03:47.090 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:03:47.090 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:03:47.093 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:03:47.093 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 3.653ms
2025-05-06 23:03:47.094 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:03:47.094 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 400 in 4.7308 ms
2025-05-06 23:03:47.094 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 400 null application/problem+json; charset=utf-8 6.1436ms
2025-05-06 23:05:25.731 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:05:26.522 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:05:26.523 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:05:26.526 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:05:26.526 +03:00 [INF] Hosting environment: Development
2025-05-06 23:05:26.526 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:05:27.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:05:28.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 568.0537ms
2025-05-06 23:05:28.156 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:05:28.156 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:05:28.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.8805ms
2025-05-06 23:05:28.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.6038ms
2025-05-06 23:05:30.219 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:05:30.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 278.8879ms
2025-05-06 23:05:45.180 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 49
2025-05-06 23:05:45.449 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:05:45.495 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:05:47.236 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:05:48.528 +03:00 [INF] Executed DbCommand (177ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:05:48.743 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:05:48.920 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1, [UpdatedUser] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 23:05:48.954 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:05:49.400 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 3900.1918ms
2025-05-06 23:05:49.402 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:05:49.407 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 500 in 4217.7108 ms
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:05:49.467 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (There is already an open DataReader associated with this Connection which must be closed first.)
 ---> System.InvalidOperationException: There is already an open DataReader associated with this Connection which must be closed first.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:05:49.486 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 500 null text/plain; charset=utf-8 4307.5754ms
2025-05-06 23:06:10.372 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 - application/json 49
2025-05-06 23:06:10.381 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:10.381 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:06:10.506 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:06:10.525 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:06:10.704 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 322.0572ms
2025-05-06 23:06:10.704 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:10.705 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 responded 500 in 330.1172 ms
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad06 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:06:10.709 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad06 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:06:10.712 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 - 500 null text/plain; charset=utf-8 340.9473ms
2025-05-06 23:06:28.942 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 43
2025-05-06 23:06:28.948 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:28.948 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:06:29.041 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:06:29.076 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 127.4281ms
2025-05-06 23:06:29.076 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:29.076 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 132.8353 ms
2025-05-06 23:06:29.076 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 134.3508ms
2025-05-06 23:06:32.372 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 23:06:32.375 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:32.375 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:06:32.426 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:06:32.434 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:06:32.441 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:06:32.445 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.6919ms.
2025-05-06 23:06:32.446 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:06:32.462 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 86.2786ms
2025-05-06 23:06:32.462 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:06:32.462 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 87.9170 ms
2025-05-06 23:06:32.463 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 91.1092ms
2025-05-06 23:07:14.690 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 68
2025-05-06 23:07:14.701 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:14.703 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:07:14.737 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:07:14.743 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:07:14.749 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:07:14.761 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2, [UpdatedUser] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-06 23:07:14.763 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:07:15.006 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 303.645ms
2025-05-06 23:07:15.007 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:15.008 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 316.6360 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:07:15.010 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:07:15.016 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 325.3185ms
2025-05-06 23:07:29.150 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 68
2025-05-06 23:07:29.163 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:29.166 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:07:29.212 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:07:29.218 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:07:29.222 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:07:29.223 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 10.2821ms.
2025-05-06 23:07:29.223 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:07:29.223 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 57.3704ms
2025-05-06 23:07:29.223 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:29.223 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 72.5301 ms
2025-05-06 23:07:29.224 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 74.1032ms
2025-05-06 23:07:55.804 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 69
2025-05-06 23:07:55.806 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:55.807 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:07:55.919 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:07:55.928 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:07:55.935 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:07:55.945 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:07:56.018 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 98.7724ms.
2025-05-06 23:07:56.018 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:07:56.030 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 222.9291ms
2025-05-06 23:07:56.030 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:07:56.030 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 224.7945 ms
2025-05-06 23:07:56.030 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 231.844ms
2025-05-06 23:08:11.678 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 77
2025-05-06 23:08:11.679 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:08:11.680 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:08:11.755 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:08:11.762 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:08:11.765 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:08:11.770 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:08:11.771 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:08:12.036 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 356.5675ms
2025-05-06 23:08:12.037 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:08:12.038 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 359.5392 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:08:12.043 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 78
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:08:12.049 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 371.4161ms
2025-05-06 23:09:42.616 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:09:43.496 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:09:43.527 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:09:43.534 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:09:43.535 +03:00 [INF] Hosting environment: Development
2025-05-06 23:09:43.535 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:09:44.087 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:09:44.595 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 522.124ms
2025-05-06 23:09:44.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:09:44.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:09:44.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.099ms
2025-05-06 23:09:44.699 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.6231ms
2025-05-06 23:09:46.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:09:46.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 296.5382ms
2025-05-06 23:10:30.824 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 49
2025-05-06 23:10:31.070 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:31.114 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:10:32.490 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:10:33.463 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:10:33.605 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:10:33.612 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1117.5246ms.
2025-05-06 23:10:33.620 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:10:33.640 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2521.7906ms
2025-05-06 23:10:33.640 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:33.644 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 2809.8893 ms
2025-05-06 23:10:33.651 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 2827.3934ms
2025-05-06 23:10:38.998 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 58
2025-05-06 23:10:39.009 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:39.010 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:10:39.106 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:10:39.119 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:10:39.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:10:39.275 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:10:39.314 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 207.8716ms.
2025-05-06 23:10:39.315 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:10:39.321 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 310.8983ms
2025-05-06 23:10:39.322 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:39.322 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 320.7125 ms
2025-05-06 23:10:39.322 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 324.8293ms
2025-05-06 23:10:48.784 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 52
2025-05-06 23:10:48.789 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:48.789 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:10:48.826 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:10:48.849 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 59.7325ms
2025-05-06 23:10:48.849 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:48.849 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 400 in 64.4937 ms
2025-05-06 23:10:48.849 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 400 null application/problem+json; charset=utf-8 65.9139ms
2025-05-06 23:10:56.676 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 49
2025-05-06 23:10:56.677 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:56.677 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:10:56.745 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:10:56.752 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:10:56.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:10:56.760 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:10:56.764 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.1558ms.
2025-05-06 23:10:56.764 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:10:56.764 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 86.786ms
2025-05-06 23:10:56.764 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:10:56.764 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 88.0436 ms
2025-05-06 23:10:56.764 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 89.3686ms
2025-05-06 23:11:04.097 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 57
2025-05-06 23:11:04.098 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:11:04.098 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:11:04.140 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:11:04.147 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:11:04.154 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:11:04.154 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.863ms.
2025-05-06 23:11:04.155 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:11:04.155 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 56.6871ms
2025-05-06 23:11:04.155 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:11:04.155 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 57.8362 ms
2025-05-06 23:11:04.156 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 59.0706ms
2025-05-06 23:11:47.973 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 - application/json 59
2025-05-06 23:11:47.975 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:11:47.975 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:11:48.021 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:11:48.035 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:11:48.219 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 244.5096ms
2025-05-06 23:11:48.220 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:11:48.221 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 responded 500 in 248.0097 ms
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad06 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:11:48.257 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id fd6143cd-b454-4b21-9524-d7d128f8ad06 not found.
   at Expense_Management_System.Application.Services.GenericService`1.GetByIdAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 49
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 68
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:11:48.265 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad06 - 500 null text/plain; charset=utf-8 293.2155ms
2025-05-06 23:15:42.272 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:15:42.805 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:15:42.806 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:15:42.808 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:15:42.808 +03:00 [INF] Hosting environment: Development
2025-05-06 23:15:42.808 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:15:43.481 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:15:44.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 633.0974ms
2025-05-06 23:15:44.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:15:44.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:15:44.140 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 18.8545ms
2025-05-06 23:15:44.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 115.2772ms
2025-05-06 23:15:45.797 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:15:46.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 365.986ms
2025-05-06 23:16:17.563 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 55
2025-05-06 23:16:17.823 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:16:17.885 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:16:19.364 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:16:20.822 +03:00 [INF] Executed DbCommand (157ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:16:21.191 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:16:21.212 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:16:21.795 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 3902.8185ms
2025-05-06 23:16:21.799 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:16:21.807 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 500 in 4234.2273 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:16:21.861 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:16:21.898 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 500 null text/plain; charset=utf-8 4335.1599ms
2025-05-06 23:17:26.508 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 55
2025-05-06 23:17:26.530 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:17:26.531 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:17:26.657 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:17:26.674 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:17:26.743 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:17:26.751 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 90.0681ms.
2025-05-06 23:17:26.764 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:17:26.795 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 264.6813ms
2025-05-06 23:17:26.796 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:17:26.796 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 271.2618 ms
2025-05-06 23:17:26.797 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 289.5037ms
2025-05-06 23:17:32.480 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 62
2025-05-06 23:17:32.485 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:17:32.485 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:17:32.557 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:17:32.564 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:17:32.569 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:17:32.580 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 23:17:32.580 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:17:32.905 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 419.4893ms
2025-05-06 23:17:32.905 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:17:32.907 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 425.8775 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:17:32.911 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:17:32.917 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 437.0883ms
2025-05-06 23:18:05.956 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 89
2025-05-06 23:18:05.958 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:05.958 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:18:06.005 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:18:06.013 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:18:06.024 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:18:06.069 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.835ms.
2025-05-06 23:18:06.070 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:18:06.081 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 122.6088ms
2025-05-06 23:18:06.081 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:06.081 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 124.4789 ms
2025-05-06 23:18:06.081 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 126.4845ms
2025-05-06 23:18:21.644 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 85
2025-05-06 23:18:21.662 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:21.668 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:18:21.700 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:18:21.707 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:18:21.713 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:18:21.720 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:18:21.720 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:18:22.046 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 377.6734ms
2025-05-06 23:18:22.047 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:22.048 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 403.3427 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:18:22.052 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:18:22.059 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 415.6782ms
2025-05-06 23:18:49.384 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 46
2025-05-06 23:18:49.386 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:49.386 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:18:49.412 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-06 23:18:49.444 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 58.3935ms
2025-05-06 23:18:49.445 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:18:49.445 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 400 in 60.4208 ms
2025-05-06 23:18:49.445 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 400 null application/problem+json; charset=utf-8 61.5221ms
2025-05-06 23:19:00.425 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 58
2025-05-06 23:19:00.426 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:19:00.426 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:19:00.462 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:19:00.468 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:19:00.475 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:19:00.475 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:19:00.758 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 331.9668ms
2025-05-06 23:19:00.758 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:19:00.759 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 333.8243 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:19:00.761 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:19:00.765 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 341.1902ms
2025-05-06 23:19:13.460 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 58
2025-05-06 23:19:13.498 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:19:13.515 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:19:13.562 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:19:13.574 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:19:13.579 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:19:13.579 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:19:13.820 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 304.3059ms
2025-05-06 23:19:13.820 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:19:13.821 +03:00 [ERR] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 500 in 360.2258 ms
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:19:13.825 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The connection does not support MultipleActiveResultSets.)
 ---> System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at Microsoft.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at Microsoft.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso)
   at Microsoft.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginDbTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Expense_Management_System.Infrastructure.UnitofWorks.UnitofWork.SaveChangesAsync() in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\UnitfWorks\UnitofWork.cs:line 54
   at Expense_Management_System.Application.Services.GenericService`1.UpdateAsync(Guid id, TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 60
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update(Guid id, ExpenseCategoryRequest categoryRequest) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 81
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:19:13.831 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 500 null text/plain; charset=utf-8 370.6524ms
2025-05-06 23:20:28.569 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:20:29.204 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:20:29.205 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:20:29.207 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:20:29.208 +03:00 [INF] Hosting environment: Development
2025-05-06 23:20:29.208 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:20:30.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:20:30.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 679.0051ms
2025-05-06 23:20:30.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:20:30.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:20:31.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 128.566ms
2025-05-06 23:20:31.178 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 236.6576ms
2025-05-06 23:20:33.167 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:20:33.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 249.8292ms
2025-05-06 23:21:00.661 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 58
2025-05-06 23:21:00.944 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:21:00.999 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:21:02.440 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:21:03.439 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:21:03.716 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:21:03.759 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1313.7105ms.
2025-05-06 23:21:03.768 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:21:03.805 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2799.8907ms
2025-05-06 23:21:03.806 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:21:03.811 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 3119.2656 ms
2025-05-06 23:21:03.821 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 3160.9238ms
2025-05-06 23:21:18.161 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 83
2025-05-06 23:21:18.174 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:21:18.174 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:21:18.296 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:21:18.312 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:21:18.406 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:21:18.415 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Name] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:21:18.751 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 455.0711ms.
2025-05-06 23:21:18.752 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:21:18.752 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 577.5107ms
2025-05-06 23:21:18.752 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:21:18.752 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 586.6241 ms
2025-05-06 23:21:18.753 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 592.0153ms
2025-05-06 23:22:24.824 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:22:25.389 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:22:25.389 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:22:25.392 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:22:25.393 +03:00 [INF] Hosting environment: Development
2025-05-06 23:22:25.393 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:22:26.187 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:22:26.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 756.4137ms
2025-05-06 23:22:26.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:22:26.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 7.3842ms
2025-05-06 23:22:26.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:22:27.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.2345ms
2025-05-06 23:22:28.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:22:29.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 301.4666ms
2025-05-06 23:23:04.868 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 49
2025-05-06 23:23:05.149 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:05.203 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:23:06.677 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:23:07.658 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:23:07.859 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:23:08.036 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [Name] = @p1, [UpdatedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-05-06 23:23:08.070 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1388.1787ms.
2025-05-06 23:23:08.078 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:23:08.104 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2895.3415ms
2025-05-06 23:23:08.105 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:08.108 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 3231.1008 ms
2025-05-06 23:23:08.116 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 3248.3375ms
2025-05-06 23:23:16.674 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 52
2025-05-06 23:23:16.685 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:16.686 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:23:16.802 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:23:16.816 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:23:16.823 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:23:16.825 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.1001ms.
2025-05-06 23:23:16.826 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:23:16.826 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 140.35ms
2025-05-06 23:23:16.826 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:16.826 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 148.1108 ms
2025-05-06 23:23:16.827 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 153.2635ms
2025-05-06 23:23:40.034 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 49
2025-05-06 23:23:40.042 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:40.042 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:23:40.084 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:23:40.090 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:23:40.094 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:23:40.095 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.3369ms.
2025-05-06 23:23:40.095 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:23:40.096 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 53.3624ms
2025-05-06 23:23:40.096 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:40.096 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 60.4643 ms
2025-05-06 23:23:40.096 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 62.452ms
2025-05-06 23:23:49.001 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - application/json 52
2025-05-06 23:23:49.002 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:49.002 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:23:49.072 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:23:49.078 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:23:49.085 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:23:49.093 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.2517ms.
2025-05-06 23:23:49.093 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:23:49.093 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 91.0967ms
2025-05-06 23:23:49.093 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:23:49.093 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 91.9087 ms
2025-05-06 23:23:49.094 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 93.1589ms
2025-05-06 23:24:17.930 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b36 - application/json 52
2025-05-06 23:24:17.931 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:24:17.931 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:24:17.963 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:24:17.969 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:24:18.146 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 182.5746ms.
2025-05-06 23:24:18.146 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:24:18.146 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 215.4313ms
2025-05-06 23:24:18.147 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:24:18.147 +03:00 [INF] HTTP PUT /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b36 responded 200 in 216.4776 ms
2025-05-06 23:24:18.147 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b36 - 200 null application/json; charset=utf-8 217.6525ms
2025-05-06 23:27:37.323 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:27:37.966 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:27:37.967 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:27:37.970 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:27:37.970 +03:00 [INF] Hosting environment: Development
2025-05-06 23:27:37.970 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:27:38.900 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:27:39.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 630.371ms
2025-05-06 23:27:39.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:27:39.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 10.0207ms
2025-05-06 23:27:39.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:27:39.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.441ms
2025-05-06 23:27:41.493 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:27:41.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 334.5829ms
2025-05-06 23:27:59.480 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - application/json 49
2025-05-06 23:27:59.737 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:27:59.784 +03:00 [INF] Route matched with {action = "Update", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Update(System.Guid, Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:28:01.301 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:28:02.264 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:28:02.556 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [UpdatedDate] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-06 23:28:02.610 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1300.2306ms.
2025-05-06 23:28:02.627 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:28:02.676 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi) in 2885.0925ms
2025-05-06 23:28:02.677 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Update (Expense_Management_System.WebApi)'
2025-05-06 23:28:02.680 +03:00 [INF] HTTP PUT /api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 responded 200 in 3191.9361 ms
2025-05-06 23:28:02.694 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/ExpenseCategory/fd6143cd-b454-4b21-9524-d7d128f8ad05 - 200 null application/json; charset=utf-8 3215.1934ms
2025-05-06 23:28:22.358 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 49
2025-05-06 23:28:22.365 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:28:22.370 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:28:22.459 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:28:22.505 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:28:22.511 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 50.9833ms.
2025-05-06 23:28:22.512 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:28:22.512 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 142.0662ms
2025-05-06 23:28:22.512 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:28:22.512 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 152.5845 ms
2025-05-06 23:28:22.513 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 155.8673ms
2025-05-06 23:28:27.774 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 61
2025-05-06 23:28:27.779 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:28:27.779 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:28:27.832 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:28:27.844 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:28:27.845 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 12.8707ms.
2025-05-06 23:28:27.845 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:28:27.845 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 65.8873ms
2025-05-06 23:28:27.845 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:28:27.845 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 71.0238 ms
2025-05-06 23:28:27.845 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 72.6615ms
2025-05-06 23:29:05.133 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseCategory - application/json 45
2025-05-06 23:29:05.145 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:29:05.150 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseCategoryRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:29:05.178 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:29:05.191 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__ToLower_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ExpenseCategories] AS [e]
        WHERE LOWER([e].[Name]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:29:05.241 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 250), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ExpenseCategories] ([Id], [Description], [InsertedDate], [InsertedUser], [Name], [UpdatedDate], [UpdatedUser])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-06 23:29:05.256 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 77.8206ms.
2025-05-06 23:29:05.256 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:29:05.257 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi) in 107.1013ms
2025-05-06 23:29:05.257 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:29:05.257 +03:00 [INF] HTTP POST /api/ExpenseCategory responded 200 in 121.2582 ms
2025-05-06 23:29:05.257 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 124.5844ms
2025-05-06 23:29:15.021 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - null null
2025-05-06 23:29:15.025 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:29:15.048 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:29:15.090 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:29:15.103 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:29:15.137 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:29:15.163 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-05-06 23:29:15.175 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [InsertedDate] = @p1, [InsertedUser] = @p2, [IsActive] = @p3, [Name] = @p4, [UpdatedDate] = @p5, [UpdatedUser] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-06 23:29:15.178 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 87.1728ms.
2025-05-06 23:29:15.178 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 23:29:15.180 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 131.666ms
2025-05-06 23:29:15.180 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:29:15.180 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa responded 200 in 158.8015 ms
2025-05-06 23:29:15.181 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - 200 null application/json; charset=utf-8 159.8974ms
2025-05-06 23:29:43.067 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - null null
2025-05-06 23:29:43.101 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:29:43.109 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:29:43.139 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:29:43.145 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:29:43.152 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:29:43.365 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 255.2797ms
2025-05-06 23:29:43.366 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:29:43.367 +03:00 [ERR] HTTP DELETE /api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa responded 500 in 296.9839 ms
System.Exception: Entity with id 17ec0cde-4fbf-4030-bf4e-89f598a7b8fa not found.
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 33
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 102
   at lambda_method170(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:29:43.402 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Entity with id 17ec0cde-4fbf-4030-bf4e-89f598a7b8fa not found.
   at Expense_Management_System.Application.Services.GenericService`1.DeleteAsync(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 33
   at Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete(Guid id) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi\Controllers\ExpenseCategoryController.cs:line 102
   at lambda_method170(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:29:43.410 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - 500 null text/plain; charset=utf-8 344.2974ms
2025-05-06 23:31:52.177 +03:00 [INF] User profile is available. Using 'C:\Users\BERKAY\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-06 23:31:52.887 +03:00 [INF] Now listening on: https://localhost:7092
2025-05-06 23:31:52.888 +03:00 [INF] Now listening on: http://localhost:5243
2025-05-06 23:31:52.890 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 23:31:52.891 +03:00 [INF] Hosting environment: Development
2025-05-06 23:31:52.891 +03:00 [INF] Content root path: D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.WebApi
2025-05-06 23:31:54.132 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:31:54.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 578.9474ms
2025-05-06 23:31:54.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:31:54.768 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:31:54.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 19.8314ms
2025-05-06 23:31:54.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 145.7623ms
2025-05-06 23:31:56.961 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:31:57.315 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 354.1482ms
2025-05-06 23:32:18.870 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - null null
2025-05-06 23:32:19.148 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:19.198 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:32:20.819 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:32:21.837 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:32:21.984 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:32:22.117 +03:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-05-06 23:32:22.129 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 250), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [ExpenseCategories] SET [Description] = @p0, [InsertedDate] = @p1, [InsertedUser] = @p2, [IsActive] = @p3, [Name] = @p4, [UpdatedDate] = @p5, [UpdatedUser] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-06 23:32:22.161 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1334.6081ms.
2025-05-06 23:32:22.169 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 23:32:22.180 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 2978.4594ms
2025-05-06 23:32:22.181 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:22.186 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa responded 200 in 3306.9563 ms
2025-05-06 23:32:22.194 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - 200 null application/json; charset=utf-8 3324.7596ms
2025-05-06 23:32:27.163 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - null null
2025-05-06 23:32:27.171 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:27.171 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:32:27.260 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:32:27.273 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:32:27.279 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:32:27.472 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 210.8221ms.
2025-05-06 23:32:27.472 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 23:32:27.472 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 300.934ms
2025-05-06 23:32:27.472 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:27.473 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa responded 200 in 307.5227 ms
2025-05-06 23:32:27.473 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/17ec0cde-4fbf-4030-bf4e-89f598a7b8fa - 200 null application/json; charset=utf-8 311.0391ms
2025-05-06 23:32:47.273 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 23:32:47.296 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:47.297 +03:00 [INF] Route matched with {action = "Delete", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse] Delete(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:32:47.354 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:32:47.368 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:32:47.373 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]
        WHERE [e].[ExpenseCategoryId] = @__categoryId_0 AND [e].[Status] = 1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-06 23:32:47.373 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.8188ms.
2025-05-06 23:32:47.373 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse'.
2025-05-06 23:32:47.374 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi) in 76.9262ms
2025-05-06 23:32:47.374 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.Delete (Expense_Management_System.WebApi)'
2025-05-06 23:32:47.374 +03:00 [INF] HTTP DELETE /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 100.1795 ms
2025-05-06 23:32:47.374 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 106.355ms
2025-05-06 23:33:07.716 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory - null null
2025-05-06 23:33:07.721 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 23:33:07.729 +03:00 [INF] Route matched with {action = "GetAll", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:33:07.767 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:33:07.791 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
2025-05-06 23:33:07.824 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 56.4808ms.
2025-05-06 23:33:07.824 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 23:33:07.847 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi) in 117.4316ms
2025-05-06 23:33:07.847 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 23:33:07.847 +03:00 [INF] HTTP GET /api/ExpenseCategory responded 200 in 129.3157 ms
2025-05-06 23:33:07.847 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory - 200 null application/json; charset=utf-8 131.3575ms
2025-05-06 23:33:17.580 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - null null
2025-05-06 23:33:17.583 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 23:33:17.587 +03:00 [INF] Route matched with {action = "GetById", controller = "ExpenseCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseCategoryController (Expense_Management_System.WebApi).
2025-05-06 23:33:17.613 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:33:17.620 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Description], [e].[InsertedDate], [e].[InsertedUser], [e].[IsActive], [e].[Name], [e].[UpdatedDate], [e].[UpdatedUser]
FROM [ExpenseCategories] AS [e]
WHERE [e].[Id] = @__get_Item_0
2025-05-06 23:33:17.622 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 9.4482ms.
2025-05-06 23:33:17.622 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[Expense_Management_System.Application.DTOs.Responses.ExpenseCategoryResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-06 23:33:17.624 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi) in 36.2293ms
2025-05-06 23:33:17.624 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseCategoryController.GetById (Expense_Management_System.WebApi)'
2025-05-06 23:33:17.624 +03:00 [INF] HTTP GET /api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 responded 200 in 41.8827 ms
2025-05-06 23:33:17.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseCategory/57bdee69-e820-46c7-9784-62354b271b35 - 200 null application/json; charset=utf-8 44.8252ms
2025-05-06 23:36:45.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 - null null
2025-05-06 23:36:45.972 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 20:31:26', Current time (UTC): '6.05.2025 20:36:45'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 23:36:45.984 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 20:31:26', Current time (UTC): '6.05.2025 20:36:45'.
2025-05-06 23:36:45.986 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-06 23:36:45.993 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-06 23:36:45.993 +03:00 [INF] HTTP GET /api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 responded 401 in 39.0357 ms
2025-05-06 23:36:45.993 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 - 401 0 null 43.8652ms
2025-05-06 23:37:14.370 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/login - application/json 65
2025-05-06 23:37:14.371 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 20:31:26', Current time (UTC): '6.05.2025 20:37:14'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-05-06 23:37:14.372 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6.05.2025 20:31:26', Current time (UTC): '6.05.2025 20:37:14'.
2025-05-06 23:37:14.372 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 23:37:14.377 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Expense_Management_System.Application.DTOs.Requests.LoginRequest) on controller Expense_Management_System.WebApi.Controllers.AuthController (Expense_Management_System.WebApi).
2025-05-06 23:37:14.431 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:37:14.456 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Email], [u].[FirstName], [u].[InsertedDate], [u].[InsertedUser], [u].[IsActive], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[Role], [u].[UpdatedDate], [u].[UpdatedUser], [u].[WorkPhoneNumber]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-06 23:37:14.511 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.6941ms.
2025-05-06 23:37:14.512 +03:00 [INF] Executing OkObjectResult, writing value of type 'Expense_Management_System.Application.DTOs.Responses.LoginResponse'.
2025-05-06 23:37:14.513 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi) in 135.9042ms
2025-05-06 23:37:14.513 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.AuthController.Login (Expense_Management_System.WebApi)'
2025-05-06 23:37:14.513 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 142.5706 ms
2025-05-06 23:37:14.517 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/login - 200 null application/json; charset=utf-8 147.3738ms
2025-05-06 23:37:40.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 - null null
2025-05-06 23:37:40.495 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById (Expense_Management_System.WebApi)'
2025-05-06 23:37:40.502 +03:00 [INF] Route matched with {action = "GetById", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] GetById(System.Guid) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 23:37:40.541 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:38:47.517 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById (Expense_Management_System.WebApi) in 67014.6431ms
2025-05-06 23:38:47.524 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById (Expense_Management_System.WebApi)'
2025-05-06 23:38:47.538 +03:00 [ERR] HTTP GET /api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 responded 500 in 67043.3938 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById(Guid id)
   at lambda_method274(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:38:47.553 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.GetById(Guid id)
   at lambda_method274(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:38:47.562 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/ExpenseDocument/2ce53b19-bd6e-43c5-bf9a-ee065c89ae50 - 500 null text/plain; charset=utf-8 67068.3464ms
2025-05-06 23:38:48.228 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/index.html - null null
2025-05-06 23:38:48.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/index.html - 200 null text/html;charset=utf-8 109.6843ms
2025-05-06 23:38:48.351 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2025-05-06 23:38:48.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2025-05-06 23:38:48.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13800 application/javascript; charset=utf-8 2.4818ms
2025-05-06 23:38:48.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.9612ms
2025-05-06 23:38:49.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2025-05-06 23:38:49.426 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/favicon-32x32.png - null null
2025-05-06 23:38:49.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.4334ms
2025-05-06 23:38:49.458 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-06 23:38:49.458 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/favicon-32x32.png - 200 628 image/png 32.3655ms
2025-05-06 23:39:12.409 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/ExpenseDocument - multipart/form-data; boundary=----WebKitFormBoundaryzQQjMgjNCU9BroPJ 391110
2025-05-06 23:39:12.438 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:39:12.511 +03:00 [INF] Route matched with {action = "Create", controller = "ExpenseDocument"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.ExpenseDocumentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.ExpenseDocumentRequest) on controller Expense_Management_System.WebApi.Controllers.ExpenseDocumentController (Expense_Management_System.WebApi).
2025-05-06 23:39:12.692 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:39:20.045 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi) in 7533.7797ms
2025-05-06 23:39:20.045 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:39:20.046 +03:00 [ERR] HTTP POST /api/ExpenseDocument responded 500 in 7609.6072 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest)
   at lambda_method282(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:39:20.049 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Expense_Management_System.WebApi.Controllers.ExpenseDocumentController.Create(ExpenseDocumentRequest documentRequest)
   at lambda_method282(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:39:20.065 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/ExpenseDocument - 500 null text/plain; charset=utf-8 7656.7265ms
2025-05-06 23:40:44.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Payment - null null
2025-05-06 23:40:44.890 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 23:40:44.897 +03:00 [INF] Route matched with {action = "GetAll", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[System.Collections.Generic.IEnumerable`1[Expense_Management_System.Application.DTOs.Responses.PaymentResponse]]] GetAll() on controller Expense_Management_System.WebApi.Controllers.PaymentController (Expense_Management_System.WebApi).
2025-05-06 23:40:44.927 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:40:44.943 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[BankAccountNumber], [p].[ExpenseId], [p].[FailureReason], [p].[InsertedDate], [p].[InsertedUser], [p].[IsActive], [p].[IsSuccessful], [p].[PaymentDate], [p].[PaymentMethod], [p].[TransactionReference], [p].[UpdatedDate], [p].[UpdatedUser], [p].[UserId]
FROM [Payments] AS [p]
2025-05-06 23:40:44.951 +03:00 [INF] Executed action method Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.9571ms.
2025-05-06 23:40:44.951 +03:00 [INF] Executing ObjectResult, writing value of type 'Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[Expense_Management_System.Application.DTOs.Responses.PaymentResponse, Expense_Management_System.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-06 23:40:44.966 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi) in 68.3965ms
2025-05-06 23:40:44.966 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.GetAll (Expense_Management_System.WebApi)'
2025-05-06 23:40:44.966 +03:00 [INF] HTTP GET /api/Payment responded 200 in 77.1400 ms
2025-05-06 23:40:44.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Payment - 200 null application/json; charset=utf-8 91.7795ms
2025-05-06 23:41:35.737 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Payment - application/json 102
2025-05-06 23:41:35.780 +03:00 [INF] Executing endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:41:35.797 +03:00 [INF] Route matched with {action = "Create", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Expense_Management_System.WebApi.ApiResponses.ApiResponse`1[Expense_Management_System.Application.DTOs.Responses.PaymentResponse]] Create(Expense_Management_System.Application.DTOs.Requests.PaymentRequest) on controller Expense_Management_System.WebApi.Controllers.PaymentController (Expense_Management_System.WebApi).
2025-05-06 23:41:35.867 +03:00 [INF] Executing action method Expense_Management_System.WebApi.Controllers.PaymentController.Create (Expense_Management_System.WebApi) - Validation state: "Valid"
2025-05-06 23:41:36.001 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 250), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Int32), @p10='?' (Size = 100), @p11='?' (DbType = DateTime2), @p12='?' (Size = 250), @p13='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Id], [Amount], [BankAccountNumber], [ExpenseId], [FailureReason], [InsertedDate], [InsertedUser], [IsSuccessful], [PaymentDate], [PaymentMethod], [TransactionReference], [UpdatedDate], [UpdatedUser], [UserId])
OUTPUT INSERTED.[IsActive]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-05-06 23:41:36.031 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Expense_Management_System.Infrastructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'BankAccountNumber', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3e3f6ee1-506d-4478-b629-2b1ccf6f4678
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'BankAccountNumber', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3e3f6ee1-506d-4478-b629-2b1ccf6f4678
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-06 23:41:36.334 +03:00 [INF] Executed action Expense_Management_System.WebApi.Controllers.PaymentController.Create (Expense_Management_System.WebApi) in 536.4727ms
2025-05-06 23:41:36.334 +03:00 [INF] Executed endpoint 'Expense_Management_System.WebApi.Controllers.PaymentController.Create (Expense_Management_System.WebApi)'
2025-05-06 23:41:36.335 +03:00 [ERR] HTTP POST /api/Payment responded 500 in 595.2380 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'BankAccountNumber', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3e3f6ee1-506d-4478-b629-2b1ccf6f4678
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.PaymentController.Create(PaymentRequest paymentRequest)
   at lambda_method304(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-06 23:41:36.346 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'BankAccountNumber', table 'ExpenseManagementDB.dbo.Payments'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3e3f6ee1-506d-4478-b629-2b1ccf6f4678
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Expense_Management_System.Infrastructure.Repositories.GenericRepository`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Infrastructure\Repositories\GenericRepository.cs:line 26
   at Expense_Management_System.Application.Services.GenericService`1.AddAsync(TEntity entity) in D:\Belgelerim\C# Projeleri\Expense_Management_System\Expense_Management_System.Application\Services\GenericService.cs:line 24
   at Expense_Management_System.WebApi.Controllers.PaymentController.Create(PaymentRequest paymentRequest)
   at lambda_method304(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 23:41:36.350 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Payment - 500 null text/plain; charset=utf-8 612.7311ms
